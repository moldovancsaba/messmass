# P1 2.5.1: Chart Content Density & Typography Optimization Investigation

**Date:** 2026-01-09T14:02:10.000Z  
**Status:** Investigation In Progress  
**Investigator:** Tribeca  
**Priority:** üü† P1 - HIGH

---

## Scope

**Objective:** Optimize chart content density and typography to better utilize available space without violating Layout Grammar rules (no scrolling, no truncation, no clipping).

**Specific Issues Identified:**
1. **Pie Chart Legend Overflow:** Legend text overflows container, does not scale to fill available space
2. **KPI Value Sizing:** KPI numeric values and labels underutilize available vertical space
3. **Typography Underutilization:** Fixed-size typography does not adapt to container dimensions

**Requirements:**
- Pie chart legend text must never overflow and must scale to fill available space
- KPI numeric values and labels must scale to better use available vertical space
- Prefer container-driven typography (clamp / responsive scaling)
- No truncation, clipping, or fixed-size underutilization
- Must maintain Layout Grammar compliance (no scrolling, no truncation, no clipping)

---

## Investigation Methodology

**Files to Scan:**
- `app/report/[slug]/ReportChart.module.css` - Chart styling
- `components/charts/*.tsx` - Chart components
- `lib/reportStyleTypes.ts` - Style injection
- `hooks/useUnifiedTextFontSize.ts` - Typography scaling hooks

**Patterns to Search:**
- Fixed font sizes (e.g., `font-size: 16px`, `font-size: 24px`)
- Pie chart legend styling (`.pieLegend`, `.pie-legend`)
- KPI value styling (`.kpiValue`, `.kpi-value`)
- Typography scaling mechanisms (clamp, calc, CSS variables)

**Tools:**
```bash
# Find fixed font sizes
grep -r "font-size:\s*[0-9]+px" app/report components/charts --include="*.css" --include="*.module.css"

# Find pie legend styling
grep -r "pieLegend\|pie-legend" app/ components/ --include="*.css" --include="*.tsx"

# Find KPI value styling
grep -r "kpiValue\|kpi-value" app/ components/ --include="*.css" --include="*.tsx"
```

---

## Findings

**Status:** ‚è≥ Investigation in progress

---

## Classification

**PASS / FAIL / NEEDS OPTIMIZATION:**
- TBD after investigation

---

## Proposed Solutions

**Status:** ‚è≥ Awaiting investigation completion

**Approach:**
- Container-driven typography using `clamp()` or CSS custom properties
- Responsive scaling based on container dimensions
- Maintain Layout Grammar compliance

---

## Next Steps

1. Complete investigation (scan files, identify violations)
2. Classify findings (PASS / FAIL / NEEDS OPTIMIZATION)
3. Propose minimal fixes at correct boundaries
4. Document in this report
5. Await approval before implementing fixes

---

**Investigation Status:** ‚è≥ IN PROGRESS
