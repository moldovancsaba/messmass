# P1 1.5 Phase 3 – Remove Per-Row Font Size Logic (Investigation)

**⚠️ SUPERSEDED:** This investigation document is superseded by `P1-1.5-phase3-implementation.md`. See canonical closure document `IMPLEMENTATION_COMPLETE.md` for authoritative evidence.

**Date:** 2026-01-11T11:00:00.000Z  
**Status:** SUPERSEDED  
**Investigator:** Tribeca  
**Reference:** `P1-1.5-unified-typography-solution.md` Phase 3

---

## Phase 3 Goal

Remove per-row font size calculations and props. Since CSS now uses `--block-base-font-size` and `--block-subtitle-font-size` directly (Phase 2), the props and state are no longer needed.

---

## Investigation Results

### 1. CellWrapper Component

**File:** `components/CellWrapper.tsx`

**Current:**
- `CellWrapperProps` interface includes `titleFontSize?: number` and `subtitleFontSize?: number` (lines 11-12)
- Component accepts these props (lines 28-29)
- Sets CSS custom properties `--title-font-size` and `--subtitle-font-size` (lines 44, 46)

**Should be:**
- Remove `titleFontSize` and `subtitleFontSize` from interface
- Remove from function parameters
- Remove CSS custom property setting (no longer needed - CSS uses `--block-base-font-size` and `--block-subtitle-font-size` directly)

**Rationale:** CSS now references block-level variables directly (Phase 2), so these props are obsolete.

---

### 2. ResponsiveRow Component

**File:** `app/report/[slug]/ReportContent.tsx`

**Current:**
- `ResponsiveRowProps` interface includes `blockTitleFontSize?: number | null` and `blockSubtitleFontSize?: number | null` (lines 182-183)
- Component accepts these props (line 186)
- Has `titleFontSize` and `subtitleFontSize` state (lines 208-209)
- Updates state from block-level values in `useEffect` (lines 243-251)
- Includes block font sizes in dependency array (line 271)
- Passes `titleFontSize` and `subtitleFontSize` to `ReportChart` (lines 344-345)

**Should be:**
- Remove `blockTitleFontSize` and `blockSubtitleFontSize` from interface
- Remove from function parameters
- Remove `titleFontSize` and `subtitleFontSize` state
- Remove state update logic from `useEffect`
- Remove from dependency array
- Remove props passed to `ReportChart`

**Rationale:** CSS now references block-level variables directly (Phase 2), so these props and state are obsolete.

---

### 3. ReportBlock Component

**File:** `app/report/[slug]/ReportContent.tsx`

**Current:**
- Passes `blockTitleFontSize={blockBaseFontSize}` and `blockSubtitleFontSize={blockSubtitleFontSize}` to `ResponsiveRow` (lines 555-556)

**Should be:**
- Remove these props from `ResponsiveRow` calls

**Rationale:** `ResponsiveRow` no longer needs these props since CSS uses block-level variables directly.

---

### 4. ReportChart Component

**File:** `app/report/[slug]/ReportChart.tsx`

**Current:**
- `ReportChartProps` interface includes `titleFontSize?: number` and `subtitleFontSize?: number` (lines 89, 92)
- Component accepts these props (line 115)
- Passes them to all chart components (KPIChart, PieChart, BarChart, TextChart, ImageChart, TableChart) (lines 159, 162, 165, 168, 171, 174, 180-181)

**Should be:**
- Remove `titleFontSize` and `subtitleFontSize` from interface
- Remove from function parameters
- Remove from all chart component calls

**Rationale:** Chart components no longer need these props since CSS uses block-level variables directly.

---

### 5. Chart Components (KPIChart, PieChart, BarChart, TextChart, TableChart, ImageChart)

**File:** `app/report/[slug]/ReportChart.tsx`

**Current:**
- All chart components accept `titleFontSize?: number` and `subtitleFontSize?: number` in their function signatures
- Pass them to `CellWrapper` component

**Should be:**
- Remove `titleFontSize` and `subtitleFontSize` from all chart component function signatures
- Remove from `CellWrapper` calls

**Rationale:** `CellWrapper` no longer needs these props since CSS uses block-level variables directly.

---

## Summary

**Total removals required:**

1. **CellWrapper.tsx:** 3 changes
   - Remove from interface (2)
   - Remove from function parameters (2)
   - Remove CSS custom property setting (2)

2. **ReportContent.tsx (ResponsiveRow):** 6 changes
   - Remove from interface (2)
   - Remove from function parameters (2)
   - Remove state declarations (2)
   - Remove state update logic
   - Remove from dependency array
   - Remove props passed to ReportChart (2)

3. **ReportContent.tsx (ReportBlock):** 2 changes
   - Remove props passed to ResponsiveRow (2)

4. **ReportChart.tsx:** 15+ changes
   - Remove from interface (2)
   - Remove from function parameters (2)
   - Remove from all chart component calls (6 components × 2 props = 12)
   - Remove from all chart component signatures (6 components × 2 props = 12)

**Total:** ~26 changes across 3 files

---

## Implementation Plan

1. **CellWrapper.tsx:**
   - Remove `titleFontSize` and `subtitleFontSize` from `CellWrapperProps`
   - Remove from function parameters
   - Remove CSS custom property setting for `--title-font-size` and `--subtitle-font-size`

2. **ReportContent.tsx:**
   - Remove `blockTitleFontSize` and `blockSubtitleFontSize` from `ResponsiveRowProps`
   - Remove from `ResponsiveRow` function parameters
   - Remove `titleFontSize` and `subtitleFontSize` state
   - Remove state update logic from `useEffect`
   - Remove from dependency array
   - Remove props passed to `ReportChart`
   - Remove props passed to `ResponsiveRow` from `ReportBlock`

3. **ReportChart.tsx:**
   - Remove `titleFontSize` and `subtitleFontSize` from `ReportChartProps`
   - Remove from function parameters
   - Remove from all chart component calls
   - Remove from all chart component function signatures

---

## Next Steps

Proceed with implementation following the plan above.
