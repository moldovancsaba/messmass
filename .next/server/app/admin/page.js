(()=>{var a={};a.id=698,a.ids=[698],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:a=>{"use strict";a.exports=require("path")},4344:(a,b,c)=>{"use strict";c.d(b,{default:()=>f});var d=c(687),e=c(3210);function f({user:a,permissions:b}){let[f,g]=(0,e.useState)([]),[h,i]=(0,e.useState)(!0),[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)({eventName:"",eventDate:""}),[r,s]=(0,e.useState)(!1);(0,e.useRef)(null),(0,e.useRef)(null),(0,e.useRef)(null);let t=(0,e.useRef)(null),u=(0,e.useRef)(null),v=(0,e.useRef)(null),w=(0,e.useRef)(null),x=async a=>{if(confirm("Are you sure you want to delete this project?"))try{(await fetch(`/api/projects?projectId=${a}`,{method:"DELETE"})).ok&&(g(b=>b.filter(b=>b._id!==a)),j&&j._id===a&&(k(null),m(!1)))}catch(a){console.error("Failed to delete project:",a)}},y=async()=>{if(!p.eventName.trim()||!p.eventDate)return void alert("Please fill in both Event Name and Event Date.");s(!0);try{let a=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:p.eventName.trim(),eventDate:p.eventDate,stats:{remoteImages:0,hostessImages:0,selfies:0,indoor:0,outdoor:0,stadium:0,female:0,male:0,genAlpha:0,genYZ:0,genX:0,boomer:0,merched:0,jersey:0,scarf:0,flags:0,baseballCap:0,other:0,approvedImages:0,rejectedImages:0,visitQrCode:0,visitShortUrl:0,visitWeb:0,visitFacebook:0,visitInstagram:0,visitYoutube:0,visitTiktok:0,visitX:0,visitTrustpilot:0,eventAttendees:0,eventTicketPurchases:0,eventResultHome:0,eventResultVisitor:0,eventValuePropositionVisited:0,eventValuePropositionPurchases:0}})}),b=await a.json();a.ok&&b.success?(g(a=>[b.project,...a]),q({eventName:"",eventDate:""}),o(!1),alert(`Project "${b.project.eventName}" created successfully!

Edit Link: /edit/${b.project.editSlug}
Stats Link: /stats/${b.project.viewSlug}`)):alert(`Failed to create project: ${b.error||"Unknown error"}`)}catch(a){console.error("Failed to create project:",a),alert("Failed to create project. Please try again.")}finally{s(!1)}},z=async(a,b)=>{if(a.current)try{let d=(await c.e(424).then(c.bind(c,4424))).default;await new Promise(a=>setTimeout(a,100));let e=await d(a.current,{logging:!1}),f=document.createElement("a");f.download=`${b}.png`,f.href=e.toDataURL("image/png",1),document.body.appendChild(f),f.click(),document.body.removeChild(f),alert("Chart downloaded successfully!")}catch(a){console.error("Failed to export chart as PNG:",a),alert("Failed to export chart. Please try again.")}},A=f.length,B=f.reduce((a,b)=>a+(b.stats.indoor+b.stats.outdoor+b.stats.stadium),0),C=f.reduce((a,b)=>a+(b.stats.visitWeb||0),0),D=f.reduce((a,b)=>a+(b.stats.eventAttendees||0),0),E=f.reduce((a,b)=>a+(b.stats.approvedImages||0),0);f.reduce((a,b)=>a+(b.stats.eventTicketPurchases||0),0);let F=E+f.reduce((a,b)=>a+(b.stats.rejectedImages||0),0),G=F>0?Math.round(E/F*100):0,H=D>0?Math.round(B/D*100):0;return h?(0,d.jsx)("div",{className:"admin-container",children:(0,d.jsx)("div",{className:"glass-card",children:(0,d.jsx)("div",{className:"loading-spinner",children:"Loading admin dashboard..."})})}):(0,d.jsxs)("div",{className:"admin-container",children:[(0,d.jsxs)("div",{className:"glass-card admin-overview",children:[(0,d.jsx)("h2",{className:"section-title",children:"Dashboard Overview"}),(0,d.jsxs)("div",{className:"stats-grid-admin",children:[(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsx)("div",{className:"stat-value-admin",children:A}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Total Projects"})]}),(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsx)("div",{className:"stat-value-admin",children:B}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Total Audience"})]}),(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsx)("div",{className:"stat-value-admin",children:C}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Total Web Visits"})]}),(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsx)("div",{className:"stat-value-admin",children:D}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]})]})]}),(0,d.jsxs)("div",{className:"glass-card admin-overview",children:[(0,d.jsx)("h2",{className:"section-title",children:"Success Manager Overview"}),(0,d.jsxs)("div",{className:"stats-grid-admin",children:[(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsx)("div",{className:"stat-value-admin",children:E}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]}),(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsx)("div",{className:"stat-value-admin",children:D}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]}),(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsxs)("div",{className:"stat-value-admin",children:[H,"%"]}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Fan Engagement"})]}),(0,d.jsxs)("div",{className:"stat-card-admin",children:[(0,d.jsxs)("div",{className:"stat-value-admin",children:[G,"%"]}),(0,d.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]})]})]}),(0,d.jsxs)("div",{className:"glass-card admin-projects",children:[(0,d.jsxs)("div",{className:"projects-header",children:[(0,d.jsx)("h2",{className:"section-title",children:"Project Management"}),(0,d.jsxs)("div",{className:"projects-header-buttons",children:[(0,d.jsx)("a",{href:"/admin/charts",className:"btn btn-info",title:"Manage chart algorithms and formulas",children:"\uD83D\uDCCA Chart Algorithm Manager"}),(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>o(!0),children:"➕ Add New Project"}),(0,d.jsxs)("button",{className:"btn btn-primary",onClick:()=>m(!l),children:[l?"Hide":"Show"," Project Details"]})]})]}),(0,d.jsx)("div",{className:"projects-table-container",children:(0,d.jsxs)("table",{className:"projects-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Event Name"}),(0,d.jsx)("th",{children:"Date"}),(0,d.jsx)("th",{children:"Total Fans"}),(0,d.jsx)("th",{children:"Images"}),(0,d.jsx)("th",{children:"Merch"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:0===f.length?(0,d.jsx)("tr",{children:(0,d.jsxs)("td",{colSpan:6,className:"admin-empty-state",children:[(0,d.jsx)("div",{className:"admin-empty-icon",children:"\uD83D\uDCCA"}),(0,d.jsx)("div",{className:"admin-empty-title",children:"No Projects Found"}),(0,d.jsx)("div",{className:"admin-empty-subtitle",children:0===A?"No projects have been created yet. Create your first project to get started.":"Loading projects..."})]})}):f.map(a=>{let b=a.stats.indoor+a.stats.outdoor+a.stats.stadium,c=a.stats.remoteImages+a.stats.hostessImages+a.stats.selfies,e=a.stats.merched+a.stats.jersey+a.stats.scarf+a.stats.flags+a.stats.baseballCap+a.stats.other;return(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{className:"project-name",children:[a.viewSlug?(0,d.jsx)("a",{href:`/stats/${a.viewSlug}`,className:"project-title-link",title:`View detailed statistics for ${a.eventName}`,target:"_blank",rel:"noopener noreferrer",children:a.eventName}):(0,d.jsx)("span",{className:"project-name-text",children:a.eventName}),(0,d.jsx)("br",{}),a.editSlug?(0,d.jsx)("small",{children:(0,d.jsx)("a",{href:`/edit/${a.editSlug}`,className:"project-edit-link",title:`Edit ${a.eventName} statistics`,target:"_blank",rel:"noopener noreferrer",children:"\uD83D\uDCDD Edit Statistics"})}):(0,d.jsx)("small",{className:"no-edit-link",children:"Legacy Project - No Edit Link"})]}),(0,d.jsx)("td",{children:new Date(a.eventDate).toLocaleDateString()}),(0,d.jsx)("td",{className:"stat-number",children:b}),(0,d.jsx)("td",{className:"stat-number",children:c}),(0,d.jsx)("td",{className:"stat-number",children:e}),(0,d.jsxs)("td",{className:"actions-cell",children:[(0,d.jsx)("button",{className:"btn btn-sm btn-info",onClick:()=>{k(a),m(!0)},children:"\uD83D\uDCCA Stats"}),(0,d.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>(a=>{let b=a.stats,c=new Blob([[["Event Name",a.eventName],["Event Date",a.eventDate],["Generated",new Date().toLocaleString()],[""],["Category","Metric","Count"],["Images","Remote Images",b.remoteImages],["Images","Hostess Images",b.hostessImages],["Images","Selfies",b.selfies],["Images","Approved Images",b.approvedImages||0],["Images","Rejected Images",b.rejectedImages||0],["Fans","Indoor",b.indoor],["Fans","Outdoor",b.outdoor],["Fans","Stadium",b.stadium],["Gender","Female",b.female],["Gender","Male",b.male],["Age","Gen Alpha",b.genAlpha],["Age","Gen Y+Z",b.genYZ],["Age","Gen X",b.genX],["Age","Boomer",b.boomer],["Merchandise","Merched",b.merched],["Merchandise","Jersey",b.jersey],["Merchandise","Scarf",b.scarf],["Merchandise","Flags",b.flags],["Merchandise","Baseball Cap",b.baseballCap],["Merchandise","Other",b.other],["Success Manager","Event Attendees",b.eventAttendees||0],["Success Manager","Ticket Purchases",b.eventTicketPurchases||0],["Success Manager","QR Code Visits",b.visitQrCode||0],["Success Manager","Short URL Visits",b.visitShortUrl||0],["Success Manager","Web Visits",b.visitWeb||0],["Success Manager","Facebook Visits",b.visitFacebook||0],["Success Manager","Instagram Visits",b.visitInstagram||0],["Success Manager","YouTube Visits",b.visitYoutube||0],["Success Manager","TikTok Visits",b.visitTiktok||0],["Success Manager","X Visits",b.visitX||0],["Success Manager","Trustpilot Visits",b.visitTrustpilot||0]].map(a=>a.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");if(void 0!==d.download){let b=URL.createObjectURL(c);d.setAttribute("href",b),d.setAttribute("download",`${a.eventName.replace(/[^a-z0-9]/gi,"_")}_admin_export.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d)}})(a),children:"\uD83D\uDCC4 Export"}),(0,d.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>x(a._id),children:"\uD83D\uDDD1️ Delete"})]})]},a._id)})})]})})]}),l&&j&&(0,d.jsxs)("div",{className:"glass-card project-details",children:[(0,d.jsxs)("div",{className:"project-details-header",children:[(0,d.jsxs)("h2",{className:"section-title",children:[j.eventName," - Detailed Statistics"]}),(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>m(!1),children:"✕ Close"})]}),(0,d.jsxs)("div",{className:"project-stats-layout",children:[(0,d.jsxs)("div",{className:"stats-left-column",children:[(0,d.jsx)("h3",{className:"column-title",children:"Event Statistics"}),(0,d.jsxs)("div",{className:"stats-subsection",children:[(0,d.jsxs)("h4",{children:["Images (",j.stats.remoteImages+j.stats.hostessImages+j.stats.selfies,")"]}),(0,d.jsxs)("div",{className:"stats-breakdown",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Remote Images"}),(0,d.jsx)("span",{children:j.stats.remoteImages})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Hostess Images"}),(0,d.jsx)("span",{children:j.stats.hostessImages})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Selfies"}),(0,d.jsx)("span",{children:j.stats.selfies})]})]})]}),(0,d.jsxs)("div",{className:"stats-subsection",children:[(0,d.jsxs)("h4",{children:["Fans (",j.stats.indoor+j.stats.outdoor+j.stats.stadium,")"]}),(0,d.jsxs)("div",{className:"stats-breakdown",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Indoor"}),(0,d.jsx)("span",{children:j.stats.indoor})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Outdoor"}),(0,d.jsx)("span",{children:j.stats.outdoor})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Stadium"}),(0,d.jsx)("span",{children:j.stats.stadium})]})]})]}),(0,d.jsxs)("div",{className:"stats-subsection",children:[(0,d.jsxs)("h4",{children:["Gender (",j.stats.female+j.stats.male,")"]}),(0,d.jsxs)("div",{className:"stats-breakdown",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Female"}),(0,d.jsx)("span",{children:j.stats.female})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Male"}),(0,d.jsx)("span",{children:j.stats.male})]})]})]}),(0,d.jsxs)("div",{className:"stats-subsection",children:[(0,d.jsxs)("h4",{children:["Age (",j.stats.genAlpha+j.stats.genYZ+j.stats.genX+j.stats.boomer,")"]}),(0,d.jsxs)("div",{className:"stats-breakdown",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Gen Alpha"}),(0,d.jsx)("span",{children:j.stats.genAlpha})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Gen Y+Z"}),(0,d.jsx)("span",{children:j.stats.genYZ})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Gen X"}),(0,d.jsx)("span",{children:j.stats.genX})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Boomer"}),(0,d.jsx)("span",{children:j.stats.boomer})]})]})]}),(0,d.jsxs)("div",{className:"stats-subsection",children:[(0,d.jsxs)("h4",{children:["Merchandise (",j.stats.merched+j.stats.jersey+j.stats.scarf+j.stats.flags+j.stats.baseballCap+j.stats.other,")"]}),(0,d.jsxs)("div",{className:"stats-breakdown",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Merched"}),(0,d.jsx)("span",{children:j.stats.merched})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Jersey"}),(0,d.jsx)("span",{children:j.stats.jersey})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Scarf"}),(0,d.jsx)("span",{children:j.stats.scarf})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Flags"}),(0,d.jsx)("span",{children:j.stats.flags})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Baseball Cap"}),(0,d.jsx)("span",{children:j.stats.baseballCap})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Other"}),(0,d.jsx)("span",{children:j.stats.other})]})]})]}),(0,d.jsxs)("div",{className:"stats-subsection",children:[(0,d.jsx)("h4",{children:"Success Manager Statistics"}),(0,d.jsxs)("div",{className:"stats-breakdown",children:[(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Approved Images"}),(0,d.jsx)("span",{children:j.stats.approvedImages||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Rejected Images"}),(0,d.jsx)("span",{children:j.stats.rejectedImages||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Event Attendees"}),(0,d.jsx)("span",{children:j.stats.eventAttendees||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Ticket Purchases"}),(0,d.jsx)("span",{children:j.stats.eventTicketPurchases||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"QR Code Visits"}),(0,d.jsx)("span",{children:j.stats.visitQrCode||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Short URL Visits"}),(0,d.jsx)("span",{children:j.stats.visitShortUrl||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Web Visits"}),(0,d.jsx)("span",{children:j.stats.visitWeb||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Facebook Visits"}),(0,d.jsx)("span",{children:j.stats.visitFacebook||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Instagram Visits"}),(0,d.jsx)("span",{children:j.stats.visitInstagram||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"YouTube Visits"}),(0,d.jsx)("span",{children:j.stats.visitYoutube||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"TikTok Visits"}),(0,d.jsx)("span",{children:j.stats.visitTiktok||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"X Visits"}),(0,d.jsx)("span",{children:j.stats.visitX||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Trustpilot Visits"}),(0,d.jsx)("span",{children:j.stats.visitTrustpilot||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Event Result Home"}),(0,d.jsx)("span",{children:j.stats.eventResultHome||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Event Result Visitor"}),(0,d.jsx)("span",{children:j.stats.eventResultVisitor||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Value Proposition Visited"}),(0,d.jsx)("span",{children:j.stats.eventValuePropositionVisited||0})]}),(0,d.jsxs)("div",{className:"stat-item",children:[(0,d.jsx)("span",{children:"Value Proposition Purchases"}),(0,d.jsx)("span",{children:j.stats.eventValuePropositionPurchases||0})]})]})]})]}),(0,d.jsxs)("div",{className:"charts-right-column",children:[(0,d.jsx)("h3",{className:"column-title",children:"Data Visualization"}),(0,d.jsxs)("div",{className:"charts-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"2rem"},children:[(0,d.jsxs)("div",{className:"chart-container",ref:t,children:[(0,d.jsxs)("div",{className:"chart-header",children:[(0,d.jsx)("h4",{className:"chart-title",children:"Merchandise"}),(0,d.jsx)("div",{className:"chart-export-buttons",children:(0,d.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>z(t,`${j?.eventName||"event"}_merchandise`),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,d.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!j)return null;let a=[{label:"Merched",value:j.stats.merched,color:"#4a90e2"},{label:"Jersey",value:j.stats.jersey,color:"#7b68ee"},{label:"Scarf",value:j.stats.scarf,color:"#ff6b9d"},{label:"Flags",value:j.stats.flags,color:"#ffa726"},{label:"Baseball Cap",value:j.stats.baseballCap,color:"#66bb6a"},{label:"Other",value:j.stats.other,color:"#ef5350"}],b=Math.max(...a.map(a=>a.value),1);return a.map((a,c)=>(0,d.jsxs)("div",{className:"horizontal-bar-item","data-testid":`merch-bar-${c}`,children:[(0,d.jsx)("div",{className:"horizontal-bar-label",children:a.label}),(0,d.jsx)("div",{className:"horizontal-bar-container",children:(0,d.jsx)("div",{className:"horizontal-bar-fill",style:{width:`${a.value/b*100}%`,backgroundColor:a.color},children:(0,d.jsx)("span",{className:"horizontal-bar-value",children:a.value})})})]},a.label))})()})]}),(0,d.jsxs)("div",{className:"chart-container",ref:u,children:[(0,d.jsxs)("div",{className:"chart-header",children:[(0,d.jsx)("h4",{className:"chart-title",children:"Engagement"}),(0,d.jsx)("div",{className:"chart-export-buttons",children:(0,d.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>z(u,`${j?.eventName||"event"}_engagement`),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,d.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!j)return null;let a=j.stats.indoor+j.stats.outdoor+j.stats.stadium,b=j.stats.eventAttendees||0,c=j.stats.remoteImages+j.stats.hostessImages+j.stats.selfies,e=(j.stats.visitFacebook||0)+(j.stats.visitInstagram||0)+(j.stats.visitYoutube||0)+(j.stats.visitTiktok||0)+(j.stats.visitX||0)+(j.stats.visitTrustpilot||0),f=(j.stats.eventValuePropositionVisited||0)+(j.stats.eventValuePropositionPurchases||0),g=b>0?a/b*100:0,h=c>0?(e+f)/c*100:0,i=[{label:`Fan Engagement (${g.toFixed(1)}%)`,value:g,color:"#8b5cf6"},{label:`Fan Interaction (${h.toFixed(1)}%)`,value:h,color:"#f59e0b"}];if(0===b&&0===c)return(0,d.jsx)("div",{className:"no-data-message",children:"No engagement data available"});let k=Math.max(...i.map(a=>a.value),100);return(0,d.jsx)("div",{className:"horizontal-bars-container",children:i.map((a,b)=>(0,d.jsxs)("div",{className:"horizontal-bar-item","data-testid":`engagement-bar-${b}`,children:[(0,d.jsx)("div",{className:"horizontal-bar-label",children:a.label}),(0,d.jsx)("div",{className:"horizontal-bar-container",children:(0,d.jsx)("div",{className:"horizontal-bar-fill",style:{width:`${a.value/k*100}%`,backgroundColor:a.color},children:(0,d.jsxs)("span",{className:"horizontal-bar-value",children:[a.value.toFixed(1),"%"]})})})]},a.label))})})()})]}),(0,d.jsxs)("div",{className:"chart-container",ref:v,children:[(0,d.jsxs)("div",{className:"chart-header",children:[(0,d.jsx)("h4",{className:"chart-title",children:"Value"}),(0,d.jsx)("div",{className:"chart-export-buttons",children:(0,d.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>z(v,`${j?.eventName||"event"}_value`),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,d.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!j)return null;let a=j.stats.remoteImages+j.stats.hostessImages+j.stats.selfies,b=j.stats.indoor+j.stats.outdoor+j.stats.stadium,c=j.stats.genAlpha+j.stats.genYZ,e=(j.stats.visitQrCode||0)+(j.stats.visitShortUrl||0)+(j.stats.visitWeb||0)+(j.stats.visitFacebook||0)+(j.stats.visitInstagram||0)+(j.stats.visitYoutube||0)+(j.stats.visitTiktok||0)+(j.stats.visitX||0)+(j.stats.visitTrustpilot||0),f=15*(j.stats.eventValuePropositionVisited||0),g=5*a,h=3*b,i=4*c,k=+e,l=[{label:"CPM",value:f,color:"#3b82f6"},{label:"eDM",value:g,color:"#10b981"},{label:"Ads",value:h,color:"#f59e0b"},{label:"U40 Eng.",value:i,color:"#8b5cf6"},{label:"Branding",value:k,color:"#ef4444"}],m=f+g+h+i+k;if(0===m)return(0,d.jsx)("div",{className:"no-data-message",children:"No value data available"});let n=Math.max(...l.map(a=>a.value),1);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem",padding:"1rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,d.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:["€",m.toLocaleString()]}),(0,d.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Advertisement Value"})]}),(0,d.jsx)("div",{className:"horizontal-bars-container",children:l.map((a,b)=>(0,d.jsxs)("div",{className:"horizontal-bar-item","data-testid":`value-bar-${b}`,children:[(0,d.jsx)("div",{className:"horizontal-bar-label",children:a.label}),(0,d.jsx)("div",{className:"horizontal-bar-container",children:(0,d.jsx)("div",{className:"horizontal-bar-fill",style:{width:`${a.value/n*100}%`,backgroundColor:a.color},children:(0,d.jsxs)("span",{className:"horizontal-bar-value",children:["€",a.value.toLocaleString()]})})})]},a.label))})]})})()})]})]}),(0,d.jsx)("div",{className:"charts-row",style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:(0,d.jsxs)("div",{className:"chart-container",ref:w,children:[(0,d.jsxs)("div",{className:"chart-header",children:[(0,d.jsx)("h4",{className:"chart-title",children:"Visitor Sources"}),(0,d.jsx)("div",{className:"chart-export-buttons",children:(0,d.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>z(w,`${j?.eventName||"event"}_visitor_sources`),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,d.jsx)("div",{className:"pie-chart-container",children:(0,d.jsx)("div",{className:"pie-chart","data-testid":"visitor-sources-pie-chart",children:(()=>{if(!j)return null;let a=[{label:"QR Code",value:j.stats.visitQrCode||0,color:"#3b82f6"},{label:"Short URL",value:j.stats.visitShortUrl||0,color:"#10b981"},{label:"Web",value:j.stats.visitWeb||0,color:"#f59e0b"},{label:"Facebook",value:j.stats.visitFacebook||0,color:"#1877f2"},{label:"Instagram",value:j.stats.visitInstagram||0,color:"#e4405f"},{label:"YouTube",value:j.stats.visitYoutube||0,color:"#ff0000"},{label:"TikTok",value:j.stats.visitTiktok||0,color:"#000000"},{label:"X (Twitter)",value:j.stats.visitX||0,color:"#1da1f2"},{label:"Trustpilot",value:j.stats.visitTrustpilot||0,color:"#00b67a"}],b=a.reduce((a,b)=>a+b.value,0);if(0===b)return(0,d.jsx)("div",{className:"no-data-message",children:"No visitor data available"});let c=0,e=a.filter(a=>a.value>0).map((a,e)=>{let f=a.value/b*100,g=a.value/b*360,h=c,i=c+g;c+=g;let j=90+80*Math.cos((h-90)*Math.PI/180),k=90+80*Math.sin((h-90)*Math.PI/180),l=90+80*Math.cos((i-90)*Math.PI/180),m=90+80*Math.sin((i-90)*Math.PI/180),n=`M 90 90 L ${j} ${k} A 80 80 0 ${+(g>180)} 1 ${l} ${m} Z`;return(0,d.jsx)("g",{children:(0,d.jsx)("path",{d:n,fill:a.color,stroke:"white",strokeWidth:"2",children:(0,d.jsx)("title",{children:`${a.label}: ${a.value} (${f.toFixed(1)}%)`})})},a.label)}),f=a.filter(a=>a.value>0).map((a,c)=>{let e=(a.value/b*100).toFixed(1);return(0,d.jsxs)("div",{className:"legend-item",children:[(0,d.jsx)("div",{className:"legend-color",style:{backgroundColor:a.color}}),(0,d.jsxs)("span",{children:[a.label,": ",a.value," (",e,"%)"]})]},a.label)});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"pie-chart-container",children:(0,d.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[e,(0,d.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,d.jsx)("text",{x:"90",y:"98",textAnchor:"middle",className:"chart-emoji",fontSize:"28",fill:"#1a202c",children:"\uD83C\uDF10"})]})}),(0,d.jsx)("div",{className:"chart-legend",children:f})]})})()})})]})})]})]})]}),n&&(0,d.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:(0,d.jsxs)("div",{className:"glass-card",style:{width:"100%",maxWidth:"500px",padding:"2rem"},children:[(0,d.jsxs)("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[(0,d.jsx)("h3",{className:"title",style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Create New Project"}),(0,d.jsx)("p",{className:"subtitle",style:{marginBottom:"0",fontSize:"1rem"},children:"Add a new event to track statistics"})]}),(0,d.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Event Name"}),(0,d.jsx)("input",{type:"text",className:"form-input",value:p.eventName,onChange:a=>q(b=>({...b,eventName:a.target.value})),placeholder:"Enter event name",disabled:r,autoFocus:!0,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{className:"form-label",children:"Event Date"}),(0,d.jsx)("input",{type:"date",className:"form-input",value:p.eventDate,onChange:a=>q(b=>({...b,eventDate:a.target.value})),disabled:r,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,d.jsx)("div",{style:{padding:"1rem",background:"rgba(102, 126, 234, 0.1)",borderRadius:"12px",border:"1px solid rgba(102, 126, 234, 0.2)",marginBottom:"0"},children:(0,d.jsx)("p",{style:{color:"#4a5568",fontSize:"0.9rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:"\uD83D\uDCDD All statistics will be initialized to 0. You can edit them after creation using the provided edit link."})})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,d.jsx)("button",{className:"btn btn-secondary",onClick:()=>{o(!1),q({eventName:"",eventDate:""})},disabled:r,style:{flex:"1"},children:"Cancel"}),(0,d.jsx)("button",{className:"btn btn-primary",onClick:y,disabled:r||!p.eventName.trim()||!p.eventDate,style:{flex:"1"},children:r?"Creating...":"Create Project"})]})]})})]})}},4579:(a,b,c)=>{Promise.resolve().then(c.bind(c,4344))},5041:(a,b,c)=>{"use strict";c.r(b),c.d(b,{"00e4632fe23665b3312a2e98a7b9f8cdbee7780e06":()=>d.$$RSC_SERVER_ACTION_0});var d=c(9441)},5693:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>C.a,__next_app__:()=>I,handler:()=>K,pages:()=>H,routeModule:()=>J,tree:()=>G});var d=c(5239),e=c(8088),f=c(7220),g=c(1289),h=c(6191),i=c(4823),j=c(1998),k=c(2603),l=c(4649),m=c(2781),n=c(2602),o=c(1268),p=c(4853),q=c(261),r=c(5052),s=c(9977),t=c(6713),u=c(3365),v=c(1454),w=c(7778),x=c(6143),y=c(9105),z=c(8171),A=c(6439),B=c(6133),C=c.n(B),D=c(893),E=c(2836),F={};for(let a in D)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(F[a]=()=>D[a]);c.d(b,F);let G={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,9441)),"/Users/moldovan/Library/Mobile Documents/com~apple~CloudDocs/Projects/messmass/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,8014)),"/Users/moldovan/Library/Mobile Documents/com~apple~CloudDocs/Projects/messmass/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,6133,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,849,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,9868,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,9615,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,H=["/Users/moldovan/Library/Mobile Documents/com~apple~CloudDocs/Projects/messmass/app/admin/page.tsx"],I={require:c,loadChunk:()=>Promise.resolve()},J=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:G},distDir:".next",projectDir:""});async function K(a,b,c){var d;let B="/admin/page";"/index"===B&&(B="/");let F="false",L=(0,h.getRequestMeta)(a,"postponed"),M=(0,h.getRequestMeta)(a,"minimalMode"),N=await J.prepare(a,b,{srcPage:B,multiZoneDraftMode:F});if(!N)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:O,query:P,params:Q,parsedUrl:R,pageIsDynamic:S,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,serverActionsManifest:W,clientReferenceManifest:X,subresourceIntegrityManifest:Y,prerenderManifest:Z,isDraftMode:$,resolvedPathname:_,revalidateOnlyGenerated:aa,routerServerContext:ab,nextConfig:ac}=N,ad=R.pathname||"/",ae=(0,q.normalizeAppPath)(B),{isOnDemandRevalidate:af}=N,ag=Z.dynamicRoutes[ae],ah=Z.routes[_],ai=!!(ag||ah||Z.routes[ae]),aj=a.headers["user-agent"]||"",ak=(0,t.getBotType)(aj),al=(0,o.isHtmlBotRequest)(a),am=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??!!a.headers[s.NEXT_ROUTER_PREFETCH_HEADER],an=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[s.RSC_HEADER],ao=(0,r.getIsPossibleServerAction)(a),ap=(0,l.checkIsAppPPREnabled)(ac.experimental.ppr)&&(null==(d=Z.routes[ae]??Z.dynamicRoutes[ae])?void 0:d.renderingMode)==="PARTIALLY_STATIC",aq=!1,ar=!1,as=ap?L:void 0,at=ap&&an&&!am,au=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),av=!aj||(0,o.shouldServeStreamingMetadata)(aj,ac.htmlLimitedBots);al&&ap&&(ai=!1,av=!1);let aw=!0===J.isDev||!ai||"string"==typeof L||at,ax=al&&ap,ay=null;$||!ai||aw||ao||as||at||(ay=_);let az=ay;!az&&J.isDev&&(az=_);let aA={...D,tree:G,pages:H,GlobalError:C(),handler:K,routeModule:J,__next_app__:I};W&&X&&(0,n.setReferenceManifestsSingleton)({page:B,clientReferenceManifest:X,serverActionsManifest:W,serverModuleMap:(0,p.createServerModuleMap)({serverActionsManifest:W})});let aB=a.method||"GET",aC=(0,g.getTracer)(),aD=aC.getActiveScopeSpan();try{let d=async(c,d)=>{let e=new k.NodeNextRequest(a),f=new k.NodeNextResponse(b);return J.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aC.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aB} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aB} ${a.url}`)})},f=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:P,params:Q,page:ae,sharedContext:{buildId:O},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aA,Component:(0,j.T)(aA),params:Q,routeModule:J,page:B,postponed:f,shouldWaitOnAllReady:ax,serveStreamingMetadata:av,supportsDynamicResponse:"string"==typeof f||aw,buildManifest:T,nextFontManifest:U,reactLoadableManifest:V,subresourceIntegrityManifest:Y,serverActionsManifest:W,clientReferenceManifest:X,setIsrStatus:null==ab?void 0:ab.setIsrStatus,dir:J.projectDir,isDraftMode:$,isRevalidate:ai&&!f&&!at,botType:ak,isOnDemandRevalidate:af,isPossibleServerAction:ao,assetPrefix:ac.assetPrefix,nextConfigOutput:ac.output,crossOrigin:ac.crossOrigin,trailingSlash:ac.trailingSlash,previewProps:Z.preview,deploymentId:ac.deploymentId,enableTainting:ac.experimental.taint,htmlLimitedBots:ac.htmlLimitedBots,devtoolSegmentExplorer:ac.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ac.reactMaxHeadersLength,multiZoneDraftMode:F,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ac.experimental.cacheLife,basePath:ac.basePath,serverActions:ac.experimental.serverActions,...aq?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:aq}:{},experimental:{isRoutePPREnabled:ap,expireTime:ac.expireTime,staleTimes:ac.experimental.staleTimes,dynamicIO:!!ac.experimental.dynamicIO,clientSegmentCache:!!ac.experimental.clientSegmentCache,dynamicOnHover:!!ac.experimental.dynamicOnHover,inlineCss:!!ac.experimental.inlineCss,authInterrupts:!!ac.experimental.authInterrupts,clientTraceMetadata:ac.experimental.clientTraceMetadata||[]},waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>J.onRequestError(a,b,d,ab),err:(0,h.getRequestMeta)(a,"invokeError"),dev:J.isDev}},k=await d(e,i),{metadata:l}=k,{cacheControl:m,headers:n={},fetchTags:o}=l;if(o&&(n[x.NEXT_CACHE_TAGS_HEADER]=o),a.fetchMetrics=l.fetchMetrics,ai&&(null==m?void 0:m.revalidate)===0&&!J.isDev&&!ap){let a=l.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${_}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:u.CachedRouteKind.APP_PAGE,html:k,headers:n,rscData:l.flightData,postponed:l.postponed,status:l.statusCode,segmentData:l.segmentData},cacheControl:m}},l=async({hasResolved:d,previousCacheEntry:g,isRevalidating:i,span:j})=>{let k,l=!1===J.isDev,n=d||b.writableEnded;if(af&&aa&&!g&&!M)return(null==ab?void 0:ab.render404)?await ab.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ag&&(k=(0,v.parseFallbackField)(ag.fallback)),k===v.FallbackMode.PRERENDER&&(0,t.isBot)(aj)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),(null==g?void 0:g.isStale)===-1&&(af=!0),af&&(k!==v.FallbackMode.NOT_FOUND||g)&&(k=v.FallbackMode.BLOCKING_STATIC_RENDER),!M&&k!==v.FallbackMode.BLOCKING_STATIC_RENDER&&az&&!n&&!$&&S&&(l||!ah)){let b;if((l||ag)&&k===v.FallbackMode.NOT_FOUND)throw new A.NoFallbackError;if(ap&&!an){if(b=await J.handleResponse({cacheKey:l?ae:null,req:a,nextConfig:ac,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:Z,isRoutePPREnabled:ap,responseGenerator:async()=>f({span:j,postponed:void 0,fallbackRouteParams:l||ar?(0,m.u)(ae):null}),waitUntil:c.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=af||i||!as?void 0:as;if(aq&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:u.CachedRouteKind.PAGES,html:w.default.fromStatic(""),pageData:{},headers:void 0,status:void 0}};let p=S&&ap&&((0,h.getRequestMeta)(a,"renderFallbackShell")||ar)?(0,m.u)(ad):null;return f({span:j,postponed:o,fallbackRouteParams:p})},n=async d=>{var g,i,j,k,m;let n,o=await J.handleResponse({cacheKey:ay,responseGenerator:a=>l({span:d,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:af,isRoutePPREnabled:ap,req:a,nextConfig:ac,prerenderManifest:Z,waitUntil:c.waitUntil});if($&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),J.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!o){if(ay)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(g=o.value)?void 0:g.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(j=o.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof o.value.postponed;ai&&!at&&(!p||am)&&(M||b.setHeader("x-nextjs-cache",af?"REVALIDATED":o.isMiss?"MISS":o.isStale?"STALE":"HIT"),b.setHeader(s.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=o;if(as)n={revalidate:0,expire:void 0};else if(M&&an&&!am&&ap)n={revalidate:0,expire:void 0};else if(!J.isDev)if($)n={revalidate:0,expire:void 0};else if(ai){if(o.cacheControl)if("number"==typeof o.cacheControl.revalidate){if(o.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${o.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});n={revalidate:o.cacheControl.revalidate,expire:(null==(k=o.cacheControl)?void 0:k.expire)??ac.expireTime}}else n={revalidate:x.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(n={revalidate:0,expire:void 0});if(o.cacheControl=n,"string"==typeof au&&(null==q?void 0:q.kind)===u.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(m=q.headers)?void 0:m[x.NEXT_CACHE_TAGS_HEADER];M&&ai&&c&&"string"==typeof c&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(au);return void 0!==d?(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(d),cacheControl:o.cacheControl}):(b.statusCode=204,(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(""),cacheControl:o.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...o,value:{...o.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&as)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(M&&ai||delete a[x.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let t=null==(i=q.headers)?void 0:i[x.NEXT_CACHE_TAGS_HEADER];if(M&&ai&&t&&"string"==typeof t&&b.setHeader(x.NEXT_CACHE_TAGS_HEADER,t),!q.status||an&&ap||(b.statusCode=q.status),!M&&q.status&&E.RedirectStatusCode[q.status]&&an&&(b.statusCode=200),p&&b.setHeader(s.NEXT_DID_POSTPONE_HEADER,"1"),an&&!$){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:q.html,cacheControl:at?{revalidate:0,expire:void 0}:o.cacheControl})}return(0,z.sendRenderResult)({req:a,res:b,type:"rsc",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:w.default.fromStatic(q.rscData),cacheControl:o.cacheControl})}let v=q.html;if(!p||M)return(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:o.cacheControl});if(aq)return v.chain(new ReadableStream({start(a){a.enqueue(y.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}});let A=new TransformStream;return v.chain(A.readable),f({span:d,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==u.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(A.writable)}).catch(a=>{A.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,z.sendRenderResult)({req:a,res:b,type:"html",generateEtags:ac.generateEtags,poweredByHeader:ac.poweredByHeader,result:v,cacheControl:{revalidate:0,expire:void 0}})};if(!aD)return await aC.withPropagatedContext(a.headers,()=>aC.trace(i.BaseServerSpan.handleRequest,{spanName:`${aB} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aB,"http.target":a.url}},n));await n(aD)}catch(b){throw aD||b instanceof A.NoFallbackError||await J.onRequestError(a,b,{routerKind:"App Router",routePath:B,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ai,isOnDemandRevalidate:af})},ab),b}}},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},7218:(a,b,c)=>{"use strict";Object.defineProperty(b,"A",{enumerable:!0,get:function(){return d.registerServerReference}});let d=c(1369)},7538:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(1369).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/moldovan/Library/Mobile Documents/com~apple~CloudDocs/Projects/messmass/components/AdminDashboard.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/moldovan/Library/Mobile Documents/com~apple~CloudDocs/Projects/messmass/components/AdminDashboard.tsx","default")},7787:(a,b,c)=>{Promise.resolve().then(c.bind(c,7538))},8354:a=>{"use strict";a.exports=require("util")},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9130:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{decryptActionBoundArgs:function(){return q},encryptActionBoundArgs:function(){return p}}),c(4822);let d=c(1369),e=c(5624),f=c(7855),g=c(2602),h=c(3033),i=c(4971),j=function(a){return a&&a.__esModule?a:{default:a}}(c(1120)),k=new TextEncoder,l=new TextDecoder;async function m(a,b){let c=await (0,g.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=atob(b),e=d.slice(0,16),f=d.slice(16),h=l.decode(await (0,g.decrypt)(c,(0,g.stringToUint8Array)(e),(0,g.stringToUint8Array)(f)));if(!h.startsWith(a))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return h.slice(a.length)}async function n(a,b){let c=await (0,g.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=new Uint8Array(16);h.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(d));let e=(0,g.arrayBufferToString)(d.buffer),f=await (0,g.encrypt)(c,d,k.encode(a+b));return btoa(e+(0,g.arrayBufferToString)(f))}var o=function(a){return a[a.Ready=0]="Ready",a[a.Pending=1]="Pending",a[a.Complete=2]="Complete",a}(o||{});let p=j.default.cache(async function a(b,...c){let e=h.workUnitAsyncStorage.getStore(),j=(null==e?void 0:e.type)==="prerender"?e.cacheSignal:void 0,{clientModules:k}=(0,g.getClientReferenceManifestForRsc)(),l=Error();Error.captureStackTrace(l,a);let m=!1,o=(null==e?void 0:e.type)==="prerender"?(0,i.createHangingInputAbortSignal)(e):void 0,p=0;function q(){0===p&&(p=1,null==j||j.beginRead())}function r(){1===p&&(null==j||j.endRead()),p=2}o&&j&&o.addEventListener("abort",q,{once:!0});let s=await (0,f.streamToString)((0,d.renderToReadableStream)(c,k,{filterStackFrame:void 0,signal:o,onError(a){(null==o||!o.aborted)&&(m||(m=!0,l.message=a instanceof Error?a.message:String(a)))}}),o);if(m)throw r(),l;if(!e)return n(b,s);q();let t=(0,h.getPrerenderResumeDataCache)(e),u=(0,h.getRenderResumeDataCache)(e),v=b+s,w=(null==t?void 0:t.encryptedBoundArgs.get(v))??(null==u?void 0:u.encryptedBoundArgs.get(v));if(w)return w;let x=await n(b,s);return r(),null==t||t.encryptedBoundArgs.set(v,x),x});async function q(a,b){let c,d=await b,f=h.workUnitAsyncStorage.getStore();if(f){let b="prerender"===f.type?f.cacheSignal:void 0,e=(0,h.getPrerenderResumeDataCache)(f),g=(0,h.getRenderResumeDataCache)(f);(c=(null==e?void 0:e.decryptedBoundArgs.get(d))??(null==g?void 0:g.decryptedBoundArgs.get(d)))||(null==b||b.beginRead(),c=await m(a,d),null==b||b.endRead(),null==e||e.decryptedBoundArgs.set(d,c))}else c=await m(a,d);let{edgeRscModuleMapping:i,rscModuleMapping:j}=(0,g.getClientReferenceManifestForRsc)();return await (0,e.createFromReadableStream)(new ReadableStream({start(a){a.enqueue(k.encode(c)),(null==f?void 0:f.type)==="prerender"?f.renderSignal.aborted?a.close():f.renderSignal.addEventListener("abort",()=>a.close(),{once:!0}):a.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:j,serverModuleMap:(0,g.getServerModuleMap)()}})}},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9441:(a,b,c)=>{"use strict";c.r(b),c.d(b,{$$RSC_SERVER_ACTION_0:()=>i,default:()=>j});var d=c(7413),e=c(7218);c(9130);var f=c(1098),g=c(9916),h=c(7538);let i=async function(){try{let{cookies:a}=await Promise.resolve().then(c.bind(c,4999));(await a()).delete("admin-session")}catch(a){console.error("Logout error:",a)}(0,g.redirect)("/admin/login")};async function j(){let a=await (0,f.jd)();a||(0,g.redirect)("/admin/login");let b=await (0,f._m)("manage-users"),c=await (0,f._m)("delete");return(0,d.jsxs)("div",{className:"admin-container",children:[(0,d.jsx)("div",{className:"glass-card admin-header",children:(0,d.jsxs)("div",{className:"admin-header-content",children:[(0,d.jsxs)("div",{className:"admin-branding",children:[(0,d.jsx)("h1",{className:"admin-title",children:"MessMass Admin"}),(0,d.jsx)("p",{className:"admin-subtitle",children:"Event Statistics Management"})]}),(0,d.jsxs)("div",{className:"admin-user-info",children:[(0,d.jsxs)("div",{className:"admin-badge",children:[(0,d.jsx)("p",{className:"admin-role",children:a.name}),(0,d.jsx)("p",{className:"admin-level",children:a.role}),(0,d.jsx)("p",{className:"admin-status",children:"✓ Authenticated"})]}),(0,d.jsx)("form",{action:i,children:(0,d.jsx)("button",{type:"submit",className:"btn btn-logout",children:"Logout"})})]})]})}),(0,d.jsx)(h.default,{user:a,permissions:{canManageUsers:b,canDelete:c,canRead:!0,canWrite:await (0,f._m)("write")}})]})}(0,e.A)(i,"00e4632fe23665b3312a2e98a7b9f8cdbee7780e06",null)}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[985,352,999,510],()=>b(b.s=5693));module.exports=c})();