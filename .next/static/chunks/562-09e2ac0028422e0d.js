(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[562],{535:()=>{},1918:(t,e,a)=>{"use strict";a.d(e,{IZ:()=>s,bM:()=>c});var l=a(374);function s(t,e){console.log("\uD83E\uDDEE calculateActiveCharts called with:",{configurationsCount:t.length,statsKeys:Object.keys(e),configurations:t.map(t=>({id:t.chartId,title:t.title,active:void 0!==t.active?t.active:t.isActive}))});let a=t.filter(t=>void 0===t.active&&void 0===t.isActive||!0===t.active||!0===t.isActive);return console.log("\uD83E\uDDEE Calculating ".concat(a.length," active charts (").concat(t.length-a.length," inactive)")),console.log("Active configurations:",a.map(t=>t.title)),console.log("\uD83E\uDDEE Batch calculating ".concat(a.length," charts...")),a.map(t=>(function(t,e){let a;console.log("\uD83E\uDDEE Calculating chart: ".concat(t.title," (").concat(t.type,")")),console.log("Configuration elements:",t.elements),console.log("Available stats:",Object.keys(e));let s=!1,c=t.elements.map(t=>{try{console.log("Evaluating element: ".concat(t.label," with formula: ").concat(t.formula));let a=(0,l.w9)(t.formula,e);return console.log("Result for ".concat(t.label,": ").concat(a)),"NA"===a&&(s=!0,console.warn('⚠️ Formula evaluation returned NA for element "'.concat(t.label,'": ').concat(t.formula))),{id:t.id,label:t.label,value:a,color:t.color}}catch(e){return s=!0,console.error('❌ Error evaluating formula for element "'.concat(t.label,'":'),e),e instanceof Error&&console.error("Error details:",e.message,e.stack),{id:t.id,label:t.label,value:"NA",color:t.color}}});if("bar"===t.type&&t.showTotal)try{let t=c.map(t=>t.value).filter(t=>"number"==typeof t);0===t.length?(a="NA",s=!0):t.length<c.length?(a=t.reduce((t,e)=>t+e,0),s=!0):a=t.reduce((t,e)=>t+e,0)}catch(e){a="NA",s=!0,console.error('❌ Error calculating total for chart "'.concat(t.title,'":'),e)}if("engagement"===t.chartId&&t.showTotal)try{let t=e.indoor+e.outdoor+e.stadium,l=e.merched,c=e.eventAttendees||0;t>0&&c>0?a=Math.round(l/t*c):(a="NA",s=!0)}catch(t){a="NA",s=!0,console.error("❌ Error calculating Core Fan Team:",t)}if("merchandise"===t.chartId&&t.showTotal)try{let t=e.indoor+e.outdoor+e.stadium,l=e.merched;t>=l?a=(t-l)*10:(a="NA",s=!0)}catch(t){a="NA",s=!0,console.error("❌ Error calculating potential merchandise sales:",t)}return console.log("✅ Chart calculation complete: ".concat(c.length," elements, ").concat(s?"with":"without"," errors")),{chartId:t.chartId,title:t.title,type:t.type,emoji:t.emoji,subtitle:t.subtitle,totalLabel:t.totalLabel,elements:c,total:a,hasErrors:s}})(t,e))}function c(t){var e;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("NA"===t)return a.showNA||"N/A";let l=null!=(e=a.decimals)?e:0;switch(a.type){case"currency":return"€".concat(t.toLocaleString(void 0,{minimumFractionDigits:l,maximumFractionDigits:l}));case"percentage":return"".concat(t.toFixed(l),"%");default:return t.toLocaleString(void 0,{minimumFractionDigits:l,maximumFractionDigits:l})}}},3003:t=>{t.exports={container:"stats_container__6Qj_G",header:"stats_header__D02pP",title:"stats_title__dICf0",subtitle:"stats_subtitle__06tKS",meta:"stats_meta__KJ7Ie",statsGrid:"stats_statsGrid__XC2zd",section:"stats_section___97hA",sectionTitle:"stats_sectionTitle__pwUk7",statsRow:"stats_statsRow__W8z4M",ageGrid:"stats_ageGrid__zG84Z",statCard:"stats_statCard__1knnv",calculatedCard:"stats_calculatedCard__8eEj1",statLabel:"stats_statLabel__0ppCb",statValue:"stats_statValue__xU62i",loading:"stats_loading__BYA9u",spinner:"stats_spinner__7iBFe",spin:"stats_spin__UWbii",error:"stats_error__HceYC","charts-section":"stats_charts-section__Ra1Hz","section-title":"stats_section-title__pVs1T","charts-grid":"stats_charts-grid__6g_0W","chart-item":"stats_chart-item__IASHu",footer:"stats_footer__KrWrI"}},5695:(t,e,a)=>{"use strict";var l=a(8999);a.o(l,"useParams")&&a.d(e,{useParams:function(){return l.useParams}}),a.o(l,"useRouter")&&a.d(e,{useRouter:function(){return l.useRouter}})},6994:(t,e,a)=>{"use strict";a.d(e,{AQ:()=>r,at:()=>i});var l=a(5155),s=a(2115),c=a(1918);let r=t=>{let{result:e,className:a=""}=t;if(!e||!e.elements||0===e.elements.length)return(0,l.jsx)("div",{className:"no-data-message ".concat(a),children:(0,l.jsxs)("p",{children:["No data available for ",(null==e?void 0:e.title)||"this chart"]})});let s=e.elements.filter(t=>"number"==typeof t.value),c=s.reduce((t,e)=>t+e.value,0);return 0===s.length||0===c?(0,l.jsx)("div",{className:"no-data-message ".concat(a),children:(0,l.jsxs)("p",{children:["No data available for ",e.title]})}):"pie"===e.type?(0,l.jsx)(o,{result:e,validElements:s,totalValue:c,className:a}):"bar"===e.type?(0,l.jsx)(n,{result:e,className:a}):(0,l.jsx)("div",{className:"chart-error ".concat(a),children:(0,l.jsxs)("p",{children:["Unsupported chart type: ",e.type]})})},o=t=>{let{result:e,validElements:a,totalValue:s,className:r}=t,o=0,n=a.map(t=>{let e=t.value/s*100,a=t.value/s*360,r=o,n=o+a;o+=a;let i=90+80*Math.cos((r-90)*Math.PI/180),d=90+80*Math.sin((r-90)*Math.PI/180),h=90+80*Math.cos((n-90)*Math.PI/180),u=90+80*Math.sin((n-90)*Math.PI/180),m=["M ".concat(90," ").concat(90),"L ".concat(i," ").concat(d),"A ".concat(80," ").concat(80," 0 ").concat(+(a>180)," 1 ").concat(h," ").concat(u),"Z"].join(" ");return(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:m,fill:t.color,stroke:"white",strokeWidth:"2",children:(0,l.jsx)("title",{children:"".concat(t.label,": ").concat((0,c.bM)(t.value)," (").concat(e.toFixed(1),"%)")})})},t.id)}),i=a.map(t=>{let e=(t.value/s*100).toFixed(1);return(0,l.jsxs)("div",{className:"legend-item",children:[(0,l.jsx)("div",{className:"legend-color",style:{backgroundColor:t.color}}),(0,l.jsxs)("span",{children:[t.label,": ",(0,c.bM)(t.value)," (",e,"%)"]})]},t.id)});return(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)("div",{className:"pie-chart-container",children:(0,l.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[n,(0,l.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,l.jsx)("text",{x:"90",y:"98",textAnchor:"middle",className:"chart-emoji",fontSize:"36",fill:"#1a202c",children:e.emoji||"\uD83D\uDCCA"})]})}),(0,l.jsx)("div",{className:"chart-legend",children:i}),void 0!==e.total&&(0,l.jsx)("div",{className:"chart-total",children:(0,l.jsxs)("strong",{children:["Total: ",(0,c.bM)(e.total)]})})]})},n=t=>{let{result:e,className:a}=t,s=e.elements.filter(t=>"number"==typeof t.value),r=Math.max(...s.map(t=>t.value));if(0===s.length||0===r)return(0,l.jsx)("div",{className:"no-data-message ".concat(a),children:(0,l.jsxs)("p",{children:["No data available for ",e.title]})});let o=e.elements.map(t=>{let e=t.value,a="number"==typeof e;return(0,l.jsx)("div",{className:"legend-text-row",children:(0,l.jsxs)("span",{children:[t.label,": ",a?(0,c.bM)(e):"N/A"]})},t.id)}),n=e.elements.map(t=>{let e=t.value;return(0,l.jsx)("div",{className:"bar-only-row",children:(0,l.jsx)("div",{className:"bar-container",children:(0,l.jsx)("div",{className:"bar-fill",style:{width:"".concat("number"==typeof e?e/r*100:0,"%"),"--bar-color":t.color}})})},t.id)});return(0,l.jsxs)("div",{className:a,children:[void 0!==e.total&&(0,l.jsxs)("div",{className:"chart-total-top",children:[(0,l.jsx)("div",{className:"chart-total-value",children:(t=>"NA"===t?"N/A":t>1e3?"€".concat(t.toLocaleString()):t.toString())(e.total)}),(0,l.jsx)("div",{className:"chart-total-label",children:e.totalLabel||"Total"})]}),(0,l.jsxs)("div",{className:"bar-chart-two-columns",children:[(0,l.jsx)("div",{className:"legends-column",children:o}),(0,l.jsx)("div",{className:"bars-column",children:n})]})]})},i=t=>{let{title:e,subtitle:c,emoji:r,children:o,className:n=""}=t,i=(0,s.useRef)(null),d=async()=>{if(i.current)try{let t=(await a.e(316).then(a.t.bind(a,2699,23))).default;await new Promise(t=>setTimeout(t,100));let l=await t(i.current,{logging:!1}),s=document.createElement("a"),c=e.replace(/[^a-z0-9]/gi,"_").toLowerCase();s.download="chart_".concat(c,".png"),s.href=l.toDataURL("image/png",1),document.body.appendChild(s),s.click(),document.body.removeChild(s),console.log("Chart downloaded successfully!")}catch(t){console.error("Failed to export chart as PNG:",t),alert("Failed to export chart. Please try again.")}};return(0,l.jsxs)("div",{className:"chart-container ".concat(n),ref:i,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h3",{className:"chart-title",children:e}),c&&(0,l.jsx)("p",{className:"chart-subtitle",children:c}),(0,l.jsx)("button",{className:"btn btn-sm btn-primary chart-download-btn",onClick:d,title:"Download chart as PNG",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem",marginLeft:"auto"},children:"\uD83D\uDCE5 Download PNG"})]}),(0,l.jsx)("div",{className:"chart-content",children:o})]})}}}]);