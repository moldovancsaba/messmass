(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{785:(s,a,e)=>{Promise.resolve().then(e.bind(e,7608))},7608:(s,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>o});var t=e(5155),l=e(2115),c=e(5695),i=e(3003),d=e.n(i);e(535);var r=e(6994),n=e(1918);function o(){let s=(0,c.useParams)(),a=null==s?void 0:s.slug,[e,i]=(0,l.useState)(null),[o,h]=(0,l.useState)([]),[m,j]=(0,l.useState)([]),[v,x]=(0,l.useState)(!0),[N,u]=(0,l.useState)(!1),[g,f]=(0,l.useState)(null);(0,l.useEffect)(()=>{let s=async()=>{try{console.log("\uD83D\uDD0D Fetching project stats for slug:",a);let s=await fetch("/api/projects/stats/".concat(a)),e=await s.json();e.success?i(e.project):f(e.error||"Failed to load project")}catch(s){console.error("Failed to fetch project:",s),f("Failed to load project data")}finally{x(!1)}};a&&s()},[a]),(0,l.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDCCA Fetching chart configurations...");let s=await fetch("/api/chart-config/public"),a=await s.json();a.success?(h(a.configurations),console.log("✅ Loaded ".concat(a.configurations.length," chart configurations"))):console.error("Failed to load chart configurations:",a.error)}catch(s){console.error("Failed to fetch chart configurations:",s)}})()},[]),(0,l.useEffect)(()=>{if(e&&o.length>0){u(!0);try{if(console.log("\uD83E\uDDEE Calculating chart results with project stats..."),console.log("Project stats:",e.stats),console.log("Chart configurations:",o),"function"!=typeof n.IZ)throw console.error("❌ calculateActiveCharts is not a function:",n.IZ),Error("calculateActiveCharts is not a function");let s=(0,n.IZ)(o,e.stats);console.log("Raw calculation results:",s),j(s),console.log("✅ Calculated ".concat(s.length," chart results"))}catch(s){console.error("❌ Failed to calculate chart results:",s),s instanceof Error&&console.error("Error details:",s.message,s.stack),j([])}finally{u(!1)}}},[e,o]);let p=e?e.stats.remoteImages+e.stats.hostessImages+e.stats.selfies:0,b=e?e.stats.indoor+e.stats.outdoor+e.stats.stadium:0,C=e?e.stats.female+e.stats.male:0,D=e?e.stats.genAlpha+e.stats.genYZ:0,L=e?e.stats.genX+e.stats.boomer:0;return(e&&(e.stats.merched,e.stats.jersey,e.stats.scarf,e.stats.flags,e.stats.baseballCap,e.stats.other),v)?(0,t.jsx)("div",{className:d().container,children:(0,t.jsxs)("div",{className:d().loading,children:[(0,t.jsx)("div",{className:d().spinner}),(0,t.jsx)("p",{children:"Loading event statistics..."})]})}):g?(0,t.jsx)("div",{className:d().container,children:(0,t.jsxs)("div",{className:d().error,children:[(0,t.jsx)("h1",{children:"❌ Error"}),(0,t.jsx)("p",{children:g}),(0,t.jsx)("p",{children:"The statistics page you're looking for might not exist or may have been removed."})]})}):e?(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsx)("div",{className:"glass-card admin-header",children:(0,t.jsxs)("div",{className:"admin-header-content",children:[(0,t.jsxs)("div",{className:"admin-branding",children:[(0,t.jsx)("h1",{className:"admin-title",children:e.eventName}),(0,t.jsxs)("p",{className:"admin-subtitle",children:["Event Statistics - ",new Date(e.eventDate).toLocaleDateString()]}),e.hashtags&&e.hashtags.length>0&&(0,t.jsx)("div",{style:{marginTop:"0.5rem",fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:e.hashtags.join(", ")})]}),(0,t.jsx)("div",{className:"admin-user-info",children:(0,t.jsxs)("div",{className:"admin-badge",style:{padding:"0.75rem 1rem"},children:[(0,t.jsxs)("p",{className:"admin-role",children:["\uD83D\uDCC5 ",new Date(e.eventDate).toLocaleDateString()]}),(0,t.jsx)("p",{className:"admin-level",children:"\uD83D\uDCCA Last Updated"}),(0,t.jsx)("p",{className:"admin-status",children:new Date(e.updatedAt).toLocaleDateString()})]})})]})}),(0,t.jsxs)("div",{className:"glass-card charts-section",children:[(0,t.jsx)("h2",{className:"section-title",children:"\uD83D\uDCCA Data Visualization"}),N?(0,t.jsxs)("div",{className:d().loading,children:[(0,t.jsx)("div",{className:d().spinner}),(0,t.jsx)("p",{children:"Loading charts..."})]}):(0,t.jsx)("div",{children:m.length>0?(0,t.jsx)("div",{className:"dynamic-charts-grid",children:m.map((s,a)=>{console.log("Chart ".concat(s.chartId,":"),s);let e=s.elements.filter(s=>"number"==typeof s.value),l=e.reduce((s,a)=>s+a.value,0);return(console.log("Chart ".concat(s.chartId," - validElements: ").concat(e.length,", totalValue: ").concat(l)),e.length>0&&("bar"===s.type||l>0))?(0,t.jsx)(r.at,{title:s.title,subtitle:s.subtitle,emoji:s.emoji,className:"chart-item",children:(0,t.jsx)(r.AQ,{result:s})},s.chartId):(console.log("Hiding chart ".concat(s.chartId," - no valid data")),null)}).filter(Boolean)}):(0,t.jsx)("div",{className:d().error,children:(0,t.jsx)("p",{children:"No chart configurations available"})})})]}),(0,t.jsxs)("div",{className:d().statsGrid,children:[(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsxs)("h2",{className:d().sectionTitle,children:["\uD83D\uDCF8 Images (",p,")"]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Remote Images"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.remoteImages})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Hostess Images"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.hostessImages})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Selfies"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.selfies})]})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsxs)("h2",{className:d().sectionTitle,children:["\uD83D\uDC65 Fans (",b,")"]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Indoor"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.indoor})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Outdoor"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.outdoor})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Stadium"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.stadium})]})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsxs)("h2",{className:d().sectionTitle,children:["⚧️ Gender (",C,")"]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Female"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.female})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Male"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.male})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Total Gender"}),(0,t.jsx)("div",{className:d().statValue,children:C})]})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsxs)("h2",{className:d().sectionTitle,children:["\uD83C\uDF82 Age Groups (",D+L,")"]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Gen Alpha"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.genAlpha})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Gen Y+Z"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.genYZ})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Total Under 40"}),(0,t.jsx)("div",{className:d().statValue,children:D})]})]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Gen X"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.genX})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Boomer"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.boomer})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Total Over 40"}),(0,t.jsx)("div",{className:d().statValue,children:L})]})]})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsx)("h2",{className:d().sectionTitle,children:"\uD83D\uDED1️ Fans with Merchandise"}),(0,t.jsx)("div",{className:d().statsRow,children:(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Merched Fans"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.merched})]})})]}),(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsxs)("h2",{className:d().sectionTitle,children:["\uD83D\uDC55 Merchandise Types (",e.stats.jersey+e.stats.scarf+e.stats.flags+e.stats.baseballCap+e.stats.other,")"]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Jersey"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.jersey})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Scarf"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.scarf})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Flags"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.flags})]})]}),(0,t.jsxs)("div",{className:d().statsRow,children:[(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Baseball Cap"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.baseballCap})]}),(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Other"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.other})]})]})]}),(e.stats.approvedImages||e.stats.eventAttendees||e.stats.visitWeb)&&(0,t.jsxs)("div",{className:d().section,children:[(0,t.jsx)("h2",{className:d().sectionTitle,children:"\uD83D\uDCC8 Performance Metrics"}),(0,t.jsxs)("div",{className:d().statsRow,children:[void 0!==e.stats.approvedImages&&(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Approved Images"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.approvedImages})]}),void 0!==e.stats.eventAttendees&&(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Event Attendees"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.eventAttendees})]}),void 0!==e.stats.visitWeb&&(0,t.jsxs)("div",{className:d().statCard,children:[(0,t.jsx)("div",{className:d().statLabel,children:"Web Visits"}),(0,t.jsx)("div",{className:d().statValue,children:e.stats.visitWeb})]})]})]})]}),(0,t.jsx)("div",{className:d().footer,children:(0,t.jsxs)("p",{children:["Generated on ",new Date().toLocaleDateString()," • MessMass Event Statistics"]})})]}):(0,t.jsx)("div",{className:d().container,children:(0,t.jsxs)("div",{className:d().error,children:[(0,t.jsx)("h1",{children:"\uD83D\uDCCA Project Not Found"}),(0,t.jsx)("p",{children:"The statistics page you're looking for doesn't exist."})]})})}}},s=>{s.O(0,[675,374,562,441,964,358],()=>s(s.s=785)),_N_E=s.O()}]);