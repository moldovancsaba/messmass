(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{535:()=>{},785:(s,e,a)=>{Promise.resolve().then(a.bind(a,1252))},1252:(s,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>v});var t=a(5155),l=a(2115),c=a(5695),i=a(3003),r=a.n(i);a(535);var n=a(374);function d(s){var e;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("NA"===s)return a.showNA||"N/A";let t=null!=(e=a.decimals)?e:0;switch(a.type){case"currency":return"€".concat(s.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t}));case"percentage":return"".concat(s.toFixed(t),"%");default:return s.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}}let o=s=>{let{result:e,className:a=""}=s;if(!e||!e.elements||0===e.elements.length)return(0,t.jsx)("div",{className:"no-data-message ".concat(a),children:(0,t.jsxs)("p",{children:["No data available for ",(null==e?void 0:e.title)||"this chart"]})});let l=e.elements.filter(s=>"number"==typeof s.value),c=l.reduce((s,e)=>s+e.value,0);return 0===l.length||0===c?(0,t.jsx)("div",{className:"no-data-message ".concat(a),children:(0,t.jsxs)("p",{children:["No data available for ",e.title]})}):"pie"===e.type?(0,t.jsx)(h,{result:e,validElements:l,totalValue:c,className:a}):"bar"===e.type?(0,t.jsx)(m,{result:e,className:a}):(0,t.jsx)("div",{className:"chart-error ".concat(a),children:(0,t.jsxs)("p",{children:["Unsupported chart type: ",e.type]})})},h=s=>{let{result:e,validElements:a,totalValue:l,className:c}=s,i=0,r=a.map(s=>{let e=s.value/l*100,a=s.value/l*360,c=i,r=i+a;i+=a;let n=90+80*Math.cos((c-90)*Math.PI/180),o=90+80*Math.sin((c-90)*Math.PI/180),h=90+80*Math.cos((r-90)*Math.PI/180),m=90+80*Math.sin((r-90)*Math.PI/180),u=["M ".concat(90," ").concat(90),"L ".concat(n," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(a>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:u,fill:s.color,stroke:"white",strokeWidth:"2",children:(0,t.jsx)("title",{children:"".concat(s.label,": ").concat(d(s.value)," (").concat(e.toFixed(1),"%)")})})},s.id)}),n=a.map(s=>{let e=(s.value/l*100).toFixed(1);return(0,t.jsxs)("div",{className:"legend-item",children:[(0,t.jsx)("div",{className:"legend-color",style:{backgroundColor:s.color}}),(0,t.jsxs)("span",{children:[s.label,": ",d(s.value)," (",e,"%)"]})]},s.id)});return(0,t.jsxs)("div",{className:c,children:[(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[r,(0,t.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,t.jsx)("text",{x:"90",y:"98",textAnchor:"middle",className:"chart-emoji",fontSize:"36",fill:"#1a202c",children:e.emoji||"\uD83D\uDCCA"})]})}),(0,t.jsx)("div",{className:"chart-legend",children:n}),void 0!==e.total&&(0,t.jsx)("div",{className:"chart-total",children:(0,t.jsxs)("strong",{children:["Total: ",d(e.total)]})})]})},m=s=>{let{result:e,className:a}=s,l=e.elements.filter(s=>"number"==typeof s.value),c=Math.max(...l.map(s=>s.value));if(0===l.length||0===c)return(0,t.jsx)("div",{className:"no-data-message ".concat(a),children:(0,t.jsxs)("p",{children:["No data available for ",e.title]})});let i=e.elements.map(s=>{let e=s.value,a="number"==typeof e;return(0,t.jsx)("div",{className:"legend-text-row",children:(0,t.jsxs)("span",{children:[s.label,": ",a?d(e):"N/A"]})},s.id)}),r=e.elements.map(s=>{let e=s.value;return(0,t.jsx)("div",{className:"bar-only-row",children:(0,t.jsx)("div",{className:"bar-container",children:(0,t.jsx)("div",{className:"bar-fill",style:{width:"".concat("number"==typeof e?e/c*100:0,"%"),"--bar-color":s.color}})})},s.id)});return(0,t.jsxs)("div",{className:a,children:[void 0!==e.total&&(0,t.jsxs)("div",{className:"chart-total-top",children:[(0,t.jsx)("div",{className:"chart-total-value",children:(s=>"NA"===s?"N/A":s>1e3?"€".concat(s.toLocaleString()):s.toString())(e.total)}),(0,t.jsx)("div",{className:"chart-total-label",children:e.totalLabel||"Total"})]}),(0,t.jsxs)("div",{className:"bar-chart-two-columns",children:[(0,t.jsx)("div",{className:"legends-column",children:i}),(0,t.jsx)("div",{className:"bars-column",children:r})]})]})},u=s=>{let{title:e,subtitle:a,emoji:l,children:c,className:i=""}=s;return(0,t.jsxs)("div",{className:"chart-container ".concat(i),children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsx)("h3",{className:"chart-title",children:e}),a&&(0,t.jsx)("p",{className:"chart-subtitle",children:a})]}),(0,t.jsx)("div",{className:"chart-content",children:c})]})};function v(){let s=(0,c.useParams)().slug,[e,a]=(0,l.useState)(null),[i,d]=(0,l.useState)([]),[h,m]=(0,l.useState)([]),[v,j]=(0,l.useState)(!0),[x,N]=(0,l.useState)(!1),[g,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=async()=>{try{console.log("\uD83D\uDD0D Fetching project stats for slug:",s);let e=await fetch("/api/projects/stats/".concat(s)),t=await e.json();t.success?a(t.project):p(t.error||"Failed to load project")}catch(s){console.error("Failed to fetch project:",s),p("Failed to load project data")}finally{j(!1)}};s&&e()},[s]),(0,l.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDCCA Fetching chart configurations...");let s=await fetch("/api/chart-config/public"),e=await s.json();e.success?(d(e.configurations),console.log("✅ Loaded ".concat(e.configurations.length," chart configurations"))):console.error("Failed to load chart configurations:",e.error)}catch(s){console.error("Failed to fetch chart configurations:",s)}})()},[]),(0,l.useEffect)(()=>{if(e&&i.length>0){N(!0);try{console.log("\uD83E\uDDEE Calculating chart results with project stats..."),console.log("Project stats:",e.stats),console.log("Chart configurations:",i);let s=function(s,e){console.log("\uD83E\uDDEE calculateActiveCharts called with:",{configurationsCount:s.length,statsKeys:Object.keys(e),configurations:s.map(s=>({id:s.chartId,title:s.title,active:void 0!==s.active?s.active:s.isActive}))});let a=s.filter(s=>void 0===s.active&&void 0===s.isActive||!0===s.active||!0===s.isActive);return console.log("\uD83E\uDDEE Calculating ".concat(a.length," active charts (").concat(s.length-a.length," inactive)")),console.log("Active configurations:",a.map(s=>s.title)),console.log("\uD83E\uDDEE Batch calculating ".concat(a.length," charts...")),a.map(s=>(function(s,e){let a;console.log("\uD83E\uDDEE Calculating chart: ".concat(s.title," (").concat(s.type,")")),console.log("Configuration elements:",s.elements),console.log("Available stats:",Object.keys(e));let t=!1,l=s.elements.map(s=>{try{console.log("Evaluating element: ".concat(s.label," with formula: ").concat(s.formula));let a=(0,n.w9)(s.formula,e);return console.log("Result for ".concat(s.label,": ").concat(a)),"NA"===a&&(t=!0,console.warn('⚠️ Formula evaluation returned NA for element "'.concat(s.label,'": ').concat(s.formula))),{id:s.id,label:s.label,value:a,color:s.color}}catch(e){return t=!0,console.error('❌ Error evaluating formula for element "'.concat(s.label,'":'),e),e instanceof Error&&console.error("Error details:",e.message,e.stack),{id:s.id,label:s.label,value:"NA",color:s.color}}});if("bar"===s.type&&s.showTotal)try{let s=l.map(s=>s.value).filter(s=>"number"==typeof s);0===s.length?(a="NA",t=!0):s.length<l.length?(a=s.reduce((s,e)=>s+e,0),t=!0):a=s.reduce((s,e)=>s+e,0)}catch(e){a="NA",t=!0,console.error('❌ Error calculating total for chart "'.concat(s.title,'":'),e)}if("engagement"===s.chartId&&s.showTotal)try{let s=e.indoor+e.outdoor+e.stadium,l=e.merched,c=e.eventAttendees||0;s>0&&c>0?a=Math.round(l/s*c):(a="NA",t=!0)}catch(s){a="NA",t=!0,console.error("❌ Error calculating Core Fan Team:",s)}if("merchandise"===s.chartId&&s.showTotal)try{let s=e.indoor+e.outdoor+e.stadium,l=e.merched;s>=l?a=(s-l)*10:(a="NA",t=!0)}catch(s){a="NA",t=!0,console.error("❌ Error calculating potential merchandise sales:",s)}return console.log("✅ Chart calculation complete: ".concat(l.length," elements, ").concat(t?"with":"without"," errors")),{chartId:s.chartId,title:s.title,type:s.type,emoji:s.emoji,subtitle:s.subtitle,totalLabel:s.totalLabel,elements:l,total:a,hasErrors:t}})(s,e))}(i,e.stats);console.log("Raw calculation results:",s),m(s),console.log("✅ Calculated ".concat(s.length," chart results"))}catch(s){console.error("❌ Failed to calculate chart results:",s),s instanceof Error&&console.error("Error details:",s.message,s.stack),m([])}finally{N(!1)}}},[e,i]);let b=e?e.stats.remoteImages+e.stats.hostessImages+e.stats.selfies:0,f=e?e.stats.indoor+e.stats.outdoor+e.stats.stadium:0,_=e?e.stats.female+e.stats.male:0,C=e?e.stats.genAlpha+e.stats.genYZ:0,D=e?e.stats.genX+e.stats.boomer:0;return(e&&(e.stats.merched,e.stats.jersey,e.stats.scarf,e.stats.flags,e.stats.baseballCap,e.stats.other),v)?(0,t.jsx)("div",{className:r().container,children:(0,t.jsxs)("div",{className:r().loading,children:[(0,t.jsx)("div",{className:r().spinner}),(0,t.jsx)("p",{children:"Loading event statistics..."})]})}):g?(0,t.jsx)("div",{className:r().container,children:(0,t.jsxs)("div",{className:r().error,children:[(0,t.jsx)("h1",{children:"❌ Error"}),(0,t.jsx)("p",{children:g}),(0,t.jsx)("p",{children:"The statistics page you're looking for might not exist or may have been removed."})]})}):e?(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsx)("div",{className:"glass-card admin-header",children:(0,t.jsxs)("div",{className:"admin-header-content",children:[(0,t.jsxs)("div",{className:"admin-branding",children:[(0,t.jsx)("h1",{className:"admin-title",children:e.eventName}),(0,t.jsxs)("p",{className:"admin-subtitle",children:["Event Statistics - ",new Date(e.eventDate).toLocaleDateString()]})]}),(0,t.jsx)("div",{className:"admin-user-info",children:(0,t.jsxs)("div",{className:"admin-badge",style:{padding:"0.75rem 1rem"},children:[(0,t.jsxs)("p",{className:"admin-role",children:["\uD83D\uDCC5 ",new Date(e.eventDate).toLocaleDateString()]}),(0,t.jsx)("p",{className:"admin-level",children:"\uD83D\uDCCA Last Updated"}),(0,t.jsx)("p",{className:"admin-status",children:new Date(e.updatedAt).toLocaleDateString()})]})})]})}),(0,t.jsxs)("div",{className:"glass-card charts-section",children:[(0,t.jsx)("h2",{className:"section-title",children:"\uD83D\uDCCA Data Visualization"}),x?(0,t.jsxs)("div",{className:r().loading,children:[(0,t.jsx)("div",{className:r().spinner}),(0,t.jsx)("p",{children:"Loading charts..."})]}):(0,t.jsx)("div",{children:h.length>0?(0,t.jsx)("div",{className:"dynamic-charts-grid",children:h.map((s,e)=>{console.log("Chart ".concat(s.chartId,":"),s);let a=s.elements.filter(s=>"number"==typeof s.value),l=a.reduce((s,e)=>s+e.value,0);return(console.log("Chart ".concat(s.chartId," - validElements: ").concat(a.length,", totalValue: ").concat(l)),a.length>0&&("bar"===s.type||l>0))?(0,t.jsx)(u,{title:s.title,subtitle:s.subtitle,emoji:s.emoji,className:"chart-item",children:(0,t.jsx)(o,{result:s})},s.chartId):(console.log("Hiding chart ".concat(s.chartId," - no valid data")),null)}).filter(Boolean)}):(0,t.jsx)("div",{className:r().error,children:(0,t.jsx)("p",{children:"No chart configurations available"})})})]}),(0,t.jsxs)("div",{className:r().statsGrid,children:[(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83D\uDCF8 Images (",b,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Remote Images"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.remoteImages})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Hostess Images"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.hostessImages})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Selfies"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.selfies})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83D\uDC65 Fans (",f,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Indoor"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.indoor})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Outdoor"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.outdoor})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Stadium"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.stadium})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["⚧️ Gender (",_,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Female"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.female})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Male"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.male})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Total Gender"}),(0,t.jsx)("div",{className:r().statValue,children:_})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83C\uDF82 Age Groups (",C+D,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Gen Alpha"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.genAlpha})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Gen Y+Z"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.genYZ})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Total Under 40"}),(0,t.jsx)("div",{className:r().statValue,children:C})]})]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Gen X"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.genX})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Boomer"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.boomer})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Total Over 40"}),(0,t.jsx)("div",{className:r().statValue,children:D})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsx)("h2",{className:r().sectionTitle,children:"\uD83D\uDED1️ Fans with Merchandise"}),(0,t.jsx)("div",{className:r().statsRow,children:(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Merched Fans"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.merched})]})})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83D\uDC55 Merchandise Types (",e.stats.jersey+e.stats.scarf+e.stats.flags+e.stats.baseballCap+e.stats.other,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Jersey"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.jersey})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Scarf"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.scarf})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Flags"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.flags})]})]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Baseball Cap"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.baseballCap})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Other"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.other})]})]})]}),(e.stats.approvedImages||e.stats.eventAttendees||e.stats.visitWeb)&&(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsx)("h2",{className:r().sectionTitle,children:"\uD83D\uDCC8 Performance Metrics"}),(0,t.jsxs)("div",{className:r().statsRow,children:[void 0!==e.stats.approvedImages&&(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Approved Images"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.approvedImages})]}),void 0!==e.stats.eventAttendees&&(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Event Attendees"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.eventAttendees})]}),void 0!==e.stats.visitWeb&&(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Web Visits"}),(0,t.jsx)("div",{className:r().statValue,children:e.stats.visitWeb})]})]})]})]}),(0,t.jsx)("div",{className:r().footer,children:(0,t.jsxs)("p",{children:["Generated on ",new Date().toLocaleDateString()," • MessMass Event Statistics"]})})]}):(0,t.jsx)("div",{className:r().container,children:(0,t.jsxs)("div",{className:r().error,children:[(0,t.jsx)("h1",{children:"\uD83D\uDCCA Project Not Found"}),(0,t.jsx)("p",{children:"The statistics page you're looking for doesn't exist."})]})})}},3003:s=>{s.exports={container:"stats_container__6Qj_G",header:"stats_header__D02pP",title:"stats_title__dICf0",subtitle:"stats_subtitle__06tKS",meta:"stats_meta__KJ7Ie",statsGrid:"stats_statsGrid__XC2zd",section:"stats_section___97hA",sectionTitle:"stats_sectionTitle__pwUk7",statsRow:"stats_statsRow__W8z4M",ageGrid:"stats_ageGrid__zG84Z",statCard:"stats_statCard__1knnv",calculatedCard:"stats_calculatedCard__8eEj1",statLabel:"stats_statLabel__0ppCb",statValue:"stats_statValue__xU62i",loading:"stats_loading__BYA9u",spinner:"stats_spinner__7iBFe",spin:"stats_spin__UWbii",error:"stats_error__HceYC","charts-section":"stats_charts-section__Ra1Hz","section-title":"stats_section-title__pVs1T","charts-grid":"stats_charts-grid__6g_0W","chart-item":"stats_chart-item__IASHu",footer:"stats_footer__KrWrI"}},5695:(s,e,a)=>{"use strict";var t=a(8999);a.o(t,"useParams")&&a.d(e,{useParams:function(){return t.useParams}}),a.o(t,"useRouter")&&a.d(e,{useRouter:function(){return t.useRouter}})}},s=>{s.O(0,[675,374,441,964,358],()=>s(s.s=785)),_N_E=s.O()}]);