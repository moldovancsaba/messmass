(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{785:(s,a,e)=>{Promise.resolve().then(e.bind(e,1252))},1252:(s,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>j});var t=e(5155),l=e(2115),c=e(5695),i=e(3003),r=e.n(i),n=e(374);function d(s){var a;let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("NA"===s)return e.showNA||"N/A";let t=null!=(a=e.decimals)?a:0;switch(e.type){case"currency":return"€".concat(s.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t}));case"percentage":return"".concat(s.toFixed(t),"%");default:return s.toLocaleString(void 0,{minimumFractionDigits:t,maximumFractionDigits:t})}}let o=s=>{let{result:a,className:e=""}=s;if(!a||!a.elements||0===a.elements.length)return(0,t.jsx)("div",{className:"no-data-message ".concat(e),children:(0,t.jsxs)("p",{children:["No data available for ",(null==a?void 0:a.title)||"this chart"]})});let l=a.elements.filter(s=>"number"==typeof s.value),c=l.reduce((s,a)=>s+a.value,0);return 0===l.length||0===c?(0,t.jsx)("div",{className:"no-data-message ".concat(e),children:(0,t.jsxs)("p",{children:["No data available for ",a.title]})}):"pie"===a.type?(0,t.jsx)(h,{result:a,validElements:l,totalValue:c,className:e}):"bar"===a.type?(0,t.jsx)(m,{result:a,className:e}):(0,t.jsx)("div",{className:"chart-error ".concat(e),children:(0,t.jsxs)("p",{children:["Unsupported chart type: ",a.type]})})},h=s=>{let{result:a,validElements:e,totalValue:l,className:c}=s,i=0,r=e.map(s=>{let a=s.value/l*100,e=s.value/l*360,c=i,r=i+e;i+=e;let n=90+80*Math.cos((c-90)*Math.PI/180),o=90+80*Math.sin((c-90)*Math.PI/180),h=90+80*Math.cos((r-90)*Math.PI/180),m=90+80*Math.sin((r-90)*Math.PI/180),u=["M ".concat(90," ").concat(90),"L ".concat(n," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(e>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:u,fill:s.color,stroke:"white",strokeWidth:"2",children:(0,t.jsx)("title",{children:"".concat(s.label,": ").concat(d(s.value)," (").concat(a.toFixed(1),"%)")})})},s.id)}),n=e.map(s=>{let a=(s.value/l*100).toFixed(1);return(0,t.jsxs)("div",{className:"legend-item",children:[(0,t.jsx)("div",{className:"legend-color",style:{backgroundColor:s.color}}),(0,t.jsxs)("span",{children:[s.label,": ",d(s.value)," (",a,"%)"]})]},s.id)});return(0,t.jsxs)("div",{className:c,children:[(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[r,(0,t.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,t.jsx)("text",{x:"90",y:"98",textAnchor:"middle",className:"chart-emoji",fontSize:"36",fill:"#1a202c",children:a.emoji||"\uD83D\uDCCA"})]})}),(0,t.jsx)("div",{className:"chart-legend",children:n}),void 0!==a.total&&(0,t.jsx)("div",{className:"chart-total",children:(0,t.jsxs)("strong",{children:["Total: ",d(a.total)]})})]})},m=s=>{let{result:a,className:e}=s,l=a.elements.filter(s=>"number"==typeof s.value),c=Math.max(...l.map(s=>s.value));if(0===l.length||0===c)return(0,t.jsx)("div",{className:"no-data-message ".concat(e),children:(0,t.jsxs)("p",{children:["No data available for ",a.title]})});let i=a.elements.map(s=>{let a=s.value,e="number"==typeof a,l=e?a/c*100:0;return(0,t.jsxs)("div",{className:"bar-item",children:[(0,t.jsxs)("div",{className:"bar-label",children:[(0,t.jsx)("span",{className:"bar-text",children:s.label}),(0,t.jsx)("span",{className:"bar-value",children:e?d(a):"N/A"})]}),(0,t.jsx)("div",{className:"bar-container",children:(0,t.jsx)("div",{className:"bar-fill",style:{width:"".concat(l,"%"),backgroundColor:s.color}})})]},s.id)});return(0,t.jsxs)("div",{className:e,children:[(0,t.jsx)("div",{className:"bar-chart",children:i}),void 0!==a.total&&(0,t.jsx)("div",{className:"chart-total",children:(0,t.jsxs)("strong",{children:[a.totalLabel||"Total",": ",d(a.total)]})})]})},u=s=>{let{title:a,subtitle:e,emoji:l,children:c,className:i=""}=s;return(0,t.jsxs)("div",{className:"chart-container ".concat(i),children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsxs)("h3",{className:"chart-title",children:[l&&(0,t.jsx)("span",{className:"chart-emoji",children:l}),a]}),e&&(0,t.jsx)("p",{className:"chart-subtitle",children:e})]}),(0,t.jsx)("div",{className:"chart-content",children:c})]})};function j(){let s=(0,c.useParams)().slug,[a,e]=(0,l.useState)(null),[i,d]=(0,l.useState)([]),[h,m]=(0,l.useState)([]),[j,v]=(0,l.useState)(!0),[x,N]=(0,l.useState)(!1),[g,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{let a=async()=>{try{console.log("\uD83D\uDD0D Fetching project stats for slug:",s);let a=await fetch("/api/projects/stats/".concat(s)),t=await a.json();t.success?e(t.project):p(t.error||"Failed to load project")}catch(s){console.error("Failed to fetch project:",s),p("Failed to load project data")}finally{v(!1)}};s&&a()},[s]),(0,l.useEffect)(()=>{(async()=>{try{console.log("\uD83D\uDCCA Fetching chart configurations...");let s=await fetch("/api/chart-config/public"),a=await s.json();a.success?(d(a.configurations),console.log("✅ Loaded ".concat(a.configurations.length," chart configurations"))):console.error("Failed to load chart configurations:",a.error)}catch(s){console.error("Failed to fetch chart configurations:",s)}})()},[]),(0,l.useEffect)(()=>{if(a&&i.length>0){N(!0);try{console.log("\uD83E\uDDEE Calculating chart results with project stats...");let s=function(s,a){let e=s.filter(s=>s.isActive);return console.log("\uD83E\uDDEE Calculating ".concat(e.length," active charts (").concat(s.length-e.length," inactive)")),console.log("\uD83E\uDDEE Batch calculating ".concat(e.length," charts...")),e.map(s=>(function(s,a){let e;console.log("\uD83E\uDDEE Calculating chart: ".concat(s.title," (").concat(s.type,")"));let t=!1,l=s.elements.map(s=>{try{let e=(0,n.w9)(s.formula,a);return"NA"===e&&(t=!0,console.warn('⚠️ Formula evaluation returned NA for element "'.concat(s.label,'": ').concat(s.formula))),{id:s.id,label:s.label,value:e,color:s.color}}catch(a){return t=!0,console.error('❌ Error evaluating formula for element "'.concat(s.label,'":'),a),{id:s.id,label:s.label,value:"NA",color:s.color}}});if("bar"===s.type&&s.showTotal)try{let s=l.map(s=>s.value).filter(s=>"number"==typeof s);0===s.length?(e="NA",t=!0):s.length<l.length?(e=s.reduce((s,a)=>s+a,0),t=!0):e=s.reduce((s,a)=>s+a,0)}catch(a){e="NA",t=!0,console.error('❌ Error calculating total for chart "'.concat(s.title,'":'),a)}if("engagement"===s.chartId&&s.showTotal)try{let s=a.indoor+a.outdoor+a.stadium,l=a.merched,c=a.eventAttendees||0;s>0&&c>0?e=Math.round(l/s*c):(e="NA",t=!0)}catch(s){e="NA",t=!0,console.error("❌ Error calculating Core Fan Team:",s)}if("merchandise"===s.chartId&&s.showTotal)try{let s=a.indoor+a.outdoor+a.stadium,l=a.merched;s>=l?e=(s-l)*10:(e="NA",t=!0)}catch(s){e="NA",t=!0,console.error("❌ Error calculating potential merchandise sales:",s)}return console.log("✅ Chart calculation complete: ".concat(l.length," elements, ").concat(t?"with":"without"," errors")),{chartId:s.chartId,title:s.title,type:s.type,emoji:s.emoji,subtitle:s.subtitle,totalLabel:s.totalLabel,elements:l,total:e,hasErrors:t}})(s,a))}(i,a.stats);m(s),console.log("✅ Calculated ".concat(s.length," chart results"))}catch(s){console.error("Failed to calculate chart results:",s)}finally{N(!1)}}},[a,i]);let b=a?a.stats.remoteImages+a.stats.hostessImages+a.stats.selfies:0,f=a?a.stats.indoor+a.stats.outdoor+a.stats.stadium:0,_=a?a.stats.female+a.stats.male:0,C=a?a.stats.genAlpha+a.stats.genYZ:0,D=a?a.stats.genX+a.stats.boomer:0;return(a&&(a.stats.merched,a.stats.jersey,a.stats.scarf,a.stats.flags,a.stats.baseballCap,a.stats.other),j)?(0,t.jsx)("div",{className:r().container,children:(0,t.jsxs)("div",{className:r().loading,children:[(0,t.jsx)("div",{className:r().spinner}),(0,t.jsx)("p",{children:"Loading event statistics..."})]})}):g?(0,t.jsx)("div",{className:r().container,children:(0,t.jsxs)("div",{className:r().error,children:[(0,t.jsx)("h1",{children:"❌ Error"}),(0,t.jsx)("p",{children:g}),(0,t.jsx)("p",{children:"The statistics page you're looking for might not exist or may have been removed."})]})}):a?(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsx)("div",{className:"glass-card admin-header",children:(0,t.jsxs)("div",{className:"admin-header-content",children:[(0,t.jsxs)("div",{className:"admin-branding",children:[(0,t.jsx)("h1",{className:"admin-title",children:a.eventName}),(0,t.jsxs)("p",{className:"admin-subtitle",children:["Event Statistics - ",new Date(a.eventDate).toLocaleDateString()]})]}),(0,t.jsx)("div",{className:"admin-user-info",children:(0,t.jsxs)("div",{className:"admin-badge",style:{padding:"0.75rem 1rem"},children:[(0,t.jsxs)("p",{className:"admin-role",children:["\uD83D\uDCC5 ",new Date(a.eventDate).toLocaleDateString()]}),(0,t.jsx)("p",{className:"admin-level",children:"\uD83D\uDCCA Last Updated"}),(0,t.jsx)("p",{className:"admin-status",children:new Date(a.updatedAt).toLocaleDateString()})]})})]})}),(0,t.jsxs)("div",{className:"glass-card charts-section",children:[(0,t.jsx)("h2",{className:"section-title",children:"\uD83D\uDCCA Data Visualization"}),x?(0,t.jsxs)("div",{className:r().loading,children:[(0,t.jsx)("div",{className:r().spinner}),(0,t.jsx)("p",{children:"Loading charts..."})]}):h.length>0?(0,t.jsx)("div",{className:"dynamic-charts-grid",children:h.map((s,a)=>s.elements.some(s=>"number"==typeof s.value&&s.value>0)?(0,t.jsx)(u,{title:s.title,subtitle:s.subtitle,emoji:s.emoji,className:"chart-item",children:(0,t.jsx)(o,{result:s})},s.chartId):null).filter(Boolean)}):(0,t.jsx)("div",{className:r().error,children:(0,t.jsx)("p",{children:"No chart configurations available"})})]}),(0,t.jsxs)("div",{className:r().statsGrid,children:[(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83D\uDCF8 Images (",b,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Remote Images"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.remoteImages})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Hostess Images"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.hostessImages})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Selfies"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.selfies})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83D\uDC65 Fans (",f,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Indoor"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.indoor})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Outdoor"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.outdoor})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Stadium"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.stadium})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["⚧️ Gender (",_,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Female"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.female})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Male"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.male})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Total Gender"}),(0,t.jsx)("div",{className:r().statValue,children:_})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83C\uDF82 Age Groups (",C+D,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Gen Alpha"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.genAlpha})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Gen Y+Z"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.genYZ})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Total Under 40"}),(0,t.jsx)("div",{className:r().statValue,children:C})]})]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Gen X"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.genX})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Boomer"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.boomer})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Total Over 40"}),(0,t.jsx)("div",{className:r().statValue,children:D})]})]})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsx)("h2",{className:r().sectionTitle,children:"\uD83D\uDED1️ Fans with Merchandise"}),(0,t.jsx)("div",{className:r().statsRow,children:(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Merched Fans"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.merched})]})})]}),(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsxs)("h2",{className:r().sectionTitle,children:["\uD83D\uDC55 Merchandise Types (",a.stats.jersey+a.stats.scarf+a.stats.flags+a.stats.baseballCap+a.stats.other,")"]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Jersey"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.jersey})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Scarf"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.scarf})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Flags"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.flags})]})]}),(0,t.jsxs)("div",{className:r().statsRow,children:[(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Baseball Cap"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.baseballCap})]}),(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Other"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.other})]})]})]}),(a.stats.approvedImages||a.stats.eventAttendees||a.stats.visitWeb)&&(0,t.jsxs)("div",{className:r().section,children:[(0,t.jsx)("h2",{className:r().sectionTitle,children:"\uD83D\uDCC8 Performance Metrics"}),(0,t.jsxs)("div",{className:r().statsRow,children:[void 0!==a.stats.approvedImages&&(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Approved Images"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.approvedImages})]}),void 0!==a.stats.eventAttendees&&(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Event Attendees"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.eventAttendees})]}),void 0!==a.stats.visitWeb&&(0,t.jsxs)("div",{className:r().statCard,children:[(0,t.jsx)("div",{className:r().statLabel,children:"Web Visits"}),(0,t.jsx)("div",{className:r().statValue,children:a.stats.visitWeb})]})]})]})]}),(0,t.jsx)("div",{className:r().footer,children:(0,t.jsxs)("p",{children:["Generated on ",new Date().toLocaleDateString()," • MessMass Event Statistics"]})})]}):(0,t.jsx)("div",{className:r().container,children:(0,t.jsxs)("div",{className:r().error,children:[(0,t.jsx)("h1",{children:"\uD83D\uDCCA Project Not Found"}),(0,t.jsx)("p",{children:"The statistics page you're looking for doesn't exist."})]})})}},3003:s=>{s.exports={container:"stats_container__6Qj_G",header:"stats_header__D02pP",title:"stats_title__dICf0",subtitle:"stats_subtitle__06tKS",meta:"stats_meta__KJ7Ie",statsGrid:"stats_statsGrid__XC2zd",section:"stats_section___97hA",sectionTitle:"stats_sectionTitle__pwUk7",statsRow:"stats_statsRow__W8z4M",ageGrid:"stats_ageGrid__zG84Z",statCard:"stats_statCard__1knnv",calculatedCard:"stats_calculatedCard__8eEj1",statLabel:"stats_statLabel__0ppCb",statValue:"stats_statValue__xU62i",loading:"stats_loading__BYA9u",spinner:"stats_spinner__7iBFe",spin:"stats_spin__UWbii",error:"stats_error__HceYC","charts-section":"stats_charts-section__Ra1Hz","section-title":"stats_section-title__pVs1T","charts-grid":"stats_charts-grid__6g_0W","chart-item":"stats_chart-item__IASHu",footer:"stats_footer__KrWrI"}},5695:(s,a,e)=>{"use strict";var t=e(8999);e.o(t,"useParams")&&e.d(a,{useParams:function(){return t.useParams}}),e.o(t,"useRouter")&&e.d(a,{useRouter:function(){return t.useRouter}})}},s=>{s.O(0,[696,374,441,964,358],()=>s(s.s=785)),_N_E=s.O()}]);