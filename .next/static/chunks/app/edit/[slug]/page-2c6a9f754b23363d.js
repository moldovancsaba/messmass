(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{4238:(e,t,s)=>{Promise.resolve().then(s.bind(s,6687))},6687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),i=s(9137),r=s.n(i),l=s(2115),o=s(5695),n=s(5594),d=s(376);function m(e){let{project:t}=e,[s,i]=(0,l.useState)(t),[r,o]=(0,l.useState)("idle");(0,l.useEffect)(()=>{i(t)},[t]);let m=async e=>{o("saving");try{(await fetch("/api/projects",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:s._id,eventName:s.eventName,eventDate:s.eventDate,stats:e})})).ok?(o("saved"),setTimeout(()=>o("idle"),2e3)):(o("error"),setTimeout(()=>o("idle"),3e3))}catch(e){console.error("Failed to save project:",e),o("error"),setTimeout(()=>o("idle"),3e3)}},c=s.stats.remoteImages+s.stats.hostessImages+s.stats.selfies,g=s.stats.indoor+s.stats.outdoor+s.stats.stadium,p=s.stats.female+s.stats.male,u=s.stats.genAlpha+s.stats.genYZ,x=s.stats.genX+s.stats.boomer,h=s.stats.merched+s.stats.jersey+s.stats.scarf+s.stats.flags+s.stats.baseballCap+s.stats.other,b=e=>{let{label:t,value:r,statKey:l,isCalculated:o=!1}=e;return(0,a.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"1.25rem",textAlign:"center",transition:"transform 0.2s ease, box-shadow 0.2s ease",border:"1px solid rgba(255, 255, 255, 0.3)",position:"relative",cursor:o?"default":"pointer",opacity:o?.8:1},onClick:l&&!o?()=>(e=>{var t;let a=null!=(t=s.stats[e])?t:0,r=(0,d._)((0,n._)({},s.stats),{[e]:a+1});i(e=>(0,d._)((0,n._)({},e),{stats:r})),m(r)})(l):void 0,children:[(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #667eea 0%, #764ba2 100%)",borderRadius:"12px 12px 0 0"}}),(0,a.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"#4a5568",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"0.5rem"},children:t}),(0,a.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:800,color:"#1a202c",lineHeight:1},children:r}),l&&!o&&(0,a.jsx)("button",{onClick:e=>{var t;e.stopPropagation();let a=null!=(t=s.stats[l])?t:0;if(a>0){let e=(0,d._)((0,n._)({},s.stats),{[l]:a-1});i(t=>(0,d._)((0,n._)({},t),{stats:e})),m(e)}},disabled:0===r,style:{position:"absolute",bottom:"8px",right:"8px",background:0===r?"#e2e8f0":"#ef4444",color:0===r?"#9ca3af":"white",border:"none",borderRadius:"6px",padding:"4px 8px",fontSize:"0.75rem",fontWeight:600,cursor:0===r?"not-allowed":"pointer",transition:"all 0.2s ease"},children:"-1"})]})},v=e=>{let{label:t,value:r,statKey:o}=e,[c,g]=(0,l.useState)(r);return(0,l.useEffect)(()=>{g(r)},[r]),(0,a.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"1rem",border:"1px solid rgba(255, 255, 255, 0.3)",display:"flex",alignItems:"center",gap:"1rem"},children:[(0,a.jsx)("input",{type:"number",value:c,onChange:e=>{g(Math.max(0,parseInt(e.target.value)||0))},onBlur:()=>{let e=Math.max(0,parseInt(c.toString())||0);e!==r&&((e,t)=>{let a=(0,d._)((0,n._)({},s.stats),{[e]:Math.max(0,t)});i(e=>(0,d._)((0,n._)({},e),{stats:a})),m(a)})(o,e)},style:{width:"80px",padding:"0.5rem",border:"2px solid #e2e8f0",borderRadius:"8px",fontSize:"1.25rem",fontWeight:700,textAlign:"center",color:"#1a202c",backgroundColor:"#ffffff",outline:"none",transition:"all 0.2s ease"},min:"0"}),(0,a.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"#4a5568",flex:1},children:t})]})};return(0,a.jsxs)("div",{className:"admin-container",children:[(0,a.jsx)("div",{className:"glass-card admin-header",children:(0,a.jsxs)("div",{className:"admin-header-content",children:[(0,a.jsxs)("div",{className:"admin-branding",children:[(0,a.jsx)("h1",{className:"admin-title",children:s.eventName}),(0,a.jsxs)("p",{className:"admin-subtitle",children:["Record Stats - ",new Date(s.eventDate).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"admin-user-info",children:(0,a.jsxs)("div",{className:"admin-badge",style:{padding:"0.75rem 1rem"},children:[(0,a.jsxs)("p",{className:"admin-role",children:["\uD83D\uDCC5 ",new Date(s.eventDate).toLocaleDateString()]}),(0,a.jsx)("p",{className:"admin-level",children:"\uD83C\uDFAF Editor Mode"}),(0,a.jsxs)("p",{className:"admin-status",children:["saving"===r&&"\uD83D\uDCBE Saving...","saved"===r&&"✅ Saved","error"===r&&"❌ Save Error","idle"===r&&"\uD83D\uDCDD Ready"]})]})})]})}),(0,a.jsxs)("div",{style:{display:"grid",gap:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[(0,a.jsxs)("div",{className:"glass-card",style:{padding:"1.5rem"},children:[(0,a.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 1.5rem 0",color:"#2d3748",borderBottom:"2px solid #e2e8f0",paddingBottom:"0.5rem"},children:["\uD83D\uDCF8 Images (",c,")"]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,a.jsx)(b,{label:"Remote Images",value:s.stats.remoteImages,statKey:"remoteImages"}),(0,a.jsx)(b,{label:"Hostess Images",value:s.stats.hostessImages,statKey:"hostessImages"}),(0,a.jsx)(b,{label:"Selfies",value:s.stats.selfies,statKey:"selfies"})]})]}),(0,a.jsxs)("div",{className:"glass-card",style:{padding:"1.5rem"},children:[(0,a.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 1.5rem 0",color:"#2d3748",borderBottom:"2px solid #e2e8f0",paddingBottom:"0.5rem"},children:["\uD83D\uDC65 Fans (",g,")"]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,a.jsx)(b,{label:"Indoor",value:s.stats.indoor,statKey:"indoor"}),(0,a.jsx)(b,{label:"Outdoor",value:s.stats.outdoor,statKey:"outdoor"}),(0,a.jsx)(b,{label:"Stadium",value:s.stats.stadium,statKey:"stadium"})]})]}),(0,a.jsxs)("div",{className:"glass-card",style:{padding:"1.5rem"},children:[(0,a.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 1.5rem 0",color:"#2d3748",borderBottom:"2px solid #e2e8f0",paddingBottom:"0.5rem"},children:["⚧️ Gender (",p,")"]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,a.jsx)(b,{label:"Female",value:s.stats.female,statKey:"female"}),(0,a.jsx)(b,{label:"Male",value:s.stats.male,statKey:"male"}),(0,a.jsx)(b,{label:"Total Gender",value:p,isCalculated:!0})]})]}),(0,a.jsxs)("div",{className:"glass-card",style:{padding:"1.5rem"},children:[(0,a.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 1.5rem 0",color:"#2d3748",borderBottom:"2px solid #e2e8f0",paddingBottom:"0.5rem"},children:["\uD83C\uDF82 Age (",u+x,")"]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"1rem"},children:[(0,a.jsx)(b,{label:"Gen Alpha",value:s.stats.genAlpha,statKey:"genAlpha"}),(0,a.jsx)(b,{label:"Gen Y+Z",value:s.stats.genYZ,statKey:"genYZ"}),(0,a.jsx)(b,{label:"Total Under 40",value:u,isCalculated:!0}),(0,a.jsx)(b,{label:"Gen X",value:s.stats.genX,statKey:"genX"}),(0,a.jsx)(b,{label:"Boomer",value:s.stats.boomer,statKey:"boomer"}),(0,a.jsx)(b,{label:"Total Over 40",value:x,isCalculated:!0})]})]}),(0,a.jsxs)("div",{className:"glass-card",style:{padding:"1.5rem"},children:[(0,a.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 1.5rem 0",color:"#2d3748",borderBottom:"2px solid #e2e8f0",paddingBottom:"0.5rem"},children:["\uD83D\uDECD️ Merch (",h,")"]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,a.jsx)(b,{label:"Merched",value:s.stats.merched,statKey:"merched"}),(0,a.jsx)(b,{label:"Jersey",value:s.stats.jersey,statKey:"jersey"}),(0,a.jsx)(b,{label:"Scarf",value:s.stats.scarf,statKey:"scarf"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem"},children:[(0,a.jsx)(b,{label:"Flags",value:s.stats.flags,statKey:"flags"}),(0,a.jsx)(b,{label:"Baseball Cap",value:s.stats.baseballCap,statKey:"baseballCap"}),(0,a.jsx)(b,{label:"Other",value:s.stats.other,statKey:"other"})]})]}),(0,a.jsxs)("div",{className:"glass-card",style:{padding:"1.5rem"},children:[(0,a.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:700,margin:"0 0 1.5rem 0",color:"#2d3748",borderBottom:"2px solid #e2e8f0",paddingBottom:"0.5rem"},children:"\uD83D\uDCC8 Success Manager"}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("h4",{style:{margin:"0 0 1rem 0",color:"#4a5568",fontSize:"1.125rem"},children:"Image Management"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"0.75rem"},children:[(0,a.jsx)(v,{label:"Approved Images",value:s.stats.approvedImages||0,statKey:"approvedImages"}),(0,a.jsx)(v,{label:"Rejected Images",value:s.stats.rejectedImages||0,statKey:"rejectedImages"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("h4",{style:{margin:"0 0 1rem 0",color:"#4a5568",fontSize:"1.125rem"},children:"Visit Tracking"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"0.75rem"},children:[(0,a.jsx)(v,{label:"QR Code Visits",value:s.stats.visitQrCode||0,statKey:"visitQrCode"}),(0,a.jsx)(v,{label:"Short URL Visits",value:s.stats.visitShortUrl||0,statKey:"visitShortUrl"}),(0,a.jsx)(v,{label:"Web Visits",value:s.stats.visitWeb||0,statKey:"visitWeb"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("h4",{style:{margin:"0 0 1rem 0",color:"#4a5568",fontSize:"1.125rem"},children:"Social Media Visits"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"0.75rem"},children:[(0,a.jsx)(v,{label:"Facebook Visits",value:s.stats.visitFacebook||0,statKey:"visitFacebook"}),(0,a.jsx)(v,{label:"Instagram Visits",value:s.stats.visitInstagram||0,statKey:"visitInstagram"}),(0,a.jsx)(v,{label:"YouTube Visits",value:s.stats.visitYoutube||0,statKey:"visitYoutube"}),(0,a.jsx)(v,{label:"TikTok Visits",value:s.stats.visitTiktok||0,statKey:"visitTiktok"}),(0,a.jsx)(v,{label:"X Visits",value:s.stats.visitX||0,statKey:"visitX"}),(0,a.jsx)(v,{label:"Trustpilot Visits",value:s.stats.visitTrustpilot||0,statKey:"visitTrustpilot"})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,a.jsx)("h4",{style:{margin:"0 0 1rem 0",color:"#4a5568",fontSize:"1.125rem"},children:"Event Performance"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"0.75rem"},children:[(0,a.jsx)(v,{label:"Event Attendees",value:s.stats.eventAttendees||0,statKey:"eventAttendees"}),(0,a.jsx)(v,{label:"Ticket Purchases",value:s.stats.eventTicketPurchases||0,statKey:"eventTicketPurchases"}),(0,a.jsx)(v,{label:"Event Result Home",value:s.stats.eventResultHome||0,statKey:"eventResultHome"}),(0,a.jsx)(v,{label:"Event Result Visitor",value:s.stats.eventResultVisitor||0,statKey:"eventResultVisitor"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{style:{margin:"0 0 1rem 0",color:"#4a5568",fontSize:"1.125rem"},children:"Value Proposition"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"0.75rem"},children:[(0,a.jsx)(v,{label:"Value Prop Visited",value:s.stats.eventValuePropositionVisited||0,statKey:"eventValuePropositionVisited"}),(0,a.jsx)(v,{label:"Value Prop Purchases",value:s.stats.eventValuePropositionPurchases||0,statKey:"eventValuePropositionPurchases"})]})]})]})]})]})}function c(){let e=(0,o.useParams)().slug,[t,s]=(0,l.useState)(!0),[i,n]=(0,l.useState)(null),[d,c]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let t=async()=>{try{console.log("\uD83D\uDD0D Fetching project for editing with slug:",e);let t=await fetch("/api/projects/edit/".concat(e)),a=await t.json();a.success?(console.log("✅ Found project for editing:",a.project.eventName),c(a.project)):n(a.error||"Project not found"),s(!1)}catch(e){console.error("Failed to fetch project:",e),n("Failed to load project for editing"),s(!1)}};e&&t()},[e]),t)?(0,a.jsxs)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},className:"jsx-d525c98fb358669b",children:[(0,a.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"16px",textAlign:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},className:"jsx-d525c98fb358669b",children:[(0,a.jsx)("div",{style:{width:"50px",height:"50px",border:"4px solid rgba(255, 255, 255, 0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1rem auto"},className:"jsx-d525c98fb358669b"}),(0,a.jsx)("h2",{style:{margin:"0 0 0.5rem 0",fontSize:"1.5rem"},className:"jsx-d525c98fb358669b",children:"Loading Editor"}),(0,a.jsx)("p",{style:{margin:0,opacity:.8},className:"jsx-d525c98fb358669b",children:"Preparing editing interface..."})]}),(0,a.jsx)(r(),{id:"d525c98fb358669b",children:"@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}"})]}):i?(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',padding:"2rem"},children:(0,a.jsxs)("div",{style:{background:"rgba(220, 38, 38, 0.1)",backdropFilter:"blur(10px)",padding:"2rem",borderRadius:"16px",textAlign:"center",border:"1px solid rgba(220, 38, 38, 0.2)",maxWidth:"600px"},children:[(0,a.jsx)("h1",{style:{margin:"0 0 1rem 0",fontSize:"2rem"},children:"❌ Access Error"}),(0,a.jsx)("p",{style:{margin:"0.5rem 0",fontSize:"1.125rem",opacity:.9},children:i}),(0,a.jsx)("p",{style:{margin:"0.5rem 0",opacity:.8},children:"The editing link you're trying to access might not exist or may have been removed."}),(0,a.jsx)("button",{onClick:()=>window.close(),style:{background:"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"1rem",marginTop:"1rem",backdropFilter:"blur(10px)"},children:"✕ Close Editor"})]})}):d?(0,a.jsx)(m,{project:d}):null}}},e=>{e.O(0,[156,441,964,358],()=>e(e.s=4238)),_N_E=e.O()}]);