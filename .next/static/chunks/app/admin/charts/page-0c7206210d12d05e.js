(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{7505:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>x});var i=s(5155),r=s(9137),t=s.n(r),d=s(5594),n=s(376),l=s(2115);let o=[{name:"REMOTE_IMAGES",displayName:"Remote Images",category:"Images",description:"Number of images taken remotely",exampleUsage:"[REMOTE_IMAGES] * 2"},{name:"HOSTESS_IMAGES",displayName:"Hostess Images",category:"Images",description:"Number of images taken by hostess",exampleUsage:"[HOSTESS_IMAGES] + [SELFIES]"},{name:"SELFIES",displayName:"Selfies",category:"Images",description:"Number of selfie images",exampleUsage:"[SELFIES] / 2"},{name:"APPROVED_IMAGES",displayName:"Approved Images",category:"Images",description:"Number of approved images",exampleUsage:"[APPROVED_IMAGES] - [REJECTED_IMAGES]"},{name:"REJECTED_IMAGES",displayName:"Rejected Images",category:"Images",description:"Number of rejected images",exampleUsage:"[REJECTED_IMAGES] * 0.5"},{name:"INDOOR",displayName:"Indoor Fans",category:"Location",description:"Number of indoor fans",exampleUsage:"[INDOOR] + [OUTDOOR]"},{name:"OUTDOOR",displayName:"Outdoor Fans",category:"Location",description:"Number of outdoor fans",exampleUsage:"[OUTDOOR] * 1.2"},{name:"STADIUM",displayName:"Stadium Fans",category:"Location",description:"Number of stadium fans",exampleUsage:"[STADIUM] / ([INDOOR] + [OUTDOOR] + [STADIUM])"},{name:"FEMALE",displayName:"Female Attendees",category:"Demographics",description:"Number of female attendees",exampleUsage:"[FEMALE] / ([FEMALE] + [MALE])"},{name:"MALE",displayName:"Male Attendees",category:"Demographics",description:"Number of male attendees",exampleUsage:"[MALE] * 100"},{name:"GEN_ALPHA",displayName:"Gen Alpha",category:"Demographics",description:"Number of Generation Alpha attendees",exampleUsage:"[GEN_ALPHA] + [GEN_YZ]"},{name:"GEN_YZ",displayName:"Gen Y+Z",category:"Demographics",description:"Number of Generation Y+Z attendees",exampleUsage:"[GEN_YZ] * 1.5"},{name:"GEN_X",displayName:"Gen X",category:"Demographics",description:"Number of Generation X attendees",exampleUsage:"[GEN_X] + [BOOMER]"},{name:"BOOMER",displayName:"Boomer",category:"Demographics",description:"Number of Boomer attendees",exampleUsage:"[BOOMER] / 2"},{name:"MERCHED",displayName:"Merched Fans",category:"Merchandise",description:"Number of fans with merchandise",exampleUsage:"[MERCHED] / ([INDOOR] + [OUTDOOR] + [STADIUM])"},{name:"JERSEY",displayName:"Jersey Sales",category:"Merchandise",description:"Number of jersey merchandise items",exampleUsage:"[JERSEY] * 25"},{name:"SCARF",displayName:"Scarf Sales",category:"Merchandise",description:"Number of scarf merchandise items",exampleUsage:"[SCARF] + [FLAGS]"},{name:"FLAGS",displayName:"Flag Sales",category:"Merchandise",description:"Number of flag merchandise items",exampleUsage:"[FLAGS] * 15"},{name:"BASEBALL_CAP",displayName:"Baseball Cap Sales",category:"Merchandise",description:"Number of baseball cap merchandise items",exampleUsage:"[BASEBALL_CAP] * 20"},{name:"OTHER",displayName:"Other Merchandise",category:"Merchandise",description:"Number of other merchandise items",exampleUsage:"[OTHER] * 10"},{name:"VISIT_QR_CODE",displayName:"QR Code Visits",category:"Engagement",description:"Number of QR code visits",exampleUsage:"[VISIT_QR_CODE] + [VISIT_SHORT_URL]"},{name:"VISIT_SHORT_URL",displayName:"Short URL Visits",category:"Engagement",description:"Number of short URL visits",exampleUsage:"[VISIT_SHORT_URL] * 2"},{name:"VISIT_WEB",displayName:"Web Visits",category:"Engagement",description:"Number of web visits",exampleUsage:"[VISIT_WEB] + [VISIT_QR_CODE]"},{name:"VISIT_FACEBOOK",displayName:"Facebook Visits",category:"Social Media",description:"Number of Facebook visits",exampleUsage:"[VISIT_FACEBOOK] * 1.5"},{name:"VISIT_INSTAGRAM",displayName:"Instagram Visits",category:"Social Media",description:"Number of Instagram visits",exampleUsage:"[VISIT_INSTAGRAM] + [VISIT_TIKTOK]"},{name:"VISIT_YOUTUBE",displayName:"YouTube Visits",category:"Social Media",description:"Number of YouTube visits",exampleUsage:"[VISIT_YOUTUBE] / 2"},{name:"VISIT_TIKTOK",displayName:"TikTok Visits",category:"Social Media",description:"Number of TikTok visits",exampleUsage:"[VISIT_TIKTOK] * 3"},{name:"VISIT_X",displayName:"X (Twitter) Visits",category:"Social Media",description:"Number of X (Twitter) visits",exampleUsage:"[VISIT_X] + [VISIT_FACEBOOK]"},{name:"VISIT_TRUSTPILOT",displayName:"Trustpilot Visits",category:"Engagement",description:"Number of Trustpilot visits",exampleUsage:"[VISIT_TRUSTPILOT] * 10"},{name:"EVENT_ATTENDEES",displayName:"Event Attendees",category:"Event",description:"Total number of event attendees",exampleUsage:"[EVENT_ATTENDEES] * 0.1"},{name:"EVENT_TICKET_PURCHASES",displayName:"Ticket Purchases",category:"Event",description:"Number of ticket purchases",exampleUsage:"[EVENT_TICKET_PURCHASES] / [EVENT_ATTENDEES]"},{name:"EVENT_RESULT_HOME",displayName:"Home Team Result",category:"Event",description:"Home team result/score",exampleUsage:"[EVENT_RESULT_HOME] - [EVENT_RESULT_VISITOR]"},{name:"EVENT_RESULT_VISITOR",displayName:"Visitor Team Result",category:"Event",description:"Visitor team result/score",exampleUsage:"[EVENT_RESULT_VISITOR] + [EVENT_RESULT_HOME]"},{name:"EVENT_VALUE_PROPOSITION_VISITED",displayName:"Value Proposition Visited",category:"Event",description:"Number of value proposition page visits",exampleUsage:"[EVENT_VALUE_PROPOSITION_VISITED] * 15"},{name:"EVENT_VALUE_PROPOSITION_PURCHASES",displayName:"Value Proposition Purchases",category:"Event",description:"Number of value proposition purchases",exampleUsage:"[EVENT_VALUE_PROPOSITION_PURCHASES] / [EVENT_VALUE_PROPOSITION_VISITED]"},{name:"JERSEY_PRICE",displayName:"Jersey Unit Price",category:"Merchandise Pricing",description:"Price per jersey in EUR",exampleUsage:"[JERSEY] * [JERSEY_PRICE]"},{name:"SCARF_PRICE",displayName:"Scarf Unit Price",category:"Merchandise Pricing",description:"Price per scarf in EUR",exampleUsage:"[SCARF] * [SCARF_PRICE]"},{name:"FLAGS_PRICE",displayName:"Flag Unit Price",category:"Merchandise Pricing",description:"Price per flag in EUR",exampleUsage:"[FLAGS] * [FLAGS_PRICE]"},{name:"CAP_PRICE",displayName:"Baseball Cap Unit Price",category:"Merchandise Pricing",description:"Price per baseball cap in EUR",exampleUsage:"[BASEBALL_CAP] * [CAP_PRICE]"},{name:"OTHER_PRICE",displayName:"Other Merchandise Unit Price",category:"Merchandise Pricing",description:"Average price for other merchandise items in EUR",exampleUsage:"[OTHER] * [OTHER_PRICE]"}];function c(e){let{}=e,[a,s]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[c,x]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[b,p]=(0,l.useState)(null),[h,j]=(0,l.useState)(""),[u,N]=(0,l.useState)("All"),[y,E]=(0,l.useState)(o);(0,l.useEffect)(()=>{v()},[]),(0,l.useEffect)(()=>{let e=o;"All"!==u&&(e=e.filter(e=>e.category===u)),h&&(e=e.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.displayName.toLowerCase().includes(h.toLowerCase())||e.description.toLowerCase().includes(h.toLowerCase()))),E(e)},[h,u]);let v=async()=>{try{console.log("\uD83D\uDD04 Loading chart configurations...");let e=await fetch("/api/chart-config"),a=await e.json();a.success?(console.log("✅ Chart configurations loaded:",a.configurations.length),s(a.configurations.sort((e,a)=>e.order-a.order))):console.error("❌ Failed to load configurations:",a.error)}catch(e){console.error("❌ Error loading configurations:",e)}finally{n(!1)}},T=async e=>{try{let a=!!e._id,s=a?(0,d._)({configurationId:e._id},e):e;console.log("".concat(a?"\uD83D\uDD04 Updating":"\uD83D\uDCBE Creating"," chart configuration:"),e.chartId);let i=await fetch("/api/chart-config",{method:a?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await i.json();r.success?(console.log("✅ Chart configuration ".concat(a?"updated":"created"," successfully")),await v(),x(!1),p(null)):alert("Failed to ".concat(a?"update":"create"," configuration: ").concat(r.error))}catch(e){console.error("❌ Error saving configuration:",e),alert("Failed to save configuration. Please try again.")}},S=async(e,a)=>{if(confirm('Are you sure you want to delete the "'.concat(a,'" chart configuration?')))try{console.log("\uD83D\uDDD1️ Deleting chart configuration:",e);let a=await fetch("/api/chart-config?configurationId=".concat(e),{method:"DELETE"}),s=await a.json();s.success?(console.log("✅ Chart configuration deleted successfully"),await v()):alert("Failed to delete configuration: ".concat(s.error))}catch(e){console.error("❌ Error deleting configuration:",e),alert("Failed to delete configuration. Please try again.")}},I=async e=>{try{let a=await fetch("/api/chart-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configurationId:e._id,isActive:!e.isActive})});(await a.json()).success&&await v()}catch(e){console.error("❌ Error toggling configuration:",e)}},_=async(e,s)=>{let i=a.findIndex(a=>a._id===e);if(-1===i)return;let r="up"===s?i-1:i+1;if(r<0||r>=a.length)return;let t=a[i],d=a[r];try{await Promise.all([fetch("/api/chart-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configurationId:t._id,order:d.order})}),fetch("/api/chart-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configurationId:d._id,order:t.order})})]),await v()}catch(e){console.error("❌ Error reordering configurations:",e)}},C=e=>{e?p({_id:e._id,chartId:e.chartId,title:e.title,type:e.type,order:e.order,isActive:e.isActive,elements:e.elements,emoji:e.emoji,subtitle:e.subtitle,showTotal:e.showTotal,totalLabel:e.totalLabel}):p({chartId:"",title:"",type:"pie",order:Math.max(...a.map(e=>e.order),0)+1,isActive:!0,elements:[{id:"element1",label:"",formula:"",color:"#3b82f6",description:""},{id:"element2",label:"",formula:"",color:"#f59e0b",description:""}],emoji:"\uD83D\uDCCA",showTotal:!1,totalLabel:""}),x(!0)},A=["All",...Array.from(new Set(o.map(e=>e.category)))];return r?(0,i.jsx)("div",{className:"glass-card",children:(0,i.jsx)("div",{className:"loading-spinner",children:"Loading chart configurations..."})}):(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 chart-algorithm-manager",children:[(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 glass-card admin-overview",children:[(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 projects-header",children:[(0,i.jsx)("h2",{className:"jsx-8f643732d2b1e772 section-title",children:"Chart Algorithm Manager"}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 projects-header-buttons",children:[(0,i.jsxs)("button",{onClick:()=>g(!f),className:"jsx-8f643732d2b1e772 btn btn-secondary",children:["\uD83D\uDCDA Variable Reference (",o.length,")"]}),(0,i.jsx)("button",{onClick:()=>C(),className:"jsx-8f643732d2b1e772 btn btn-primary",children:"➕ Add New Chart"})]})]}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 stats-grid-admin",children:[(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:a.length}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Total Charts"})]}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:a.filter(e=>e.isActive).length}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Active Charts"})]}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:a.filter(e=>"pie"===e.type).length}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Pie Charts"})]}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:a.filter(e=>"bar"===e.type).length}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Bar Charts"})]})]})]}),f&&(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 glass-card variable-reference-panel",children:[(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 projects-header",children:[(0,i.jsx)("h3",{className:"jsx-8f643732d2b1e772 section-title",children:"Variable Reference"}),(0,i.jsx)("button",{onClick:()=>g(!1),className:"jsx-8f643732d2b1e772 btn btn-secondary",children:"✕ Close"})]}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-filters",children:[(0,i.jsx)("input",{type:"text",placeholder:"Search variables...",value:h,onChange:e=>j(e.target.value),style:{marginRight:"1rem",maxWidth:"300px"},className:"jsx-8f643732d2b1e772 form-input"}),(0,i.jsx)("select",{value:u,onChange:e=>N(e.target.value),style:{maxWidth:"200px"},className:"jsx-8f643732d2b1e772 form-input",children:A.map(e=>(0,i.jsx)("option",{value:e,className:"jsx-8f643732d2b1e772",children:e},e))})]}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 variables-grid",children:y.map(e=>(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-card",children:[(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-header",children:[(0,i.jsxs)("strong",{className:"jsx-8f643732d2b1e772",children:["[",e.name,"]"]}),(0,i.jsx)("button",{onClick:()=>{var a;return a=e.name,void navigator.clipboard.writeText("[".concat(a,"]"))},title:"Copy to clipboard",className:"jsx-8f643732d2b1e772 btn btn-sm btn-secondary",children:"\uD83D\uDCCB"})]}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 variable-display-name",children:e.displayName}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 variable-category",children:e.category}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 variable-description",children:e.description}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-example",children:[(0,i.jsx)("strong",{className:"jsx-8f643732d2b1e772",children:"Example:"})," ",(0,i.jsx)("code",{className:"jsx-8f643732d2b1e772",children:e.exampleUsage})]})]},e.name))})]}),(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 glass-card admin-projects",children:[(0,i.jsx)("h3",{className:"jsx-8f643732d2b1e772 section-title",children:"Chart Configurations"}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 chart-configs-table-container",children:(0,i.jsxs)("table",{className:"jsx-8f643732d2b1e772 projects-table",children:[(0,i.jsx)("thead",{className:"jsx-8f643732d2b1e772",children:(0,i.jsxs)("tr",{className:"jsx-8f643732d2b1e772",children:[(0,i.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Order"}),(0,i.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Title"}),(0,i.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Type"}),(0,i.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Elements"}),(0,i.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Status"}),(0,i.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Actions"})]})}),(0,i.jsx)("tbody",{className:"jsx-8f643732d2b1e772",children:0===a.length?(0,i.jsx)("tr",{className:"jsx-8f643732d2b1e772",children:(0,i.jsxs)("td",{colSpan:6,className:"jsx-8f643732d2b1e772 admin-empty-state",children:[(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 admin-empty-icon",children:"\uD83D\uDCCA"}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 admin-empty-title",children:"No Chart Configurations Found"}),(0,i.jsx)("div",{className:"jsx-8f643732d2b1e772 admin-empty-subtitle",children:"Create your first chart configuration to get started."})]})}):a.map((e,s)=>(0,i.jsxs)("tr",{className:"jsx-8f643732d2b1e772",children:[(0,i.jsx)("td",{className:"jsx-8f643732d2b1e772 stat-number",children:(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 order-controls",children:[e.order,(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 order-buttons",children:[(0,i.jsx)("button",{onClick:()=>_(e._id,"up"),disabled:0===s,className:"jsx-8f643732d2b1e772 btn btn-xs",children:"↑"}),(0,i.jsx)("button",{onClick:()=>_(e._id,"down"),disabled:s===a.length-1,className:"jsx-8f643732d2b1e772 btn btn-xs",children:"↓"})]})]})}),(0,i.jsx)("td",{className:"jsx-8f643732d2b1e772",children:(0,i.jsxs)("div",{className:"jsx-8f643732d2b1e772 chart-title-cell",children:[e.emoji&&(0,i.jsx)("span",{className:"jsx-8f643732d2b1e772 chart-emoji",children:e.emoji}),(0,i.jsx)("strong",{className:"jsx-8f643732d2b1e772",children:e.title}),(0,i.jsx)("br",{className:"jsx-8f643732d2b1e772"}),(0,i.jsxs)("small",{className:"jsx-8f643732d2b1e772 chart-id",children:["ID: ",e.chartId]})]})}),(0,i.jsx)("td",{className:"jsx-8f643732d2b1e772",children:(0,i.jsx)("span",{className:"jsx-8f643732d2b1e772 "+"chart-type-badge ".concat(e.type),children:"pie"===e.type?"\uD83E\uDD67 Pie":"\uD83D\uDCCA Bar"})}),(0,i.jsx)("td",{className:"jsx-8f643732d2b1e772 stat-number",children:e.elements.length}),(0,i.jsx)("td",{className:"jsx-8f643732d2b1e772",children:(0,i.jsx)("button",{onClick:()=>I(e),className:"jsx-8f643732d2b1e772 "+"btn btn-sm ".concat(e.isActive?"btn-success":"btn-secondary"),children:e.isActive?"✅ Active":"❌ Inactive"})}),(0,i.jsxs)("td",{className:"jsx-8f643732d2b1e772 actions-cell",children:[(0,i.jsx)("button",{onClick:()=>C(e),className:"jsx-8f643732d2b1e772 btn btn-sm btn-info",children:"✏️ Edit"}),(0,i.jsx)("button",{onClick:()=>S(e._id,e.title),className:"jsx-8f643732d2b1e772 btn btn-sm btn-danger",children:"\uD83D\uDDD1️ Delete"})]})]},e._id))})]})})]}),c&&b&&(0,i.jsx)(m,{config:b,onSave:T,onCancel:()=>{x(!1),p(null)}}),(0,i.jsx)(t(),{id:"8f643732d2b1e772",children:".chart-algorithm-manager.jsx-8f643732d2b1e772{display:flex;flex-direction:column;gap:2rem}.variable-reference-panel.jsx-8f643732d2b1e772{max-height:70vh;overflow-y:auto}.variable-filters.jsx-8f643732d2b1e772{display:flex;gap:1rem;margin-bottom:1.5rem;align-items:center}.variables-grid.jsx-8f643732d2b1e772{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem}.variable-card.jsx-8f643732d2b1e772{background:rgba(255,255,255,.8);border-radius:.5rem;padding:1rem;border:1px solid rgba(102,126,234,.1)}.variable-header.jsx-8f643732d2b1e772{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.variable-display-name.jsx-8f643732d2b1e772{font-weight:600;color:#374151;margin-bottom:.25rem}.variable-category.jsx-8f643732d2b1e772{color:#6b7280;font-size:.75rem;margin-bottom:.5rem;text-transform:uppercase;font-weight:500}.variable-description.jsx-8f643732d2b1e772{color:#4b5563;font-size:.875rem;margin-bottom:.5rem}.variable-example.jsx-8f643732d2b1e772{font-size:.75rem;color:#6b7280}.variable-example.jsx-8f643732d2b1e772 code.jsx-8f643732d2b1e772{background:#f3f4f6;padding:.125rem .25rem;border-radius:.25rem;font-family:monospace}.chart-configs-table-container.jsx-8f643732d2b1e772{overflow-x:auto}.order-controls.jsx-8f643732d2b1e772{display:flex;align-items:center;gap:.5rem}.order-buttons.jsx-8f643732d2b1e772{display:flex;flex-direction:column;gap:.125rem}.order-buttons.jsx-8f643732d2b1e772 .btn.jsx-8f643732d2b1e772{padding:.125rem .25rem;font-size:.625rem;min-width:20px}.chart-title-cell.jsx-8f643732d2b1e772{display:flex;flex-direction:column;gap:.25rem}.chart-emoji.jsx-8f643732d2b1e772{font-size:1.25rem;margin-right:.5rem}.chart-id.jsx-8f643732d2b1e772{color:#6b7280;font-family:monospace}.chart-type-badge.jsx-8f643732d2b1e772{padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.chart-type-badge.pie.jsx-8f643732d2b1e772{background:rgba(139,92,246,.1);color:#8b5cf6}.chart-type-badge.bar.jsx-8f643732d2b1e772{background:rgba(59,130,246,.1);color:#3b82f6}.actions-cell.jsx-8f643732d2b1e772{display:flex;gap:.5rem}"})]})}function m(e){let{config:a,onSave:s,onCancel:r}=e,[o,c]=(0,l.useState)(a),m=(e,a,s)=>{let i=[...o.elements];i[e]=(0,n._)((0,d._)({},i[e]),{[a]:s}),c((0,n._)((0,d._)({},o),{elements:i}))};return(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-overlay",children:[(0,i.jsxs)("div",{style:{maxWidth:"800px",maxHeight:"90vh",overflow:"auto"},className:"jsx-4d90e9a7f6d35918 modal-content glass-card",children:[(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-header",children:[(0,i.jsx)("h3",{className:"jsx-4d90e9a7f6d35918",children:a._id?"Edit Chart Configuration":"Create Chart Configuration"}),(0,i.jsx)("button",{onClick:r,className:"jsx-4d90e9a7f6d35918 btn btn-secondary",children:"✕"})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-body",children:[(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-grid",children:[(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,i.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Chart ID"}),(0,i.jsx)("input",{type:"text",value:o.chartId,onChange:e=>c((0,n._)((0,d._)({},o),{chartId:e.target.value})),placeholder:"e.g., gender-distribution",className:"jsx-4d90e9a7f6d35918 form-input"})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,i.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Title"}),(0,i.jsx)("input",{type:"text",value:o.title,onChange:e=>c((0,n._)((0,d._)({},o),{title:e.target.value})),placeholder:"e.g., Gender Distribution",className:"jsx-4d90e9a7f6d35918 form-input"})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,i.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Type"}),(0,i.jsxs)("select",{value:o.type,onChange:e=>c((0,n._)((0,d._)({},o),{type:e.target.value})),className:"jsx-4d90e9a7f6d35918 form-input",children:[(0,i.jsx)("option",{value:"pie",className:"jsx-4d90e9a7f6d35918",children:"Pie Chart (2 elements)"}),(0,i.jsx)("option",{value:"bar",className:"jsx-4d90e9a7f6d35918",children:"Bar Chart (5 elements)"})]})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,i.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Order"}),(0,i.jsx)("input",{type:"number",value:o.order,onChange:e=>c((0,n._)((0,d._)({},o),{order:parseInt(e.target.value)||1})),min:"1",className:"jsx-4d90e9a7f6d35918 form-input"})]})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,i.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Elements"}),o.elements.map((e,a)=>(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 element-editor",children:[(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 element-header",children:[(0,i.jsxs)("strong",{className:"jsx-4d90e9a7f6d35918",children:["Element ",a+1]}),o.elements.length>1&&(0,i.jsx)("button",{onClick:()=>(e=>{if(o.elements.length>1){let a=o.elements.filter((a,s)=>s!==e);c((0,n._)((0,d._)({},o),{elements:a}))}})(a),className:"jsx-4d90e9a7f6d35918 btn btn-xs btn-danger",children:"Remove"})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 element-fields",children:[(0,i.jsx)("input",{type:"text",placeholder:"Label",value:e.label,onChange:e=>m(a,"label",e.target.value),className:"jsx-4d90e9a7f6d35918 form-input"}),(0,i.jsx)("input",{type:"text",placeholder:"Formula (e.g., [FEMALE] + [MALE])",value:e.formula,onChange:e=>m(a,"formula",e.target.value),className:"jsx-4d90e9a7f6d35918 form-input formula-input"}),(0,i.jsx)("input",{type:"color",value:e.color,onChange:e=>m(a,"color",e.target.value),className:"jsx-4d90e9a7f6d35918 color-input"})]})]},e.id)),o.elements.length<5&&(0,i.jsx)("button",{onClick:()=>{o.elements.length<5&&c((0,n._)((0,d._)({},o),{elements:[...o.elements,{id:"element".concat(o.elements.length+1),label:"",formula:"",color:"#6b7280",description:""}]}))},className:"jsx-4d90e9a7f6d35918 btn btn-secondary",children:"+ Add Element"})]})]}),(0,i.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-footer",children:[(0,i.jsx)("button",{onClick:r,className:"jsx-4d90e9a7f6d35918 btn btn-secondary",children:"Cancel"}),(0,i.jsxs)("button",{onClick:()=>{if(!o.chartId||!o.title)return void alert("Please fill in Chart ID and Title");s(o)},className:"jsx-4d90e9a7f6d35918 btn btn-primary",children:[a._id?"Update":"Create"," Chart"]})]})]}),(0,i.jsx)(t(),{id:"4d90e9a7f6d35918",children:'.modal-overlay.jsx-4d90e9a7f6d35918{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal-content.jsx-4d90e9a7f6d35918{width:100%;padding:2rem;background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:1rem;box-shadow:0 25px 50px -12px rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.2);color:#1f2937}.modal-header.jsx-4d90e9a7f6d35918{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.modal-header.jsx-4d90e9a7f6d35918 h3.jsx-4d90e9a7f6d35918{color:#1f2937;font-size:1.5rem;font-weight:600;margin:0}.modal-body.jsx-4d90e9a7f6d35918{margin-bottom:2rem}.modal-footer.jsx-4d90e9a7f6d35918{display:flex;gap:1rem;justify-content:flex-end}.form-grid.jsx-4d90e9a7f6d35918{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:2rem}.form-group.jsx-4d90e9a7f6d35918{display:flex;flex-direction:column}.form-label.jsx-4d90e9a7f6d35918{color:#374151;font-weight:500;margin-bottom:.5rem;font-size:.875rem}.form-input.jsx-4d90e9a7f6d35918{padding:.75rem;border:1px solid#d1d5db;border-radius:.5rem;background:white;color:#1f2937;font-size:.875rem}.form-input.jsx-4d90e9a7f6d35918:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1)}.element-editor.jsx-4d90e9a7f6d35918{border:1px solid#e5e7eb;border-radius:.5rem;padding:1rem;margin-bottom:1rem;background:rgba(249,250,251,.8)}.element-header.jsx-4d90e9a7f6d35918{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.element-header.jsx-4d90e9a7f6d35918 strong.jsx-4d90e9a7f6d35918{color:#374151;font-weight:600}.element-fields.jsx-4d90e9a7f6d35918{display:grid;grid-template-columns:1fr 2fr 60px;gap:.5rem;align-items:center}.formula-input.jsx-4d90e9a7f6d35918{font-family:"Monaco","Menlo","Ubuntu Mono",monospace;background:#f8fafc;border:1px solid#cbd5e1;color:#1e293b}.formula-input.jsx-4d90e9a7f6d35918:focus{background:white;border-color:#667eea}.color-input.jsx-4d90e9a7f6d35918{width:50px;height:38px;border:1px solid#d1d5db;border-radius:.25rem;cursor:pointer}.btn.jsx-4d90e9a7f6d35918{padding:.5rem 1rem;border-radius:.5rem;font-weight:500;cursor:pointer;transition:all.2s;border:none;font-size:.875rem}.btn-primary.jsx-4d90e9a7f6d35918{background:#667eea;color:white}.btn-primary.jsx-4d90e9a7f6d35918:hover{background:#5a67d8}.btn-secondary.jsx-4d90e9a7f6d35918{background:#6b7280;color:white}.btn-secondary.jsx-4d90e9a7f6d35918:hover{background:#4b5563}.btn-xs.jsx-4d90e9a7f6d35918{padding:.25rem .5rem;font-size:.75rem}.btn-danger.jsx-4d90e9a7f6d35918{background:#ef4444;color:white}.btn-danger.jsx-4d90e9a7f6d35918:hover{background:#dc2626}'})]})}function x(){let[e,a]=(0,l.useState)(null),[s,r]=(0,l.useState)(!0),[d,n]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/check"),s=await e.json();if(!s.authenticated){window.location.href="/admin/login";return}a(s.user),n("admin"===s.user.role||"super-admin"===s.user.role),r(!1)}catch(e){console.error("Auth check failed:",e),window.location.href="/admin/login"}}()},[]),s)?(0,i.jsx)("div",{className:"admin-container",children:(0,i.jsx)("div",{className:"glass-card",children:(0,i.jsx)("div",{className:"loading-spinner",children:"Checking authentication..."})})}):d?(0,i.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-container",children:[(0,i.jsx)("div",{className:"jsx-36226907ae7dc69d glass-card admin-header",children:(0,i.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-header-content",children:[(0,i.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-branding",children:[(0,i.jsx)("h1",{className:"jsx-36226907ae7dc69d admin-title",children:"MessMass Admin"}),(0,i.jsx)("p",{className:"jsx-36226907ae7dc69d admin-subtitle",children:"Chart Algorithm Manager"})]}),(0,i.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-user-info",children:[(0,i.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-badge",children:[(0,i.jsx)("p",{className:"jsx-36226907ae7dc69d admin-role",children:null==e?void 0:e.name}),(0,i.jsx)("p",{className:"jsx-36226907ae7dc69d admin-level",children:null==e?void 0:e.role}),(0,i.jsx)("p",{className:"jsx-36226907ae7dc69d admin-status",children:"✓ Authenticated"})]}),(0,i.jsx)("a",{href:"/admin",className:"jsx-36226907ae7dc69d btn btn-secondary",children:"← Back to Dashboard"})]})]})}),(0,i.jsx)(c,{}),(0,i.jsx)(t(),{id:"36226907ae7dc69d",children:".admin-container.jsx-36226907ae7dc69d{min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:2rem}.loading-spinner.jsx-36226907ae7dc69d{text-align:center;padding:3rem;font-size:1.125rem;color:#4a5568}.admin-access-denied.jsx-36226907ae7dc69d{text-align:center;padding:3rem}.admin-access-denied.jsx-36226907ae7dc69d h2.jsx-36226907ae7dc69d{color:#dc2626;margin-bottom:1rem}.admin-access-denied.jsx-36226907ae7dc69d p.jsx-36226907ae7dc69d{color:#4a5568;margin-bottom:.5rem}.admin-header.jsx-36226907ae7dc69d{margin-bottom:2rem}.admin-header-content.jsx-36226907ae7dc69d{display:flex;justify-content:space-between;align-items:center}.admin-branding.jsx-36226907ae7dc69d h1.jsx-36226907ae7dc69d{font-size:2rem;font-weight:bold;color:#1a202c;margin:0}.admin-branding.jsx-36226907ae7dc69d p.jsx-36226907ae7dc69d{color:#4a5568;margin:0;font-size:1rem}.admin-user-info.jsx-36226907ae7dc69d{display:flex;align-items:center;gap:1rem}.admin-badge.jsx-36226907ae7dc69d{text-align:right}.admin-badge.jsx-36226907ae7dc69d p.jsx-36226907ae7dc69d{margin:0;font-size:.875rem}.admin-role.jsx-36226907ae7dc69d{font-weight:600;color:#1a202c}.admin-level.jsx-36226907ae7dc69d{color:#667eea;text-transform:uppercase;font-weight:500}.admin-status.jsx-36226907ae7dc69d{color:#48bb78;font-weight:500}"})]}):(0,i.jsx)("div",{className:"admin-container",children:(0,i.jsx)("div",{className:"glass-card",children:(0,i.jsxs)("div",{className:"admin-access-denied",children:[(0,i.jsx)("h2",{children:"Access Denied"}),(0,i.jsx)("p",{children:"You don't have permission to access the Chart Algorithm Manager."}),(0,i.jsx)("p",{children:"Only administrators can manage chart configurations."}),(0,i.jsx)("a",{href:"/admin",className:"btn btn-primary",children:"← Back to Admin Dashboard"})]})})})}},9127:(e,a,s)=>{Promise.resolve().then(s.bind(s,7505))}},e=>{e.O(0,[598,441,964,358],()=>e(e.s=9127)),_N_E=e.O()}]);