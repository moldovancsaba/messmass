(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{2269:(e,t,s)=>{"use strict";var a=s(9509);s(8375);var r=s(2115),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r),i=void 0!==a&&a.env&&!0,d=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,s=t.name,a=void 0===s?"stylesheet":s,r=t.optimizeForSpeed,n=void 0===r?i:r;l(d(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",l("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(l(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(l(d(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(a){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];l(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},s.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];l(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&l(d(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var r=document.head||document.getElementsByTagName("head")[0];return s?r.insertBefore(a,s):r.appendChild(a),a},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,t),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},m={};function h(e,t){if(!t)return"jsx-"+e;var s=String(t),a=e+s;return m[a]||(m[a]="jsx-"+c(e+"-"+s)),m[a]}function f(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return m[s]||(m[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),m[s]}var u=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,a=void 0===s?null:s,r=t.optimizeForSpeed,n=void 0!==r&&r;this._sheet=a||new o({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),a&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),a=s.styleId,r=s.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var n=r.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=n,this._instancesCounts[a]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var a=this._fromServer&&this._fromServer[s];a?(a.parentNode.removeChild(a),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],a=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,a=e.id;if(s){var r=h(a,s);return{styleId:r,rules:Array.isArray(t)?t.map(function(e){return f(r,e)}):[f(r,t)]}}return{styleId:h(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=r.createContext(null);x.displayName="StyleSheetContext";var j=n.default.useInsertionEffect||n.default.useLayoutEffect,b="undefined"!=typeof window?new u:void 0;function p(e){var t=b||r.useContext(x);return t&&("undefined"==typeof window?t.add(e):j(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}p.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=p},8375:()=>{},8386:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),r=s(9137),n=s.n(r),i=s(5594),d=s(376),o=s(2115),l=s(8697);function c(e){let{}=e,[t,s]=(0,o.useState)([]),[r,d]=(0,o.useState)(!0),[c,h]=(0,o.useState)(!1),[f,u]=(0,o.useState)(!1),[x,j]=(0,o.useState)(null),[b,p]=(0,o.useState)(""),[g,v]=(0,o.useState)("All"),[y,N]=(0,o.useState)(l.Y);(0,o.useEffect)(()=>{_()},[]),(0,o.useEffect)(()=>{let e=l.Y;"All"!==g&&(e=e.filter(e=>e.category===g)),b&&(e=e.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.displayName.toLowerCase().includes(b.toLowerCase())||e.description.toLowerCase().includes(b.toLowerCase()))),N(e)},[b,g]);let _=async()=>{try{console.log("\uD83D\uDD04 Loading chart configurations...");let e=await fetch("/api/chart-config"),t=await e.json();t.success?(console.log("✅ Chart configurations loaded:",t.configurations.length),s(t.configurations.sort((e,t)=>e.order-t.order))):console.error("❌ Failed to load configurations:",t.error)}catch(e){console.error("❌ Error loading configurations:",e)}finally{d(!1)}},S=async e=>{try{let t=!!e._id,s=t?(0,i._)({configurationId:e._id},e):e;console.log("".concat(t?"\uD83D\uDD04 Updating":"\uD83D\uDCBE Creating"," chart configuration:"),e.chartId);let a=await fetch("/api/chart-config",{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),r=await a.json();r.success?(console.log("✅ Chart configuration ".concat(t?"updated":"created"," successfully")),await _(),h(!1),j(null)):alert("Failed to ".concat(t?"update":"create"," configuration: ").concat(r.error))}catch(e){console.error("❌ Error saving configuration:",e),alert("Failed to save configuration. Please try again.")}},w=async(e,t)=>{if(confirm('Are you sure you want to delete the "'.concat(t,'" chart configuration?')))try{console.log("\uD83D\uDDD1️ Deleting chart configuration:",e);let t=await fetch("/api/chart-config?configurationId=".concat(e),{method:"DELETE"}),s=await t.json();s.success?(console.log("✅ Chart configuration deleted successfully"),await _()):alert("Failed to delete configuration: ".concat(s.error))}catch(e){console.error("❌ Error deleting configuration:",e),alert("Failed to delete configuration. Please try again.")}},C=async e=>{try{let t=await fetch("/api/chart-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configurationId:e._id,isActive:!e.isActive})});(await t.json()).success&&await _()}catch(e){console.error("❌ Error toggling configuration:",e)}},k=async(e,s)=>{let a=t.findIndex(t=>t._id===e);if(-1===a)return;let r="up"===s?a-1:a+1;if(r<0||r>=t.length)return;let n=t[a],i=t[r];try{await Promise.all([fetch("/api/chart-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configurationId:n._id,order:i.order})}),fetch("/api/chart-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({configurationId:i._id,order:n.order})})]),await _()}catch(e){console.error("❌ Error reordering configurations:",e)}},A=e=>{e?j({_id:e._id,chartId:e.chartId,title:e.title,type:e.type,order:e.order,isActive:e.isActive,elements:e.elements,emoji:e.emoji,subtitle:e.subtitle,showTotal:e.showTotal,totalLabel:e.totalLabel}):j({chartId:"",title:"",type:"pie",order:Math.max(...t.map(e=>e.order),0)+1,isActive:!0,elements:[{id:"element1",label:"",formula:"",color:"#3b82f6",description:""},{id:"element2",label:"",formula:"",color:"#f59e0b",description:""}],emoji:"\uD83D\uDCCA",showTotal:!1,totalLabel:""}),h(!0)},z=["All",...Array.from(new Set(l.Y.map(e=>e.category)))];return r?(0,a.jsx)("div",{className:"glass-card",children:(0,a.jsx)("div",{className:"loading-spinner",children:"Loading chart configurations..."})}):(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 chart-algorithm-manager",children:[(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 glass-card admin-overview",children:[(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 projects-header",children:[(0,a.jsx)("h2",{className:"jsx-8f643732d2b1e772 section-title",children:"Chart Algorithm Manager"}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 projects-header-buttons",children:[(0,a.jsxs)("button",{onClick:()=>u(!f),className:"jsx-8f643732d2b1e772 btn btn-secondary",children:["\uD83D\uDCDA Variable Reference (",l.Y.length,")"]}),(0,a.jsx)("button",{onClick:()=>A(),className:"jsx-8f643732d2b1e772 btn btn-primary",children:"➕ Add New Chart"})]})]}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 stats-grid-admin",children:[(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:t.length}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Total Charts"})]}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:t.filter(e=>e.isActive).length}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Active Charts"})]}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:t.filter(e=>"pie"===e.type).length}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Pie Charts"})]}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 stat-card-admin",children:[(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-value-admin",children:t.filter(e=>"bar"===e.type).length}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 stat-label-admin",children:"Bar Charts"})]})]})]}),f&&(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 glass-card variable-reference-panel",children:[(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 projects-header",children:[(0,a.jsx)("h3",{className:"jsx-8f643732d2b1e772 section-title",children:"Variable Reference"}),(0,a.jsx)("button",{onClick:()=>u(!1),className:"jsx-8f643732d2b1e772 btn btn-secondary",children:"✕ Close"})]}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-filters",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search variables...",value:b,onChange:e=>p(e.target.value),style:{marginRight:"1rem",maxWidth:"300px"},className:"jsx-8f643732d2b1e772 form-input"}),(0,a.jsx)("select",{value:g,onChange:e=>v(e.target.value),style:{maxWidth:"200px"},className:"jsx-8f643732d2b1e772 form-input",children:z.map(e=>(0,a.jsx)("option",{value:e,className:"jsx-8f643732d2b1e772",children:e},e))})]}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 variables-grid",children:y.map(e=>(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-card",children:[(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-header",children:[(0,a.jsxs)("strong",{className:"jsx-8f643732d2b1e772",children:["[",e.name,"]"]}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.name,void navigator.clipboard.writeText("[".concat(t,"]"))},title:"Copy to clipboard",className:"jsx-8f643732d2b1e772 btn btn-sm btn-secondary",children:"\uD83D\uDCCB"})]}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 variable-display-name",children:e.displayName}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 variable-category",children:e.category}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 variable-description",children:e.description}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 variable-example",children:[(0,a.jsx)("strong",{className:"jsx-8f643732d2b1e772",children:"Example:"})," ",(0,a.jsx)("code",{className:"jsx-8f643732d2b1e772",children:e.exampleUsage})]})]},e.name))})]}),(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 glass-card admin-projects",children:[(0,a.jsx)("h3",{className:"jsx-8f643732d2b1e772 section-title",children:"Chart Configurations"}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 chart-configs-table-container",children:(0,a.jsxs)("table",{className:"jsx-8f643732d2b1e772 projects-table",children:[(0,a.jsx)("thead",{className:"jsx-8f643732d2b1e772",children:(0,a.jsxs)("tr",{className:"jsx-8f643732d2b1e772",children:[(0,a.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Order"}),(0,a.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Title"}),(0,a.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Type"}),(0,a.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Elements"}),(0,a.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Status"}),(0,a.jsx)("th",{className:"jsx-8f643732d2b1e772",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"jsx-8f643732d2b1e772",children:0===t.length?(0,a.jsx)("tr",{className:"jsx-8f643732d2b1e772",children:(0,a.jsxs)("td",{colSpan:6,className:"jsx-8f643732d2b1e772 admin-empty-state",children:[(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 admin-empty-icon",children:"\uD83D\uDCCA"}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 admin-empty-title",children:"No Chart Configurations Found"}),(0,a.jsx)("div",{className:"jsx-8f643732d2b1e772 admin-empty-subtitle",children:"Create your first chart configuration to get started."})]})}):t.map((e,s)=>(0,a.jsxs)("tr",{className:"jsx-8f643732d2b1e772",children:[(0,a.jsx)("td",{className:"jsx-8f643732d2b1e772 stat-number",children:(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 order-controls",children:[e.order,(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 order-buttons",children:[(0,a.jsx)("button",{onClick:()=>k(e._id,"up"),disabled:0===s,className:"jsx-8f643732d2b1e772 btn btn-xs",children:"↑"}),(0,a.jsx)("button",{onClick:()=>k(e._id,"down"),disabled:s===t.length-1,className:"jsx-8f643732d2b1e772 btn btn-xs",children:"↓"})]})]})}),(0,a.jsx)("td",{className:"jsx-8f643732d2b1e772",children:(0,a.jsxs)("div",{className:"jsx-8f643732d2b1e772 chart-title-cell",children:[e.emoji&&(0,a.jsx)("span",{className:"jsx-8f643732d2b1e772 chart-emoji",children:e.emoji}),(0,a.jsx)("strong",{className:"jsx-8f643732d2b1e772",children:e.title}),(0,a.jsx)("br",{className:"jsx-8f643732d2b1e772"}),(0,a.jsxs)("small",{className:"jsx-8f643732d2b1e772 chart-id",children:["ID: ",e.chartId]})]})}),(0,a.jsx)("td",{className:"jsx-8f643732d2b1e772",children:(0,a.jsx)("span",{className:"jsx-8f643732d2b1e772 "+"chart-type-badge ".concat(e.type),children:"pie"===e.type?"\uD83E\uDD67 Pie":"\uD83D\uDCCA Bar"})}),(0,a.jsx)("td",{className:"jsx-8f643732d2b1e772 stat-number",children:e.elements.length}),(0,a.jsx)("td",{className:"jsx-8f643732d2b1e772",children:(0,a.jsx)("button",{onClick:()=>C(e),className:"jsx-8f643732d2b1e772 "+"btn btn-sm ".concat(e.isActive?"btn-success":"btn-secondary"),children:e.isActive?"✅ Active":"❌ Inactive"})}),(0,a.jsxs)("td",{className:"jsx-8f643732d2b1e772 actions-cell",children:[(0,a.jsx)("button",{onClick:()=>A(e),className:"jsx-8f643732d2b1e772 btn btn-sm btn-info",children:"✏️ Edit"}),(0,a.jsx)("button",{onClick:()=>w(e._id,e.title),className:"jsx-8f643732d2b1e772 btn btn-sm btn-danger",children:"\uD83D\uDDD1️ Delete"})]})]},e._id))})]})})]}),c&&x&&(0,a.jsx)(m,{config:x,onSave:S,onCancel:()=>{h(!1),j(null)}}),(0,a.jsx)(n(),{id:"8f643732d2b1e772",children:".chart-algorithm-manager.jsx-8f643732d2b1e772{display:flex;flex-direction:column;gap:2rem}.variable-reference-panel.jsx-8f643732d2b1e772{max-height:70vh;overflow-y:auto}.variable-filters.jsx-8f643732d2b1e772{display:flex;gap:1rem;margin-bottom:1.5rem;align-items:center}.variables-grid.jsx-8f643732d2b1e772{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1rem}.variable-card.jsx-8f643732d2b1e772{background:rgba(255,255,255,.8);border-radius:.5rem;padding:1rem;border:1px solid rgba(102,126,234,.1)}.variable-header.jsx-8f643732d2b1e772{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.variable-display-name.jsx-8f643732d2b1e772{font-weight:600;color:#374151;margin-bottom:.25rem}.variable-category.jsx-8f643732d2b1e772{color:#6b7280;font-size:.75rem;margin-bottom:.5rem;text-transform:uppercase;font-weight:500}.variable-description.jsx-8f643732d2b1e772{color:#4b5563;font-size:.875rem;margin-bottom:.5rem}.variable-example.jsx-8f643732d2b1e772{font-size:.75rem;color:#6b7280}.variable-example.jsx-8f643732d2b1e772 code.jsx-8f643732d2b1e772{background:#f3f4f6;padding:.125rem .25rem;border-radius:.25rem;font-family:monospace}.chart-configs-table-container.jsx-8f643732d2b1e772{overflow-x:auto}.order-controls.jsx-8f643732d2b1e772{display:flex;align-items:center;gap:.5rem}.order-buttons.jsx-8f643732d2b1e772{display:flex;flex-direction:column;gap:.125rem}.order-buttons.jsx-8f643732d2b1e772 .btn.jsx-8f643732d2b1e772{padding:.125rem .25rem;font-size:.625rem;min-width:20px}.chart-title-cell.jsx-8f643732d2b1e772{display:flex;flex-direction:column;gap:.25rem}.chart-emoji.jsx-8f643732d2b1e772{font-size:1.25rem;margin-right:.5rem}.chart-id.jsx-8f643732d2b1e772{color:#6b7280;font-family:monospace}.chart-type-badge.jsx-8f643732d2b1e772{padding:.25rem .5rem;border-radius:.25rem;font-size:.75rem;font-weight:500}.chart-type-badge.pie.jsx-8f643732d2b1e772{background:rgba(139,92,246,.1);color:#8b5cf6}.chart-type-badge.bar.jsx-8f643732d2b1e772{background:rgba(59,130,246,.1);color:#3b82f6}.actions-cell.jsx-8f643732d2b1e772{display:flex;gap:.5rem}"})]})}function m(e){let{config:t,onSave:s,onCancel:r}=e,[l,c]=(0,o.useState)(t),m=(e,t,s)=>{let a=[...l.elements];a[e]=(0,d._)((0,i._)({},a[e]),{[t]:s}),c((0,d._)((0,i._)({},l),{elements:a}))};return(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-overlay",children:[(0,a.jsxs)("div",{style:{maxWidth:"800px",maxHeight:"90vh",overflow:"auto"},className:"jsx-4d90e9a7f6d35918 modal-content glass-card",children:[(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-header",children:[(0,a.jsx)("h3",{className:"jsx-4d90e9a7f6d35918",children:t._id?"Edit Chart Configuration":"Create Chart Configuration"}),(0,a.jsx)("button",{onClick:r,className:"jsx-4d90e9a7f6d35918 btn btn-secondary",children:"✕"})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-body",children:[(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-grid",children:[(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,a.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Chart ID"}),(0,a.jsx)("input",{type:"text",value:l.chartId,onChange:e=>c((0,d._)((0,i._)({},l),{chartId:e.target.value})),placeholder:"e.g., gender-distribution",className:"jsx-4d90e9a7f6d35918 form-input"})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,a.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Title"}),(0,a.jsx)("input",{type:"text",value:l.title,onChange:e=>c((0,d._)((0,i._)({},l),{title:e.target.value})),placeholder:"e.g., Gender Distribution",className:"jsx-4d90e9a7f6d35918 form-input"})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,a.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Type"}),(0,a.jsxs)("select",{value:l.type,onChange:e=>c((0,d._)((0,i._)({},l),{type:e.target.value})),className:"jsx-4d90e9a7f6d35918 form-input",children:[(0,a.jsx)("option",{value:"pie",className:"jsx-4d90e9a7f6d35918",children:"Pie Chart (2 elements)"}),(0,a.jsx)("option",{value:"bar",className:"jsx-4d90e9a7f6d35918",children:"Bar Chart (5 elements)"})]})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,a.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Order"}),(0,a.jsx)("input",{type:"number",value:l.order,onChange:e=>c((0,d._)((0,i._)({},l),{order:parseInt(e.target.value)||1})),min:"1",className:"jsx-4d90e9a7f6d35918 form-input"})]})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 form-group",children:[(0,a.jsx)("label",{className:"jsx-4d90e9a7f6d35918 form-label",children:"Elements"}),l.elements.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 element-editor",children:[(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 element-header",children:[(0,a.jsxs)("strong",{className:"jsx-4d90e9a7f6d35918",children:["Element ",t+1]}),l.elements.length>1&&(0,a.jsx)("button",{onClick:()=>(e=>{if(l.elements.length>1){let t=l.elements.filter((t,s)=>s!==e);c((0,d._)((0,i._)({},l),{elements:t}))}})(t),className:"jsx-4d90e9a7f6d35918 btn btn-xs btn-danger",children:"Remove"})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 element-fields",children:[(0,a.jsx)("input",{type:"text",placeholder:"Label",value:e.label,onChange:e=>m(t,"label",e.target.value),className:"jsx-4d90e9a7f6d35918 form-input"}),(0,a.jsx)("input",{type:"text",placeholder:"Formula (e.g., [FEMALE] + [MALE])",value:e.formula,onChange:e=>m(t,"formula",e.target.value),className:"jsx-4d90e9a7f6d35918 form-input formula-input"}),(0,a.jsx)("input",{type:"color",value:e.color,onChange:e=>m(t,"color",e.target.value),className:"jsx-4d90e9a7f6d35918 color-input"})]})]},e.id)),l.elements.length<5&&(0,a.jsx)("button",{onClick:()=>{l.elements.length<5&&c((0,d._)((0,i._)({},l),{elements:[...l.elements,{id:"element".concat(l.elements.length+1),label:"",formula:"",color:"#6b7280",description:""}]}))},className:"jsx-4d90e9a7f6d35918 btn btn-secondary",children:"+ Add Element"})]})]}),(0,a.jsxs)("div",{className:"jsx-4d90e9a7f6d35918 modal-footer",children:[(0,a.jsx)("button",{onClick:r,className:"jsx-4d90e9a7f6d35918 btn btn-secondary",children:"Cancel"}),(0,a.jsxs)("button",{onClick:()=>{if(!l.chartId||!l.title)return void alert("Please fill in Chart ID and Title");s(l)},className:"jsx-4d90e9a7f6d35918 btn btn-primary",children:[t._id?"Update":"Create"," Chart"]})]})]}),(0,a.jsx)(n(),{id:"4d90e9a7f6d35918",children:'.modal-overlay.jsx-4d90e9a7f6d35918{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;padding:1rem}.modal-content.jsx-4d90e9a7f6d35918{width:100%;padding:2rem;background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:1rem;box-shadow:0 25px 50px -12px rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.2);color:#1f2937}.modal-header.jsx-4d90e9a7f6d35918{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.modal-header.jsx-4d90e9a7f6d35918 h3.jsx-4d90e9a7f6d35918{color:#1f2937;font-size:1.5rem;font-weight:600;margin:0}.modal-body.jsx-4d90e9a7f6d35918{margin-bottom:2rem}.modal-footer.jsx-4d90e9a7f6d35918{display:flex;gap:1rem;justify-content:flex-end}.form-grid.jsx-4d90e9a7f6d35918{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:2rem}.form-group.jsx-4d90e9a7f6d35918{display:flex;flex-direction:column}.form-label.jsx-4d90e9a7f6d35918{color:#374151;font-weight:500;margin-bottom:.5rem;font-size:.875rem}.form-input.jsx-4d90e9a7f6d35918{padding:.75rem;border:1px solid#d1d5db;border-radius:.5rem;background:white;color:#1f2937;font-size:.875rem}.form-input.jsx-4d90e9a7f6d35918:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.1)}.element-editor.jsx-4d90e9a7f6d35918{border:1px solid#e5e7eb;border-radius:.5rem;padding:1rem;margin-bottom:1rem;background:rgba(249,250,251,.8)}.element-header.jsx-4d90e9a7f6d35918{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.element-header.jsx-4d90e9a7f6d35918 strong.jsx-4d90e9a7f6d35918{color:#374151;font-weight:600}.element-fields.jsx-4d90e9a7f6d35918{display:grid;grid-template-columns:1fr 2fr 60px;gap:.5rem;align-items:center}.formula-input.jsx-4d90e9a7f6d35918{font-family:"Monaco","Menlo","Ubuntu Mono",monospace;background:#f8fafc;border:1px solid#cbd5e1;color:#1e293b}.formula-input.jsx-4d90e9a7f6d35918:focus{background:white;border-color:#667eea}.color-input.jsx-4d90e9a7f6d35918{width:50px;height:38px;border:1px solid#d1d5db;border-radius:.25rem;cursor:pointer}.btn.jsx-4d90e9a7f6d35918{padding:.5rem 1rem;border-radius:.5rem;font-weight:500;cursor:pointer;transition:all.2s;border:none;font-size:.875rem}.btn-primary.jsx-4d90e9a7f6d35918{background:#667eea;color:white}.btn-primary.jsx-4d90e9a7f6d35918:hover{background:#5a67d8}.btn-secondary.jsx-4d90e9a7f6d35918{background:#6b7280;color:white}.btn-secondary.jsx-4d90e9a7f6d35918:hover{background:#4b5563}.btn-xs.jsx-4d90e9a7f6d35918{padding:.25rem .5rem;font-size:.75rem}.btn-danger.jsx-4d90e9a7f6d35918{background:#ef4444;color:white}.btn-danger.jsx-4d90e9a7f6d35918:hover{background:#dc2626}'})]})}function h(){let[e,t]=(0,o.useState)(null),[s,r]=(0,o.useState)(!0),[i,d]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{!async function(){try{let e=await fetch("/api/auth/check"),s=await e.json();if(!s.authenticated){window.location.href="/admin/login";return}t(s.user),d("admin"===s.user.role||"super-admin"===s.user.role),r(!1)}catch(e){console.error("Auth check failed:",e),window.location.href="/admin/login"}}()},[]),s)?(0,a.jsx)("div",{className:"admin-container",children:(0,a.jsx)("div",{className:"glass-card",children:(0,a.jsx)("div",{className:"loading-spinner",children:"Checking authentication..."})})}):i?(0,a.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-container",children:[(0,a.jsx)("div",{className:"jsx-36226907ae7dc69d glass-card admin-header",children:(0,a.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-header-content",children:[(0,a.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-branding",children:[(0,a.jsx)("h1",{className:"jsx-36226907ae7dc69d admin-title",children:"MessMass Admin"}),(0,a.jsx)("p",{className:"jsx-36226907ae7dc69d admin-subtitle",children:"Chart Algorithm Manager"})]}),(0,a.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-user-info",children:[(0,a.jsxs)("div",{className:"jsx-36226907ae7dc69d admin-badge",children:[(0,a.jsx)("p",{className:"jsx-36226907ae7dc69d admin-role",children:null==e?void 0:e.name}),(0,a.jsx)("p",{className:"jsx-36226907ae7dc69d admin-level",children:null==e?void 0:e.role}),(0,a.jsx)("p",{className:"jsx-36226907ae7dc69d admin-status",children:"✓ Authenticated"})]}),(0,a.jsx)("a",{href:"/admin",className:"jsx-36226907ae7dc69d btn btn-secondary",children:"← Back to Dashboard"})]})]})}),(0,a.jsx)(c,{}),(0,a.jsx)(n(),{id:"36226907ae7dc69d",children:".admin-container.jsx-36226907ae7dc69d{min-height:100vh;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:2rem}.loading-spinner.jsx-36226907ae7dc69d{text-align:center;padding:3rem;font-size:1.125rem;color:#4a5568}.admin-access-denied.jsx-36226907ae7dc69d{text-align:center;padding:3rem}.admin-access-denied.jsx-36226907ae7dc69d h2.jsx-36226907ae7dc69d{color:#dc2626;margin-bottom:1rem}.admin-access-denied.jsx-36226907ae7dc69d p.jsx-36226907ae7dc69d{color:#4a5568;margin-bottom:.5rem}.admin-header.jsx-36226907ae7dc69d{margin-bottom:2rem}.admin-header-content.jsx-36226907ae7dc69d{display:flex;justify-content:space-between;align-items:center}.admin-branding.jsx-36226907ae7dc69d h1.jsx-36226907ae7dc69d{font-size:2rem;font-weight:bold;color:#1a202c;margin:0}.admin-branding.jsx-36226907ae7dc69d p.jsx-36226907ae7dc69d{color:#4a5568;margin:0;font-size:1rem}.admin-user-info.jsx-36226907ae7dc69d{display:flex;align-items:center;gap:1rem}.admin-badge.jsx-36226907ae7dc69d{text-align:right}.admin-badge.jsx-36226907ae7dc69d p.jsx-36226907ae7dc69d{margin:0;font-size:.875rem}.admin-role.jsx-36226907ae7dc69d{font-weight:600;color:#1a202c}.admin-level.jsx-36226907ae7dc69d{color:#667eea;text-transform:uppercase;font-weight:500}.admin-status.jsx-36226907ae7dc69d{color:#48bb78;font-weight:500}"})]}):(0,a.jsx)("div",{className:"admin-container",children:(0,a.jsx)("div",{className:"glass-card",children:(0,a.jsxs)("div",{className:"admin-access-denied",children:[(0,a.jsx)("h2",{children:"Access Denied"}),(0,a.jsx)("p",{children:"You don't have permission to access the Chart Algorithm Manager."}),(0,a.jsx)("p",{children:"Only administrators can manage chart configurations."}),(0,a.jsx)("a",{href:"/admin",className:"btn btn-primary",children:"← Back to Admin Dashboard"})]})})})}s(374)},9127:(e,t,s)=>{Promise.resolve().then(s.bind(s,8386))},9137:(e,t,s)=>{"use strict";e.exports=s(2269).style}},e=>{e.O(0,[374,441,964,358],()=>e(e.s=9127)),_N_E=e.O()}]);