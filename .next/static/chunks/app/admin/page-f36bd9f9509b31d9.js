(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{376:(e,s,t)=>{"use strict";function a(e,s){return s=null!=s?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):(function(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t.push.apply(t,a)}return t})(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}),e}t.d(s,{_:()=>a})},4621:(e,s,t)=>{Promise.resolve().then(t.bind(t,4672))},4672:(e,s,t)=>{"use strict";t.d(s,{default:()=>r});var a=t(5594),i=t(376),l=t(5155),n=t(2115);function r(e){let{user:s,permissions:r}=e,[c,d]=(0,n.useState)([]),[o,m]=(0,n.useState)(!0),[h,v]=(0,n.useState)(null),[j,u]=(0,n.useState)(!1),[x,b]=(0,n.useState)(!1),[p,g]=(0,n.useState)({eventName:"",eventDate:""}),[N,f]=(0,n.useState)(!1);(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null);let y=(0,n.useRef)(null),k=(0,n.useRef)(null),D=(0,n.useRef)(null),C=(0,n.useRef)(null);(0,n.useEffect)(()=>{S()},[]);let S=async()=>{try{console.log("\uD83D\uDD04 Loading projects from /api/projects...");let e=await fetch("/api/projects");console.log("\uD83D\uDCE1 Response status:",e.status,e.statusText);let s=await e.json();console.log("\uD83D\uDCCA API Response:",s),s.success?(console.log("✅ Projects loaded successfully:",s.projects.length,"projects"),d(s.projects)):(console.error("❌ API returned error:",s.error),console.error("Debug info:",s.debug))}catch(e){console.error("❌ Failed to load projects:",e)}finally{m(!1)}},w=async e=>{if(confirm("Are you sure you want to delete this project?"))try{(await fetch("/api/projects?projectId=".concat(e),{method:"DELETE"})).ok&&(d(s=>s.filter(s=>s._id!==e)),h&&h._id===e&&(v(null),u(!1)))}catch(e){console.error("Failed to delete project:",e)}},P=async()=>{if(!p.eventName.trim()||!p.eventDate)return void alert("Please fill in both Event Name and Event Date.");f(!0);try{let e=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:p.eventName.trim(),eventDate:p.eventDate,stats:{remoteImages:0,hostessImages:0,selfies:0,indoor:0,outdoor:0,stadium:0,female:0,male:0,genAlpha:0,genYZ:0,genX:0,boomer:0,merched:0,jersey:0,scarf:0,flags:0,baseballCap:0,other:0,approvedImages:0,rejectedImages:0,visitQrCode:0,visitShortUrl:0,visitWeb:0,visitFacebook:0,visitInstagram:0,visitYoutube:0,visitTiktok:0,visitX:0,visitTrustpilot:0,eventAttendees:0,eventTicketPurchases:0,eventResultHome:0,eventResultVisitor:0,eventValuePropositionVisited:0,eventValuePropositionPurchases:0}})}),s=await e.json();e.ok&&s.success?(d(e=>[s.project,...e]),g({eventName:"",eventDate:""}),b(!1),alert('Project "'.concat(s.project.eventName,'" created successfully!\n\nEdit Link: /edit/').concat(s.project.editSlug,"\nStats Link: /stats/").concat(s.project.viewSlug))):alert("Failed to create project: ".concat(s.error||"Unknown error"))}catch(e){console.error("Failed to create project:",e),alert("Failed to create project. Please try again.")}finally{f(!1)}},I=async(e,s)=>{if(e.current)try{let a=(await t.e(316).then(t.t.bind(t,2699,23))).default;await new Promise(e=>setTimeout(e,100));let i=await a(e.current,{logging:!1}),l=document.createElement("a");l.download="".concat(s,".png"),l.href=i.toDataURL("image/png",1),document.body.appendChild(l),l.click(),document.body.removeChild(l),alert("Chart downloaded successfully!")}catch(e){console.error("Failed to export chart as PNG:",e),alert("Failed to export chart. Please try again.")}},M=c.length,A=c.reduce((e,s)=>e+(s.stats.indoor+s.stats.outdoor+s.stats.stadium),0),T=c.reduce((e,s)=>e+(s.stats.visitWeb||0),0),V=c.reduce((e,s)=>e+(s.stats.eventAttendees||0),0),E=c.reduce((e,s)=>e+(s.stats.approvedImages||0),0);c.reduce((e,s)=>e+(s.stats.eventTicketPurchases||0),0);let F=E+c.reduce((e,s)=>e+(s.stats.rejectedImages||0),0),O=F>0?Math.round(E/F*100):0,z=V>0?Math.round(A/V*100):0;return o?(0,l.jsx)("div",{className:"admin-container",children:(0,l.jsx)("div",{className:"glass-card",children:(0,l.jsx)("div",{className:"loading-spinner",children:"Loading admin dashboard..."})})}):(0,l.jsxs)("div",{className:"admin-container",children:[(0,l.jsxs)("div",{className:"glass-card admin-overview",children:[(0,l.jsx)("h2",{className:"section-title",children:"Dashboard Overview"}),(0,l.jsxs)("div",{className:"stats-grid-admin",children:[(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:M}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Total Projects"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:A}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Total Audience"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:T}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Total Web Visits"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:V}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]})]})]}),(0,l.jsxs)("div",{className:"glass-card admin-overview",children:[(0,l.jsx)("h2",{className:"section-title",children:"Success Manager Overview"}),(0,l.jsxs)("div",{className:"stats-grid-admin",children:[(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:E}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:V}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsxs)("div",{className:"stat-value-admin",children:[z,"%"]}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Fan Engagement"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsxs)("div",{className:"stat-value-admin",children:[O,"%"]}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]})]})]}),(0,l.jsxs)("div",{className:"glass-card admin-projects",children:[(0,l.jsxs)("div",{className:"projects-header",children:[(0,l.jsx)("h2",{className:"section-title",children:"Project Management"}),(0,l.jsxs)("div",{className:"projects-header-buttons",children:[(0,l.jsx)("a",{href:"/admin/charts",className:"btn btn-info",title:"Manage chart algorithms and formulas",children:"\uD83D\uDCCA Chart Algorithm Manager"}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>b(!0),children:"➕ Add New Project"}),(0,l.jsxs)("button",{className:"btn btn-primary",onClick:()=>u(!j),children:[j?"Hide":"Show"," Project Details"]})]})]}),(0,l.jsx)("div",{className:"projects-table-container",children:(0,l.jsxs)("table",{className:"projects-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Event Name"}),(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Total Fans"}),(0,l.jsx)("th",{children:"Images"}),(0,l.jsx)("th",{children:"Merch"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:0===c.length?(0,l.jsx)("tr",{children:(0,l.jsxs)("td",{colSpan:6,className:"admin-empty-state",children:[(0,l.jsx)("div",{className:"admin-empty-icon",children:"\uD83D\uDCCA"}),(0,l.jsx)("div",{className:"admin-empty-title",children:"No Projects Found"}),(0,l.jsx)("div",{className:"admin-empty-subtitle",children:0===M?"No projects have been created yet. Create your first project to get started.":"Loading projects..."})]})}):c.map(e=>{let s=e.stats.indoor+e.stats.outdoor+e.stats.stadium,t=e.stats.remoteImages+e.stats.hostessImages+e.stats.selfies,a=e.stats.merched+e.stats.jersey+e.stats.scarf+e.stats.flags+e.stats.baseballCap+e.stats.other;return(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"project-name",children:[e.viewSlug?(0,l.jsx)("a",{href:"/stats/".concat(e.viewSlug),className:"project-title-link",title:"View detailed statistics for ".concat(e.eventName),target:"_blank",rel:"noopener noreferrer",children:e.eventName}):(0,l.jsx)("span",{className:"project-name-text",children:e.eventName}),(0,l.jsx)("br",{}),e.editSlug?(0,l.jsx)("small",{children:(0,l.jsx)("a",{href:"/edit/".concat(e.editSlug),className:"project-edit-link",title:"Edit ".concat(e.eventName," statistics"),target:"_blank",rel:"noopener noreferrer",children:"\uD83D\uDCDD Edit Statistics"})}):(0,l.jsx)("small",{className:"no-edit-link",children:"Legacy Project - No Edit Link"})]}),(0,l.jsx)("td",{children:new Date(e.eventDate).toLocaleDateString()}),(0,l.jsx)("td",{className:"stat-number",children:s}),(0,l.jsx)("td",{className:"stat-number",children:t}),(0,l.jsx)("td",{className:"stat-number",children:a}),(0,l.jsxs)("td",{className:"actions-cell",children:[(0,l.jsx)("button",{className:"btn btn-sm btn-info",onClick:()=>{v(e),u(!0)},children:"\uD83D\uDCCA Stats"}),(0,l.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>(e=>{let s=e.stats,t=new Blob([[["Event Name",e.eventName],["Event Date",e.eventDate],["Generated",new Date().toLocaleString()],[""],["Category","Metric","Count"],["Images","Remote Images",s.remoteImages],["Images","Hostess Images",s.hostessImages],["Images","Selfies",s.selfies],["Images","Approved Images",s.approvedImages||0],["Images","Rejected Images",s.rejectedImages||0],["Fans","Indoor",s.indoor],["Fans","Outdoor",s.outdoor],["Fans","Stadium",s.stadium],["Gender","Female",s.female],["Gender","Male",s.male],["Age","Gen Alpha",s.genAlpha],["Age","Gen Y+Z",s.genYZ],["Age","Gen X",s.genX],["Age","Boomer",s.boomer],["Merchandise","Merched",s.merched],["Merchandise","Jersey",s.jersey],["Merchandise","Scarf",s.scarf],["Merchandise","Flags",s.flags],["Merchandise","Baseball Cap",s.baseballCap],["Merchandise","Other",s.other],["Success Manager","Event Attendees",s.eventAttendees||0],["Success Manager","Ticket Purchases",s.eventTicketPurchases||0],["Success Manager","QR Code Visits",s.visitQrCode||0],["Success Manager","Short URL Visits",s.visitShortUrl||0],["Success Manager","Web Visits",s.visitWeb||0],["Success Manager","Facebook Visits",s.visitFacebook||0],["Success Manager","Instagram Visits",s.visitInstagram||0],["Success Manager","YouTube Visits",s.visitYoutube||0],["Success Manager","TikTok Visits",s.visitTiktok||0],["Success Manager","X Visits",s.visitX||0],["Success Manager","Trustpilot Visits",s.visitTrustpilot||0]].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","".concat(e.eventName.replace(/[^a-z0-9]/gi,"_"),"_admin_export.csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}})(e),children:"\uD83D\uDCC4 Export"}),(0,l.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>w(e._id),children:"\uD83D\uDDD1️ Delete"})]})]},e._id)})})]})})]}),j&&h&&(0,l.jsxs)("div",{className:"glass-card project-details",children:[(0,l.jsxs)("div",{className:"project-details-header",children:[(0,l.jsxs)("h2",{className:"section-title",children:[h.eventName," - Detailed Statistics"]}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>u(!1),children:"✕ Close"})]}),(0,l.jsxs)("div",{className:"project-stats-layout",children:[(0,l.jsxs)("div",{className:"stats-left-column",children:[(0,l.jsx)("h3",{className:"column-title",children:"Event Statistics"}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Images (",h.stats.remoteImages+h.stats.hostessImages+h.stats.selfies,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Remote Images"}),(0,l.jsx)("span",{children:h.stats.remoteImages})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Hostess Images"}),(0,l.jsx)("span",{children:h.stats.hostessImages})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Selfies"}),(0,l.jsx)("span",{children:h.stats.selfies})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Fans (",h.stats.indoor+h.stats.outdoor+h.stats.stadium,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Indoor"}),(0,l.jsx)("span",{children:h.stats.indoor})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Outdoor"}),(0,l.jsx)("span",{children:h.stats.outdoor})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Stadium"}),(0,l.jsx)("span",{children:h.stats.stadium})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Gender (",h.stats.female+h.stats.male,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Female"}),(0,l.jsx)("span",{children:h.stats.female})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Male"}),(0,l.jsx)("span",{children:h.stats.male})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Age (",h.stats.genAlpha+h.stats.genYZ+h.stats.genX+h.stats.boomer,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Gen Alpha"}),(0,l.jsx)("span",{children:h.stats.genAlpha})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Gen Y+Z"}),(0,l.jsx)("span",{children:h.stats.genYZ})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Gen X"}),(0,l.jsx)("span",{children:h.stats.genX})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Boomer"}),(0,l.jsx)("span",{children:h.stats.boomer})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Merchandise (",h.stats.merched+h.stats.jersey+h.stats.scarf+h.stats.flags+h.stats.baseballCap+h.stats.other,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Merched"}),(0,l.jsx)("span",{children:h.stats.merched})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Jersey"}),(0,l.jsx)("span",{children:h.stats.jersey})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Scarf"}),(0,l.jsx)("span",{children:h.stats.scarf})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Flags"}),(0,l.jsx)("span",{children:h.stats.flags})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Baseball Cap"}),(0,l.jsx)("span",{children:h.stats.baseballCap})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Other"}),(0,l.jsx)("span",{children:h.stats.other})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsx)("h4",{children:"Success Manager Statistics"}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Approved Images"}),(0,l.jsx)("span",{children:h.stats.approvedImages||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Rejected Images"}),(0,l.jsx)("span",{children:h.stats.rejectedImages||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Event Attendees"}),(0,l.jsx)("span",{children:h.stats.eventAttendees||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Ticket Purchases"}),(0,l.jsx)("span",{children:h.stats.eventTicketPurchases||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"QR Code Visits"}),(0,l.jsx)("span",{children:h.stats.visitQrCode||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Short URL Visits"}),(0,l.jsx)("span",{children:h.stats.visitShortUrl||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Web Visits"}),(0,l.jsx)("span",{children:h.stats.visitWeb||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Facebook Visits"}),(0,l.jsx)("span",{children:h.stats.visitFacebook||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Instagram Visits"}),(0,l.jsx)("span",{children:h.stats.visitInstagram||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"YouTube Visits"}),(0,l.jsx)("span",{children:h.stats.visitYoutube||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"TikTok Visits"}),(0,l.jsx)("span",{children:h.stats.visitTiktok||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"X Visits"}),(0,l.jsx)("span",{children:h.stats.visitX||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Trustpilot Visits"}),(0,l.jsx)("span",{children:h.stats.visitTrustpilot||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Event Result Home"}),(0,l.jsx)("span",{children:h.stats.eventResultHome||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Event Result Visitor"}),(0,l.jsx)("span",{children:h.stats.eventResultVisitor||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Value Proposition Visited"}),(0,l.jsx)("span",{children:h.stats.eventValuePropositionVisited||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Value Proposition Purchases"}),(0,l.jsx)("span",{children:h.stats.eventValuePropositionPurchases||0})]})]})]})]}),(0,l.jsxs)("div",{className:"charts-right-column",children:[(0,l.jsx)("h3",{className:"column-title",children:"Data Visualization"}),(0,l.jsxs)("div",{className:"charts-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"2rem"},children:[(0,l.jsxs)("div",{className:"chart-container",ref:y,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Merchandise"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>I(y,"".concat((null==h?void 0:h.eventName)||"event","_merchandise")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!h)return null;let e=[{label:"Merched",value:h.stats.merched,color:"#4a90e2"},{label:"Jersey",value:h.stats.jersey,color:"#7b68ee"},{label:"Scarf",value:h.stats.scarf,color:"#ff6b9d"},{label:"Flags",value:h.stats.flags,color:"#ffa726"},{label:"Baseball Cap",value:h.stats.baseballCap,color:"#66bb6a"},{label:"Other",value:h.stats.other,color:"#ef5350"}],s=Math.max(...e.map(e=>e.value),1);return e.map((e,t)=>(0,l.jsxs)("div",{className:"horizontal-bar-item","data-testid":"merch-bar-".concat(t),children:[(0,l.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,l.jsx)("div",{className:"horizontal-bar-container",children:(0,l.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/s*100,"%"),backgroundColor:e.color},children:(0,l.jsx)("span",{className:"horizontal-bar-value",children:e.value})})})]},e.label))})()})]}),(0,l.jsxs)("div",{className:"chart-container",ref:k,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Engagement"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>I(k,"".concat((null==h?void 0:h.eventName)||"event","_engagement")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!h)return null;let e=h.stats.indoor+h.stats.outdoor+h.stats.stadium,s=h.stats.eventAttendees||0,t=h.stats.remoteImages+h.stats.hostessImages+h.stats.selfies,a=(h.stats.visitFacebook||0)+(h.stats.visitInstagram||0)+(h.stats.visitYoutube||0)+(h.stats.visitTiktok||0)+(h.stats.visitX||0)+(h.stats.visitTrustpilot||0),i=(h.stats.eventValuePropositionVisited||0)+(h.stats.eventValuePropositionPurchases||0),n=s>0?e/s*100:0,r=t>0?(a+i)/t*100:0,c=[{label:"Fan Engagement (".concat(n.toFixed(1),"%)"),value:n,color:"#8b5cf6"},{label:"Fan Interaction (".concat(r.toFixed(1),"%)"),value:r,color:"#f59e0b"}];if(0===s&&0===t)return(0,l.jsx)("div",{className:"no-data-message",children:"No engagement data available"});let d=Math.max(...c.map(e=>e.value),100);return(0,l.jsx)("div",{className:"horizontal-bars-container",children:c.map((e,s)=>(0,l.jsxs)("div",{className:"horizontal-bar-item","data-testid":"engagement-bar-".concat(s),children:[(0,l.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,l.jsx)("div",{className:"horizontal-bar-container",children:(0,l.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/d*100,"%"),backgroundColor:e.color},children:(0,l.jsxs)("span",{className:"horizontal-bar-value",children:[e.value.toFixed(1),"%"]})})})]},e.label))})})()})]}),(0,l.jsxs)("div",{className:"chart-container",ref:D,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Value"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>I(D,"".concat((null==h?void 0:h.eventName)||"event","_value")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!h)return null;let e=h.stats.remoteImages+h.stats.hostessImages+h.stats.selfies,s=h.stats.indoor+h.stats.outdoor+h.stats.stadium,t=h.stats.genAlpha+h.stats.genYZ,a=(h.stats.visitQrCode||0)+(h.stats.visitShortUrl||0)+(h.stats.visitWeb||0)+(h.stats.visitFacebook||0)+(h.stats.visitInstagram||0)+(h.stats.visitYoutube||0)+(h.stats.visitTiktok||0)+(h.stats.visitX||0)+(h.stats.visitTrustpilot||0),i=15*(h.stats.eventValuePropositionVisited||0),n=5*e,r=3*s,c=4*t,d=+a,o=[{label:"CPM",value:i,color:"#3b82f6"},{label:"eDM",value:n,color:"#10b981"},{label:"Ads",value:r,color:"#f59e0b"},{label:"U40 Eng.",value:c,color:"#8b5cf6"},{label:"Branding",value:d,color:"#ef4444"}],m=i+n+r+c+d;if(0===m)return(0,l.jsx)("div",{className:"no-data-message",children:"No value data available"});let v=Math.max(...o.map(e=>e.value),1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem",padding:"1rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,l.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:["€",m.toLocaleString()]}),(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Advertisement Value"})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:o.map((e,s)=>(0,l.jsxs)("div",{className:"horizontal-bar-item","data-testid":"value-bar-".concat(s),children:[(0,l.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,l.jsx)("div",{className:"horizontal-bar-container",children:(0,l.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/v*100,"%"),backgroundColor:e.color},children:(0,l.jsxs)("span",{className:"horizontal-bar-value",children:["€",e.value.toLocaleString()]})})})]},e.label))})]})})()})]})]}),(0,l.jsx)("div",{className:"charts-row",style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:(0,l.jsxs)("div",{className:"chart-container",ref:C,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Visitor Sources"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>I(C,"".concat((null==h?void 0:h.eventName)||"event","_visitor_sources")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"pie-chart-container",children:(0,l.jsx)("div",{className:"pie-chart","data-testid":"visitor-sources-pie-chart",children:(()=>{if(!h)return null;let e=[{label:"QR Code",value:h.stats.visitQrCode||0,color:"#3b82f6"},{label:"Short URL",value:h.stats.visitShortUrl||0,color:"#10b981"},{label:"Web",value:h.stats.visitWeb||0,color:"#f59e0b"},{label:"Facebook",value:h.stats.visitFacebook||0,color:"#1877f2"},{label:"Instagram",value:h.stats.visitInstagram||0,color:"#e4405f"},{label:"YouTube",value:h.stats.visitYoutube||0,color:"#ff0000"},{label:"TikTok",value:h.stats.visitTiktok||0,color:"#000000"},{label:"X (Twitter)",value:h.stats.visitX||0,color:"#1da1f2"},{label:"Trustpilot",value:h.stats.visitTrustpilot||0,color:"#00b67a"}],s=e.reduce((e,s)=>e+s.value,0);if(0===s)return(0,l.jsx)("div",{className:"no-data-message",children:"No visitor data available"});let t=0,a=e.filter(e=>e.value>0).map((e,a)=>{let i=e.value/s*100,n=e.value/s*360,r=t,c=t+n;t+=n;let d=90+80*Math.cos((r-90)*Math.PI/180),o=90+80*Math.sin((r-90)*Math.PI/180),m=90+80*Math.cos((c-90)*Math.PI/180),h=90+80*Math.sin((c-90)*Math.PI/180),v=["M ".concat(90," ").concat(90),"L ".concat(d," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(n>180)," 1 ").concat(m," ").concat(h),"Z"].join(" ");return(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:v,fill:e.color,stroke:"white",strokeWidth:"2",children:(0,l.jsx)("title",{children:"".concat(e.label,": ").concat(e.value," (").concat(i.toFixed(1),"%)")})})},e.label)}),i=e.filter(e=>e.value>0).map((e,t)=>{let a=(e.value/s*100).toFixed(1);return(0,l.jsxs)("div",{className:"legend-item",children:[(0,l.jsx)("div",{className:"legend-color",style:{backgroundColor:e.color}}),(0,l.jsxs)("span",{children:[e.label,": ",e.value," (",a,"%)"]})]},e.label)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"pie-chart-container",children:(0,l.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[a,(0,l.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,l.jsx)("text",{x:"90",y:"98",textAnchor:"middle",className:"chart-emoji",fontSize:"28",fill:"#1a202c",children:"\uD83C\uDF10"})]})}),(0,l.jsx)("div",{className:"chart-legend",children:i})]})})()})})]})})]})]})]}),x&&(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:(0,l.jsxs)("div",{className:"glass-card",style:{width:"100%",maxWidth:"500px",padding:"2rem"},children:[(0,l.jsxs)("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[(0,l.jsx)("h3",{className:"title",style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Create New Project"}),(0,l.jsx)("p",{className:"subtitle",style:{marginBottom:"0",fontSize:"1rem"},children:"Add a new event to track statistics"})]}),(0,l.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Event Name"}),(0,l.jsx)("input",{type:"text",className:"form-input",value:p.eventName,onChange:e=>g(s=>(0,i._)((0,a._)({},s),{eventName:e.target.value})),placeholder:"Enter event name",disabled:N,autoFocus:!0,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Event Date"}),(0,l.jsx)("input",{type:"date",className:"form-input",value:p.eventDate,onChange:e=>g(s=>(0,i._)((0,a._)({},s),{eventDate:e.target.value})),disabled:N,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,l.jsx)("div",{style:{padding:"1rem",background:"rgba(102, 126, 234, 0.1)",borderRadius:"12px",border:"1px solid rgba(102, 126, 234, 0.2)",marginBottom:"0"},children:(0,l.jsx)("p",{style:{color:"#4a5568",fontSize:"0.9rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:"\uD83D\uDCDD All statistics will be initialized to 0. You can edit them after creation using the provided edit link."})})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>{b(!1),g({eventName:"",eventDate:""})},disabled:N,style:{flex:"1"},children:"Cancel"}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:P,disabled:N||!p.eventName.trim()||!p.eventDate,style:{flex:"1"},children:N?"Creating...":"Create Project"})]})]})})]})}},5594:(e,s,t)=>{"use strict";function a(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(s){var a;a=t[s],s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a})}return e}t.d(s,{_:()=>a})}},e=>{e.O(0,[441,964,358],()=>e(e.s=4621)),_N_E=e.O()}]);