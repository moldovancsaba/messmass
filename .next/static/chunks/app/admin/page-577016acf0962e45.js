(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1966:(e,s,t)=>{"use strict";function a(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(s){var a;a=t[s],s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a})}return e}function i(e,s){return s=null!=s?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):(function(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t.push.apply(t,a)}return t})(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}),e}t.d(s,{default:()=>r});var c=t(5155),l=t(2115);function r(e){let{user:s,permissions:t}=e,[r,n]=(0,l.useState)([]),[d,o]=(0,l.useState)(!0),[m,u]=(0,l.useState)(null),[v,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await fetch("/api/projects"),s=await e.json();s.success&&n(s.projects)}catch(e){console.error("Failed to load projects:",e)}finally{o(!1)}},b=async(e,s,t)=>{try{let c=i(a({},e.stats),{[s]:t});(await fetch("/api/projects",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:e._id,eventName:e.eventName,eventDate:e.eventDate,stats:c})})).ok&&(n(s=>s.map(s=>s._id===e._id?i(a({},s),{stats:c}):s)),m&&m._id===e._id&&u(i(a({},e),{stats:c})))}catch(e){console.error("Failed to update success manager field:",e)}},p=async e=>{if(confirm("Are you sure you want to delete this project?"))try{(await fetch("/api/projects?projectId=".concat(e),{method:"DELETE"})).ok&&(n(s=>s.filter(s=>s._id!==e)),m&&m._id===e&&(u(null),j(!1)))}catch(e){console.error("Failed to delete project:",e)}},x=r.length,g=r.reduce((e,s)=>e+(s.stats.indoor+s.stats.outdoor+s.stats.stadium),0),N=r.reduce((e,s)=>e+(s.stats.visitWeb||0),0),f=r.reduce((e,s)=>e+(s.stats.eventAttendees||0),0),y=r.reduce((e,s)=>e+(s.stats.approvedImages||0),0),k=r.reduce((e,s)=>e+(s.stats.eventTicketPurchases||0),0),I=e=>{let{project:s,field:t,label:a,value:i}=e;return(0,c.jsxs)("div",{className:"success-manager-input",children:[(0,c.jsx)("label",{className:"sm-label",children:a}),(0,c.jsxs)("div",{className:"sm-input-container",children:[(0,c.jsx)("button",{className:"sm-btn sm-btn-minus",onClick:()=>b(s,t,Math.max(0,i-1)),disabled:0===i,children:"-"}),(0,c.jsx)("input",{type:"number",value:i,onChange:e=>{b(s,t,Math.max(0,parseInt(e.target.value)||0))},className:"sm-input",min:"0"}),(0,c.jsx)("button",{className:"sm-btn sm-btn-plus",onClick:()=>b(s,t,i+1),children:"+"})]})]})};return d?(0,c.jsx)("div",{className:"admin-container",children:(0,c.jsx)("div",{className:"glass-card",children:(0,c.jsx)("div",{className:"loading-spinner",children:"Loading admin dashboard..."})})}):(0,c.jsxs)("div",{className:"admin-container",children:[(0,c.jsxs)("div",{className:"glass-card admin-overview",children:[(0,c.jsx)("h2",{className:"section-title",children:"Dashboard Overview"}),(0,c.jsxs)("div",{className:"stats-grid-admin",children:[(0,c.jsxs)("div",{className:"stat-card-admin",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:x}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Total Projects"})]}),(0,c.jsxs)("div",{className:"stat-card-admin",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:g}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Total Audience"})]}),(0,c.jsxs)("div",{className:"stat-card-admin",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:N}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Total Web Visits"})]}),(0,c.jsxs)("div",{className:"stat-card-admin",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:f}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]})]}),(0,c.jsx)("h3",{className:"section-subtitle",children:"Success Manager Overview"}),(0,c.jsxs)("div",{className:"stats-grid-admin",children:[(0,c.jsxs)("div",{className:"stat-card-admin success-manager",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:y}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]}),(0,c.jsxs)("div",{className:"stat-card-admin success-manager",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:f}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]}),(0,c.jsxs)("div",{className:"stat-card-admin success-manager",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:k}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Ticket Purchases"})]}),(0,c.jsxs)("div",{className:"stat-card-admin success-manager",children:[(0,c.jsx)("div",{className:"stat-value-admin",children:N}),(0,c.jsx)("div",{className:"stat-label-admin",children:"Web Visits"})]})]})]}),(0,c.jsxs)("div",{className:"glass-card admin-projects",children:[(0,c.jsxs)("div",{className:"projects-header",children:[(0,c.jsx)("h2",{className:"section-title",children:"Project Management"}),(0,c.jsxs)("button",{className:"btn btn-primary",onClick:()=>j(!v),children:[v?"Hide":"Show"," Project Details"]})]}),(0,c.jsx)("div",{className:"projects-table-container",children:(0,c.jsxs)("table",{className:"projects-table",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Event Name"}),(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Total Fans"}),(0,c.jsx)("th",{children:"Images"}),(0,c.jsx)("th",{children:"Merch"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:r.map(e=>{let s=e.stats.indoor+e.stats.outdoor+e.stats.stadium,t=e.stats.remoteImages+e.stats.hostessImages+e.stats.selfies,a=e.stats.merched+e.stats.jersey+e.stats.scarf+e.stats.flags+e.stats.baseballCap+e.stats.other;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"project-name",children:e.eventName}),(0,c.jsx)("td",{children:new Date(e.eventDate).toLocaleDateString()}),(0,c.jsx)("td",{className:"stat-number",children:s}),(0,c.jsx)("td",{className:"stat-number",children:t}),(0,c.jsx)("td",{className:"stat-number",children:a}),(0,c.jsxs)("td",{className:"actions-cell",children:[(0,c.jsx)("button",{className:"btn btn-sm btn-info",onClick:()=>{u(e),j(!0)},children:"\uD83D\uDCCA Stats"}),(0,c.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>(e=>{let s=e.stats,t=new Blob([[["Event Name",e.eventName],["Event Date",e.eventDate],["Generated",new Date().toLocaleString()],[""],["Category","Metric","Count"],["Images","Remote Images",s.remoteImages],["Images","Hostess Images",s.hostessImages],["Images","Selfies",s.selfies],["Images","Approved Images",s.approvedImages||0],["Images","Rejected Images",s.rejectedImages||0],["Fans","Indoor",s.indoor],["Fans","Outdoor",s.outdoor],["Fans","Stadium",s.stadium],["Gender","Female",s.female],["Gender","Male",s.male],["Age","Gen Alpha",s.genAlpha],["Age","Gen Y+Z",s.genYZ],["Age","Gen X",s.genX],["Age","Boomer",s.boomer],["Merchandise","Merched",s.merched],["Merchandise","Jersey",s.jersey],["Merchandise","Scarf",s.scarf],["Merchandise","Flags",s.flags],["Merchandise","Baseball Cap",s.baseballCap],["Merchandise","Other",s.other],["Success Manager","Event Attendees",s.eventAttendees||0],["Success Manager","Ticket Purchases",s.eventTicketPurchases||0],["Success Manager","QR Code Visits",s.visitQrCode||0],["Success Manager","Short URL Visits",s.visitShortUrl||0],["Success Manager","Web Visits",s.visitWeb||0],["Success Manager","Facebook Visits",s.visitFacebook||0],["Success Manager","Instagram Visits",s.visitInstagram||0],["Success Manager","YouTube Visits",s.visitYoutube||0],["Success Manager","TikTok Visits",s.visitTiktok||0],["Success Manager","X Visits",s.visitX||0],["Success Manager","Trustpilot Visits",s.visitTrustpilot||0]].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","".concat(e.eventName.replace(/[^a-z0-9]/gi,"_"),"_admin_export.csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}})(e),children:"\uD83D\uDCC4 Export"}),(0,c.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>p(e._id),children:"\uD83D\uDDD1️ Delete"})]})]},e._id)})})]})})]}),v&&m&&(0,c.jsxs)("div",{className:"glass-card project-details",children:[(0,c.jsxs)("div",{className:"project-details-header",children:[(0,c.jsxs)("h2",{className:"section-title",children:[m.eventName," - Detailed Statistics"]}),(0,c.jsx)("button",{className:"btn btn-secondary",onClick:()=>j(!1),children:"✕ Close"})]}),(0,c.jsxs)("div",{className:"project-stats-grid",children:[(0,c.jsxs)("div",{className:"stats-section",children:[(0,c.jsx)("h3",{children:"Event Statistics"}),(0,c.jsxs)("div",{className:"stats-display",children:[(0,c.jsxs)("div",{children:["Images: ",m.stats.remoteImages+m.stats.hostessImages+m.stats.selfies]}),(0,c.jsxs)("div",{children:["Fans: ",m.stats.indoor+m.stats.outdoor+m.stats.stadium]}),(0,c.jsxs)("div",{children:["Gender: ",m.stats.female+m.stats.male]}),(0,c.jsxs)("div",{children:["Merch: ",m.stats.merched+m.stats.jersey+m.stats.scarf+m.stats.flags+m.stats.baseballCap+m.stats.other]})]})]}),(0,c.jsxs)("div",{className:"stats-section success-manager-section",children:[(0,c.jsx)("h3",{children:"Success Manager"}),(0,c.jsxs)("div",{className:"success-manager-grid",children:[(0,c.jsx)(I,{project:m,field:"approvedImages",label:"Approved Images",value:m.stats.approvedImages||0}),(0,c.jsx)(I,{project:m,field:"rejectedImages",label:"Rejected Images",value:m.stats.rejectedImages||0}),(0,c.jsx)(I,{project:m,field:"eventAttendees",label:"Event Attendees",value:m.stats.eventAttendees||0}),(0,c.jsx)(I,{project:m,field:"eventTicketPurchases",label:"Ticket Purchases",value:m.stats.eventTicketPurchases||0}),(0,c.jsx)(I,{project:m,field:"visitQrCode",label:"QR Code Visits",value:m.stats.visitQrCode||0}),(0,c.jsx)(I,{project:m,field:"visitShortUrl",label:"Short URL Visits",value:m.stats.visitShortUrl||0}),(0,c.jsx)(I,{project:m,field:"visitWeb",label:"Web Visits",value:m.stats.visitWeb||0}),(0,c.jsx)(I,{project:m,field:"visitFacebook",label:"Facebook Visits",value:m.stats.visitFacebook||0}),(0,c.jsx)(I,{project:m,field:"visitInstagram",label:"Instagram Visits",value:m.stats.visitInstagram||0}),(0,c.jsx)(I,{project:m,field:"visitYoutube",label:"YouTube Visits",value:m.stats.visitYoutube||0}),(0,c.jsx)(I,{project:m,field:"visitTiktok",label:"TikTok Visits",value:m.stats.visitTiktok||0}),(0,c.jsx)(I,{project:m,field:"visitX",label:"X Visits",value:m.stats.visitX||0}),(0,c.jsx)(I,{project:m,field:"visitTrustpilot",label:"Trustpilot Visits",value:m.stats.visitTrustpilot||0}),(0,c.jsx)(I,{project:m,field:"eventResultHome",label:"Event Result Home",value:m.stats.eventResultHome||0}),(0,c.jsx)(I,{project:m,field:"eventResultVisitor",label:"Event Result Visitor",value:m.stats.eventResultVisitor||0}),(0,c.jsx)(I,{project:m,field:"eventValuePropositionVisited",label:"Value Prop Visited",value:m.stats.eventValuePropositionVisited||0}),(0,c.jsx)(I,{project:m,field:"eventValuePropositionPurchases",label:"Value Prop Purchases",value:m.stats.eventValuePropositionPurchases||0})]})]})]})]})]})}},4621:(e,s,t)=>{Promise.resolve().then(t.bind(t,1966))}},e=>{e.O(0,[441,964,358],()=>e(e.s=4621)),_N_E=e.O()}]);