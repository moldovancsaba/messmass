(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{376:(e,s,a)=>{"use strict";function t(e,s){return s=null!=s?s:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):(function(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a.push.apply(a,t)}return a})(Object(s)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(s,a))}),e}a.d(s,{_:()=>t})},4621:(e,s,a)=>{Promise.resolve().then(a.bind(a,4672))},4672:(e,s,a)=>{"use strict";a.d(s,{default:()=>i}),a(5594),a(376);var t=a(5155),l=a(2115);function i(e){let{user:s,permissions:i}=e,[c,n]=(0,l.useState)([]),[r,d]=(0,l.useState)(!0),[o,h]=(0,l.useState)(null),[m,j]=(0,l.useState)(!1),x=(0,l.useRef)(null),u=(0,l.useRef)(null),v=(0,l.useRef)(null),b=(0,l.useRef)(null),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{try{console.log("\uD83D\uDD04 Loading projects from /api/projects...");let e=await fetch("/api/projects");console.log("\uD83D\uDCE1 Response status:",e.status,e.statusText);let s=await e.json();console.log("\uD83D\uDCCA API Response:",s),s.success?(console.log("✅ Projects loaded successfully:",s.projects.length,"projects"),n(s.projects)):(console.error("❌ API returned error:",s.error),console.error("Debug info:",s.debug))}catch(e){console.error("❌ Failed to load projects:",e)}finally{d(!1)}},g=async e=>{if(confirm("Are you sure you want to delete this project?"))try{(await fetch("/api/projects?projectId=".concat(e),{method:"DELETE"})).ok&&(n(s=>s.filter(s=>s._id!==e)),o&&o._id===e&&(h(null),j(!1)))}catch(e){console.error("Failed to delete project:",e)}},f=async(e,s)=>{if(e.current)try{let t=(await a.e(316).then(a.t.bind(a,2699,23))).default;await new Promise(e=>setTimeout(e,100));let l=await t(e.current,{logging:!1}),i=document.createElement("a");i.download="".concat(s,".png"),i.href=l.toDataURL("image/png",1),document.body.appendChild(i),i.click(),document.body.removeChild(i),alert("Chart downloaded successfully!")}catch(e){console.error("Failed to export chart as PNG:",e),alert("Failed to export chart. Please try again.")}},y=c.length,k=c.reduce((e,s)=>e+(s.stats.indoor+s.stats.outdoor+s.stats.stadium),0),M=c.reduce((e,s)=>e+(s.stats.visitWeb||0),0),w=c.reduce((e,s)=>e+(s.stats.eventAttendees||0),0),I=c.reduce((e,s)=>e+(s.stats.approvedImages||0),0);c.reduce((e,s)=>e+(s.stats.eventTicketPurchases||0),0);let D=I+c.reduce((e,s)=>e+(s.stats.rejectedImages||0),0),P=D>0?Math.round(I/D*100):0,S=w>0?Math.round(k/w*100):0;return r?(0,t.jsx)("div",{className:"admin-container",children:(0,t.jsx)("div",{className:"glass-card",children:(0,t.jsx)("div",{className:"loading-spinner",children:"Loading admin dashboard..."})})}):(0,t.jsxs)("div",{className:"admin-container",children:[(0,t.jsxs)("div",{className:"glass-card admin-overview",children:[(0,t.jsx)("h2",{className:"section-title",children:"Dashboard Overview"}),(0,t.jsxs)("div",{className:"stats-grid-admin",children:[(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsx)("div",{className:"stat-value-admin",children:y}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Total Projects"})]}),(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsx)("div",{className:"stat-value-admin",children:k}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Total Audience"})]}),(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsx)("div",{className:"stat-value-admin",children:M}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Total Web Visits"})]}),(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsx)("div",{className:"stat-value-admin",children:w}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]})]})]}),(0,t.jsxs)("div",{className:"glass-card admin-overview",children:[(0,t.jsx)("h2",{className:"section-title",children:"Success Manager Overview"}),(0,t.jsxs)("div",{className:"stats-grid-admin",children:[(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsx)("div",{className:"stat-value-admin",children:I}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]}),(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsx)("div",{className:"stat-value-admin",children:w}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]}),(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsxs)("div",{className:"stat-value-admin",children:[S,"%"]}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Fan Engagement"})]}),(0,t.jsxs)("div",{className:"stat-card-admin",children:[(0,t.jsxs)("div",{className:"stat-value-admin",children:[P,"%"]}),(0,t.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]})]})]}),(0,t.jsxs)("div",{className:"glass-card admin-projects",children:[(0,t.jsxs)("div",{className:"projects-header",children:[(0,t.jsx)("h2",{className:"section-title",children:"Project Management"}),(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>j(!m),children:[m?"Hide":"Show"," Project Details"]})]}),(0,t.jsx)("div",{className:"projects-table-container",children:(0,t.jsxs)("table",{className:"projects-table",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Event Name"}),(0,t.jsx)("th",{children:"Date"}),(0,t.jsx)("th",{children:"Total Fans"}),(0,t.jsx)("th",{children:"Images"}),(0,t.jsx)("th",{children:"Merch"}),(0,t.jsx)("th",{children:"Actions"})]})}),(0,t.jsx)("tbody",{children:0===c.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:6,className:"admin-empty-state",children:[(0,t.jsx)("div",{className:"admin-empty-icon",children:"\uD83D\uDCCA"}),(0,t.jsx)("div",{className:"admin-empty-title",children:"No Projects Found"}),(0,t.jsx)("div",{className:"admin-empty-subtitle",children:0===y?"No projects have been created yet. Create your first project to get started.":"Loading projects..."})]})}):c.map(e=>{let s=e.stats.indoor+e.stats.outdoor+e.stats.stadium,a=e.stats.remoteImages+e.stats.hostessImages+e.stats.selfies,l=e.stats.merched+e.stats.jersey+e.stats.scarf+e.stats.flags+e.stats.baseballCap+e.stats.other;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"project-name",children:e.eventName}),(0,t.jsx)("td",{children:new Date(e.eventDate).toLocaleDateString()}),(0,t.jsx)("td",{className:"stat-number",children:s}),(0,t.jsx)("td",{className:"stat-number",children:a}),(0,t.jsx)("td",{className:"stat-number",children:l}),(0,t.jsxs)("td",{className:"actions-cell",children:[(0,t.jsx)("button",{className:"btn btn-sm btn-info",onClick:()=>{h(e),j(!0)},children:"\uD83D\uDCCA Stats"}),(0,t.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>(e=>{let s=e.stats,a=new Blob([[["Event Name",e.eventName],["Event Date",e.eventDate],["Generated",new Date().toLocaleString()],[""],["Category","Metric","Count"],["Images","Remote Images",s.remoteImages],["Images","Hostess Images",s.hostessImages],["Images","Selfies",s.selfies],["Images","Approved Images",s.approvedImages||0],["Images","Rejected Images",s.rejectedImages||0],["Fans","Indoor",s.indoor],["Fans","Outdoor",s.outdoor],["Fans","Stadium",s.stadium],["Gender","Female",s.female],["Gender","Male",s.male],["Age","Gen Alpha",s.genAlpha],["Age","Gen Y+Z",s.genYZ],["Age","Gen X",s.genX],["Age","Boomer",s.boomer],["Merchandise","Merched",s.merched],["Merchandise","Jersey",s.jersey],["Merchandise","Scarf",s.scarf],["Merchandise","Flags",s.flags],["Merchandise","Baseball Cap",s.baseballCap],["Merchandise","Other",s.other],["Success Manager","Event Attendees",s.eventAttendees||0],["Success Manager","Ticket Purchases",s.eventTicketPurchases||0],["Success Manager","QR Code Visits",s.visitQrCode||0],["Success Manager","Short URL Visits",s.visitShortUrl||0],["Success Manager","Web Visits",s.visitWeb||0],["Success Manager","Facebook Visits",s.visitFacebook||0],["Success Manager","Instagram Visits",s.visitInstagram||0],["Success Manager","YouTube Visits",s.visitYoutube||0],["Success Manager","TikTok Visits",s.visitTiktok||0],["Success Manager","X Visits",s.visitX||0],["Success Manager","Trustpilot Visits",s.visitTrustpilot||0]].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");if(void 0!==t.download){let s=URL.createObjectURL(a);t.setAttribute("href",s),t.setAttribute("download","".concat(e.eventName.replace(/[^a-z0-9]/gi,"_"),"_admin_export.csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}})(e),children:"\uD83D\uDCC4 Export"}),(0,t.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>g(e._id),children:"\uD83D\uDDD1️ Delete"})]})]},e._id)})})]})})]}),m&&o&&(0,t.jsxs)("div",{className:"glass-card project-details",children:[(0,t.jsxs)("div",{className:"project-details-header",children:[(0,t.jsxs)("h2",{className:"section-title",children:[o.eventName," - Detailed Statistics"]}),(0,t.jsx)("button",{className:"btn btn-secondary",onClick:()=>j(!1),children:"✕ Close"})]}),(0,t.jsxs)("div",{className:"project-stats-layout",children:[(0,t.jsxs)("div",{className:"stats-left-column",children:[(0,t.jsx)("h3",{className:"column-title",children:"Event Statistics"}),(0,t.jsxs)("div",{className:"stats-subsection",children:[(0,t.jsxs)("h4",{children:["Images (",o.stats.remoteImages+o.stats.hostessImages+o.stats.selfies,")"]}),(0,t.jsxs)("div",{className:"stats-breakdown",children:[(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Remote Images"}),(0,t.jsx)("span",{children:o.stats.remoteImages})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Hostess Images"}),(0,t.jsx)("span",{children:o.stats.hostessImages})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Selfies"}),(0,t.jsx)("span",{children:o.stats.selfies})]})]})]}),(0,t.jsxs)("div",{className:"stats-subsection",children:[(0,t.jsxs)("h4",{children:["Fans (",o.stats.indoor+o.stats.outdoor+o.stats.stadium,")"]}),(0,t.jsxs)("div",{className:"stats-breakdown",children:[(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Indoor"}),(0,t.jsx)("span",{children:o.stats.indoor})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Outdoor"}),(0,t.jsx)("span",{children:o.stats.outdoor})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Stadium"}),(0,t.jsx)("span",{children:o.stats.stadium})]})]})]}),(0,t.jsxs)("div",{className:"stats-subsection",children:[(0,t.jsxs)("h4",{children:["Gender (",o.stats.female+o.stats.male,")"]}),(0,t.jsxs)("div",{className:"stats-breakdown",children:[(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Female"}),(0,t.jsx)("span",{children:o.stats.female})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Male"}),(0,t.jsx)("span",{children:o.stats.male})]})]})]}),(0,t.jsxs)("div",{className:"stats-subsection",children:[(0,t.jsxs)("h4",{children:["Age (",o.stats.genAlpha+o.stats.genYZ+o.stats.genX+o.stats.boomer,")"]}),(0,t.jsxs)("div",{className:"stats-breakdown",children:[(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Gen Alpha"}),(0,t.jsx)("span",{children:o.stats.genAlpha})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Gen Y+Z"}),(0,t.jsx)("span",{children:o.stats.genYZ})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Gen X"}),(0,t.jsx)("span",{children:o.stats.genX})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Boomer"}),(0,t.jsx)("span",{children:o.stats.boomer})]})]})]}),(0,t.jsxs)("div",{className:"stats-subsection",children:[(0,t.jsxs)("h4",{children:["Merchandise (",o.stats.merched+o.stats.jersey+o.stats.scarf+o.stats.flags+o.stats.baseballCap+o.stats.other,")"]}),(0,t.jsxs)("div",{className:"stats-breakdown",children:[(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Merched"}),(0,t.jsx)("span",{children:o.stats.merched})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Jersey"}),(0,t.jsx)("span",{children:o.stats.jersey})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Scarf"}),(0,t.jsx)("span",{children:o.stats.scarf})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Flags"}),(0,t.jsx)("span",{children:o.stats.flags})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Baseball Cap"}),(0,t.jsx)("span",{children:o.stats.baseballCap})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Other"}),(0,t.jsx)("span",{children:o.stats.other})]})]})]}),(0,t.jsxs)("div",{className:"stats-subsection",children:[(0,t.jsx)("h4",{children:"Success Manager Statistics"}),(0,t.jsxs)("div",{className:"stats-breakdown",children:[(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Approved Images"}),(0,t.jsx)("span",{children:o.stats.approvedImages||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Rejected Images"}),(0,t.jsx)("span",{children:o.stats.rejectedImages||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Event Attendees"}),(0,t.jsx)("span",{children:o.stats.eventAttendees||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Ticket Purchases"}),(0,t.jsx)("span",{children:o.stats.eventTicketPurchases||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"QR Code Visits"}),(0,t.jsx)("span",{children:o.stats.visitQrCode||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Short URL Visits"}),(0,t.jsx)("span",{children:o.stats.visitShortUrl||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Web Visits"}),(0,t.jsx)("span",{children:o.stats.visitWeb||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Facebook Visits"}),(0,t.jsx)("span",{children:o.stats.visitFacebook||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Instagram Visits"}),(0,t.jsx)("span",{children:o.stats.visitInstagram||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"YouTube Visits"}),(0,t.jsx)("span",{children:o.stats.visitYoutube||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"TikTok Visits"}),(0,t.jsx)("span",{children:o.stats.visitTiktok||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"X Visits"}),(0,t.jsx)("span",{children:o.stats.visitX||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Trustpilot Visits"}),(0,t.jsx)("span",{children:o.stats.visitTrustpilot||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Event Result Home"}),(0,t.jsx)("span",{children:o.stats.eventResultHome||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Event Result Visitor"}),(0,t.jsx)("span",{children:o.stats.eventResultVisitor||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Value Proposition Visited"}),(0,t.jsx)("span",{children:o.stats.eventValuePropositionVisited||0})]}),(0,t.jsxs)("div",{className:"stat-item",children:[(0,t.jsx)("span",{children:"Value Proposition Purchases"}),(0,t.jsx)("span",{children:o.stats.eventValuePropositionPurchases||0})]})]})]})]}),(0,t.jsxs)("div",{className:"charts-right-column",children:[(0,t.jsx)("h3",{className:"column-title",children:"Data Visualization"}),(0,t.jsxs)("div",{className:"chart-container",ref:x,children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsx)("h4",{className:"chart-title",children:"Gender Distribution"}),(0,t.jsx)("div",{className:"chart-export-buttons",children:(0,t.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>f(x,"".concat((null==o?void 0:o.eventName)||"event","_gender_distribution")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsx)("div",{className:"pie-chart","data-testid":"gender-circle-chart",children:(()=>{if(!o)return null;let e=[{label:"Female",value:o.stats.female,color:"#ff6b9d"},{label:"Male",value:o.stats.male,color:"#4a90e2"}],s=e.reduce((e,s)=>e+s.value,0);if(0===s)return(0,t.jsx)("div",{className:"no-data-message",children:"No gender data available"});let a=0,l=e.filter(e=>e.value>0).map((e,l)=>{let i=e.value/s*100,c=e.value/s*360,n=a,r=a+c;a+=c;let d=90+80*Math.cos((n-90)*Math.PI/180),o=90+80*Math.sin((n-90)*Math.PI/180),h=90+80*Math.cos((r-90)*Math.PI/180),m=90+80*Math.sin((r-90)*Math.PI/180),j=["M ".concat(90," ").concat(90),"L ".concat(d," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(c>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:j,fill:e.color,stroke:"white",strokeWidth:"2",children:(0,t.jsx)("title",{children:"".concat(e.label,": ").concat(e.value," (").concat(i.toFixed(1),"%)")})})},e.label)}),i=e.filter(e=>e.value>0).map((e,a)=>{let l=(e.value/s*100).toFixed(1);return(0,t.jsxs)("div",{className:"legend-item",children:[(0,t.jsx)("div",{className:"legend-color",style:{backgroundColor:e.color}}),(0,t.jsxs)("span",{children:[e.label,": ",e.value," (",l,"%)"]})]},e.label)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[l,(0,t.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,t.jsx)("text",{x:"90",y:"86",textAnchor:"middle",className:"chart-total",fontSize:"20",fontWeight:"700",fill:"#1a202c",children:s}),(0,t.jsx)("text",{x:"90",y:"102",textAnchor:"middle",className:"chart-label",fontSize:"12",fill:"#6b7280",children:"TOTAL"})]})}),(0,t.jsx)("div",{className:"chart-legend",children:i})]})})()})})]}),(0,t.jsxs)("div",{className:"chart-container",ref:u,children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsx)("h4",{className:"chart-title",children:"Fans Location"}),(0,t.jsx)("div",{className:"chart-export-buttons",children:(0,t.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>f(u,"".concat((null==o?void 0:o.eventName)||"event","_fans_location")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsx)("div",{className:"pie-chart","data-testid":"fans-location-pie-chart",children:(()=>{if(!o)return null;let e=[{label:"Indoor",value:o.stats.indoor,color:"#3b82f6"},{label:"Outdoor",value:o.stats.outdoor,color:"#10b981"},{label:"Stadium",value:o.stats.stadium,color:"#f59e0b"}],s=e.reduce((e,s)=>e+s.value,0);if(0===s)return(0,t.jsx)("div",{className:"no-data-message",children:"No fans location data available"});let a=0,l=e.filter(e=>e.value>0).map((e,l)=>{let i=e.value/s*100,c=e.value/s*360,n=a,r=a+c;a+=c;let d=90+80*Math.cos((n-90)*Math.PI/180),o=90+80*Math.sin((n-90)*Math.PI/180),h=90+80*Math.cos((r-90)*Math.PI/180),m=90+80*Math.sin((r-90)*Math.PI/180),j=["M ".concat(90," ").concat(90),"L ".concat(d," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(c>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:j,fill:e.color,stroke:"white",strokeWidth:"2",children:(0,t.jsx)("title",{children:"".concat(e.label,": ").concat(e.value," (").concat(i.toFixed(1),"%)")})})},e.label)}),i=e.filter(e=>e.value>0).map((e,a)=>{let l=(e.value/s*100).toFixed(1);return(0,t.jsxs)("div",{className:"legend-item",children:[(0,t.jsx)("div",{className:"legend-color",style:{backgroundColor:e.color}}),(0,t.jsxs)("span",{children:[e.label,": ",e.value," (",l,"%)"]})]},e.label)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[l,(0,t.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,t.jsx)("text",{x:"90",y:"86",textAnchor:"middle",className:"chart-total",fontSize:"20",fontWeight:"700",fill:"#1a202c",children:s}),(0,t.jsx)("text",{x:"90",y:"102",textAnchor:"middle",className:"chart-label",fontSize:"12",fill:"#6b7280",children:"FANS"})]})}),(0,t.jsx)("div",{className:"chart-legend",children:i})]})})()})})]}),(0,t.jsxs)("div",{className:"chart-container",ref:v,children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsx)("h4",{className:"chart-title",children:"Age Groups"}),(0,t.jsx)("div",{className:"chart-export-buttons",children:(0,t.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>f(v,"".concat((null==o?void 0:o.eventName)||"event","_age_groups")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsx)("div",{className:"pie-chart","data-testid":"age-groups-pie-chart",children:(()=>{if(!o)return null;let e=[{label:"Alpha",value:o.stats.genAlpha,color:"#8b5cf6"},{label:"Y+Z",value:o.stats.genYZ,color:"#06b6d4"},{label:"X",value:o.stats.genX,color:"#f97316"},{label:"Boomer",value:o.stats.boomer,color:"#ef4444"}],s=e.reduce((e,s)=>e+s.value,0);if(0===s)return(0,t.jsx)("div",{className:"no-data-message",children:"No age groups data available"});let a=0,l=e.filter(e=>e.value>0).map((e,l)=>{let i=e.value/s*100,c=e.value/s*360,n=a,r=a+c;a+=c;let d=90+80*Math.cos((n-90)*Math.PI/180),o=90+80*Math.sin((n-90)*Math.PI/180),h=90+80*Math.cos((r-90)*Math.PI/180),m=90+80*Math.sin((r-90)*Math.PI/180),j=["M ".concat(90," ").concat(90),"L ".concat(d," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(c>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:j,fill:e.color,stroke:"white",strokeWidth:"2",children:(0,t.jsx)("title",{children:"".concat(e.label,": ").concat(e.value," (").concat(i.toFixed(1),"%)")})})},e.label)}),i=e.filter(e=>e.value>0).map((e,a)=>{let l=(e.value/s*100).toFixed(1);return(0,t.jsxs)("div",{className:"legend-item",children:[(0,t.jsx)("div",{className:"legend-color",style:{backgroundColor:e.color}}),(0,t.jsxs)("span",{children:[e.label,": ",e.value," (",l,"%)"]})]},e.label)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[l,(0,t.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,t.jsx)("text",{x:"90",y:"86",textAnchor:"middle",className:"chart-total",fontSize:"20",fontWeight:"700",fill:"#1a202c",children:s}),(0,t.jsx)("text",{x:"90",y:"102",textAnchor:"middle",className:"chart-label",fontSize:"12",fill:"#6b7280",children:"TOTAL"})]})}),(0,t.jsx)("div",{className:"chart-legend",children:i})]})})()})})]}),(0,t.jsxs)("div",{className:"chart-container",ref:b,children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsx)("h4",{className:"chart-title",children:"Merchandise Categories"}),(0,t.jsx)("div",{className:"chart-export-buttons",children:(0,t.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>f(b,"".concat((null==o?void 0:o.eventName)||"event","_merchandise_categories")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,t.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!o)return null;let e=[{label:"Merched",value:o.stats.merched,color:"#4a90e2"},{label:"Jersey",value:o.stats.jersey,color:"#7b68ee"},{label:"Scarf",value:o.stats.scarf,color:"#ff6b9d"},{label:"Flags",value:o.stats.flags,color:"#ffa726"},{label:"Baseball Cap",value:o.stats.baseballCap,color:"#66bb6a"},{label:"Other",value:o.stats.other,color:"#ef5350"}],s=Math.max(...e.map(e=>e.value),1);return e.map((e,a)=>(0,t.jsxs)("div",{className:"horizontal-bar-item","data-testid":"merch-bar-".concat(a),children:[(0,t.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,t.jsx)("div",{className:"horizontal-bar-container",children:(0,t.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/s*100,"%"),backgroundColor:e.color},children:(0,t.jsx)("span",{className:"horizontal-bar-value",children:e.value})})})]},e.label))})()})]}),(0,t.jsxs)("div",{className:"chart-container",ref:p,children:[(0,t.jsxs)("div",{className:"chart-header",children:[(0,t.jsx)("h4",{className:"chart-title",children:"Visitor Sources"}),(0,t.jsx)("div",{className:"chart-export-buttons",children:(0,t.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>f(p,"".concat((null==o?void 0:o.eventName)||"event","_visitor_sources")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsx)("div",{className:"pie-chart","data-testid":"visitor-sources-pie-chart",children:(()=>{if(!o)return null;let e=[{label:"QR Code",value:o.stats.visitQrCode||0,color:"#3b82f6"},{label:"Short URL",value:o.stats.visitShortUrl||0,color:"#10b981"},{label:"Web",value:o.stats.visitWeb||0,color:"#f59e0b"},{label:"Facebook",value:o.stats.visitFacebook||0,color:"#1877f2"},{label:"Instagram",value:o.stats.visitInstagram||0,color:"#e4405f"},{label:"YouTube",value:o.stats.visitYoutube||0,color:"#ff0000"},{label:"TikTok",value:o.stats.visitTiktok||0,color:"#000000"},{label:"X (Twitter)",value:o.stats.visitX||0,color:"#1da1f2"},{label:"Trustpilot",value:o.stats.visitTrustpilot||0,color:"#00b67a"}],s=e.reduce((e,s)=>e+s.value,0);if(0===s)return(0,t.jsx)("div",{className:"no-data-message",children:"No visitor data available"});let a=0,l=e.filter(e=>e.value>0).map((e,l)=>{let i=e.value/s*100,c=e.value/s*360,n=a,r=a+c;a+=c;let d=90+80*Math.cos((n-90)*Math.PI/180),o=90+80*Math.sin((n-90)*Math.PI/180),h=90+80*Math.cos((r-90)*Math.PI/180),m=90+80*Math.sin((r-90)*Math.PI/180),j=["M ".concat(90," ").concat(90),"L ".concat(d," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(c>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,t.jsx)("g",{children:(0,t.jsx)("path",{d:j,fill:e.color,stroke:"white",strokeWidth:"2",children:(0,t.jsx)("title",{children:"".concat(e.label,": ").concat(e.value," (").concat(i.toFixed(1),"%)")})})},e.label)}),i=e.filter(e=>e.value>0).map((e,a)=>{let l=(e.value/s*100).toFixed(1);return(0,t.jsxs)("div",{className:"legend-item",children:[(0,t.jsx)("div",{className:"legend-color",style:{backgroundColor:e.color}}),(0,t.jsxs)("span",{children:[e.label,": ",e.value," (",l,"%)"]})]},e.label)});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pie-chart-container",children:(0,t.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[l,(0,t.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,t.jsx)("text",{x:"90",y:"86",textAnchor:"middle",className:"chart-total",fontSize:"20",fontWeight:"700",fill:"#1a202c",children:s}),(0,t.jsx)("text",{x:"90",y:"102",textAnchor:"middle",className:"chart-label",fontSize:"12",fill:"#6b7280",children:"VISITS"})]})}),(0,t.jsx)("div",{className:"chart-legend",children:i})]})})()})})]})]})]})]})]})}},5594:(e,s,a)=>{"use strict";function t(e){for(var s=1;s<arguments.length;s++){var a=null!=arguments[s]?arguments[s]:{},t=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.forEach(function(s){var t;t=a[s],s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t})}return e}a.d(s,{_:()=>t})}},e=>{e.O(0,[441,964,358],()=>e(e.s=4621)),_N_E=e.O()}]);