(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{2584:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,9430,23)),Promise.resolve().then(a.bind(a,8107))},8107:(e,s,a)=>{"use strict";a.d(s,{default:()=>c});var t=a(5594),i=a(376),l=a(5155),n=a(2115);function r(e){let{value:s=[],onChange:a,disabled:t=!1,placeholder:i="Add hashtags...",maxTags:r=999}=e,[c,d]=(0,n.useState)(""),[o,h]=(0,n.useState)([]),[m,v]=(0,n.useState)(!1),[u,j]=(0,n.useState)(-1),[x,g]=(0,n.useState)(!1),p=(0,n.useRef)(null),b=(0,n.useRef)(null),N=async e=>{if(!e.trim())return void h([]);g(!0);try{let a=await fetch("/api/hashtags?search=".concat(encodeURIComponent(e))),t=await a.json();if(t.success){let a=t.hashtags.filter(e=>!s.includes(e)).map(e=>({hashtag:e,isExisting:!0})),i=e.replace(/^#/,"").toLowerCase().trim(),l=/^[a-z0-9_]+$/.test(i),n=!t.hashtags.includes(i),r=!s.includes(i),c=a;l&&n&&r&&i&&(c=[{hashtag:i,isExisting:!1},...a]),h(c.slice(0,8))}}catch(e){console.error("Failed to fetch hashtag suggestions:",e)}finally{g(!1)}};(0,n.useEffect)(()=>{let e=setTimeout(()=>{c.trim()?(N(c),v(!0)):(h([]),v(!1))},300);return()=>clearTimeout(e)},[c,s]);let f=async e=>{try{let t=await fetch("/api/hashtags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hashtag:e})}),i=await t.json();if(i.success){let e=i.hashtag;s.includes(e)||a([...s,e]),d(""),v(!1),j(-1)}else alert(i.error||"Invalid hashtag format")}catch(e){console.error("Failed to add hashtag:",e),alert("Failed to add hashtag")}},y=e=>{a(s.filter((s,a)=>a!==e))};return(0,l.jsxs)("div",{className:"hashtag-input-container",children:[(0,l.jsxs)("div",{className:"hashtag-input-wrapper",children:[(0,l.jsx)("div",{className:"hashtag-tags",children:s.map((e,s)=>(0,l.jsxs)("span",{className:"hashtag-tag",children:["#",e,!t&&(0,l.jsx)("button",{type:"button",onClick:()=>y(s),className:"hashtag-remove","aria-label":"Remove ".concat(e),children:"\xd7"})]},s))}),(0,l.jsx)("input",{ref:p,type:"text",value:c,onChange:e=>{d(e.target.value),j(-1)},onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),u>=0&&o[u]?f(o[u].hashtag):c.trim()&&f(c.trim())):"ArrowDown"===e.key?(e.preventDefault(),j(e=>e<o.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),j(e=>e>0?e-1:-1)):"Escape"===e.key?(v(!1),j(-1)):"Backspace"===e.key&&!c&&s.length>0&&y(s.length-1)},onFocus:()=>{c.trim()&&v(!0)},onBlur:()=>{setTimeout(()=>{v(!1),j(-1)},200)},disabled:t,placeholder:0===s.length?i:"",className:"hashtag-input",autoComplete:"off"})]}),m&&o.length>0&&(0,l.jsxs)("div",{ref:b,className:"hashtag-suggestions",children:[x&&(0,l.jsx)("div",{className:"hashtag-suggestion loading",children:"Searching..."}),o.map((e,s)=>(0,l.jsxs)("div",{className:"hashtag-suggestion ".concat(s===u?"selected":""," ").concat(e.isExisting?"existing":"new"),onClick:()=>{f(e.hashtag)},children:[(0,l.jsxs)("span",{className:"hashtag-suggestion-text",children:["#",e.hashtag]}),(0,l.jsx)("span",{className:"hashtag-suggestion-label",children:e.isExisting?"existing":"new"})]},e.hashtag))]})]})}function c(e){let{user:s,permissions:c}=e,[d,o]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[v,u]=(0,n.useState)(!0),[j,x]=(0,n.useState)(null),[g,p]=(0,n.useState)(!1),[b,N]=(0,n.useState)(!1),[f,y]=(0,n.useState)({eventName:"",eventDate:"",hashtags:[]}),[D,k]=(0,n.useState)(!1),[w,C]=(0,n.useState)(!1),[S,I]=(0,n.useState)(null),[P,T]=(0,n.useState)({eventName:"",eventDate:"",hashtags:[]}),[E,A]=(0,n.useState)(!1);(0,n.useRef)(null),(0,n.useRef)(null),(0,n.useRef)(null);let F=(0,n.useRef)(null),M=(0,n.useRef)(null),z=(0,n.useRef)(null),_=(0,n.useRef)(null);(0,n.useEffect)(()=>{V()},[]),(0,n.useEffect)(()=>{d.length>0?R():m([])},[d]);let V=async()=>{try{console.log("\uD83D\uDD04 Loading projects from /api/projects...");let e=await fetch("/api/projects");console.log("\uD83D\uDCE1 Response status:",e.status,e.statusText);let s=await e.json();console.log("\uD83D\uDCCA API Response:",s),s.success?(console.log("✅ Projects loaded successfully:",s.projects.length,"projects"),o(s.projects)):(console.error("❌ API returned error:",s.error),console.error("Debug info:",s.debug))}catch(e){console.error("❌ Failed to load projects:",e)}finally{u(!1)}},R=async()=>{try{console.log("\uD83C\uDFF7️ Loading hashtags with UUIDs...");let e=await fetch("/api/hashtags/slugs"),s=await e.json();if(s.success)m(s.hashtags),console.log("✅ Hashtags with UUIDs loaded successfully:",s.hashtags.length,"unique hashtags");else{console.error("❌ Failed to load hashtag UUIDs:",s.error);let e={};d.forEach(s=>{s.hashtags&&Array.isArray(s.hashtags)&&s.hashtags.forEach(s=>{e[s]=(e[s]||0)+1})});let a=Object.keys(e).map(s=>({hashtag:s,slug:s,count:e[s]})).sort((e,s)=>s.count-e.count);m(a)}}catch(e){console.error("❌ Failed to load hashtags:",e)}},U=async e=>{if(confirm("Are you sure you want to delete this project?"))try{(await fetch("/api/projects?projectId=".concat(e),{method:"DELETE"})).ok&&(o(s=>s.filter(s=>s._id!==e)),j&&j._id===e&&(x(null),p(!1)))}catch(e){console.error("Failed to delete project:",e)}},B=async()=>{if(!S||!P.eventName.trim()||!P.eventDate)return void alert("Please fill in both Event Name and Event Date.");A(!0);try{let e=await fetch("/api/projects",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:S._id,eventName:P.eventName.trim(),eventDate:P.eventDate,hashtags:P.hashtags,stats:S.stats})}),s=await e.json();e.ok&&s.success?(o(e=>e.map(e=>e._id===S._id?(0,i._)((0,t._)({},e),{eventName:P.eventName.trim(),eventDate:P.eventDate,hashtags:P.hashtags}):e)),j&&j._id===S._id&&x(e=>e?(0,i._)((0,t._)({},e),{eventName:P.eventName.trim(),eventDate:P.eventDate,hashtags:P.hashtags}):null),T({eventName:"",eventDate:"",hashtags:[]}),I(null),C(!1),alert('Project "'.concat(P.eventName,'" updated successfully!'))):alert("Failed to update project: ".concat(s.error||"Unknown error"))}catch(e){console.error("Failed to update project:",e),alert("Failed to update project. Please try again.")}finally{A(!1)}},L=async()=>{if(!f.eventName.trim()||!f.eventDate)return void alert("Please fill in both Event Name and Event Date.");k(!0);try{let e=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:f.eventName.trim(),eventDate:f.eventDate,hashtags:f.hashtags,stats:{remoteImages:0,hostessImages:0,selfies:0,indoor:0,outdoor:0,stadium:0,female:0,male:0,genAlpha:0,genYZ:0,genX:0,boomer:0,merched:0,jersey:0,scarf:0,flags:0,baseballCap:0,other:0,approvedImages:0,rejectedImages:0,visitQrCode:0,visitShortUrl:0,visitWeb:0,visitFacebook:0,visitInstagram:0,visitYoutube:0,visitTiktok:0,visitX:0,visitTrustpilot:0,eventAttendees:0,eventTicketPurchases:0,eventResultHome:0,eventResultVisitor:0,eventValuePropositionVisited:0,eventValuePropositionPurchases:0}})}),s=await e.json();e.ok&&s.success?(o(e=>[s.project,...e]),y({eventName:"",eventDate:"",hashtags:[]}),N(!1),alert('Project "'.concat(s.project.eventName,'" created successfully!\n\nEdit Link: /edit/').concat(s.project.editSlug,"\nStats Link: /stats/").concat(s.project.viewSlug))):alert("Failed to create project: ".concat(s.error||"Unknown error"))}catch(e){console.error("Failed to create project:",e),alert("Failed to create project. Please try again.")}finally{k(!1)}},Y=async(e,s)=>{if(e.current)try{let t=(await a.e(316).then(a.t.bind(a,2699,23))).default;await new Promise(e=>setTimeout(e,100));let i=await t(e.current,{logging:!1}),l=document.createElement("a");l.download="".concat(s,".png"),l.href=i.toDataURL("image/png",1),document.body.appendChild(l),l.click(),document.body.removeChild(l),alert("Chart downloaded successfully!")}catch(e){console.error("Failed to export chart as PNG:",e),alert("Failed to export chart. Please try again.")}},G=d.length,W=d.reduce((e,s)=>e+(s.stats.indoor+s.stats.outdoor+s.stats.stadium),0),O=d.reduce((e,s)=>e+(s.stats.visitWeb||0),0),X=d.reduce((e,s)=>e+(s.stats.eventAttendees||0),0),H=d.reduce((e,s)=>e+(s.stats.approvedImages||0),0);d.reduce((e,s)=>e+(s.stats.eventTicketPurchases||0),0);let Q=H+d.reduce((e,s)=>e+(s.stats.rejectedImages||0),0),Z=Q>0?Math.round(H/Q*100):0,J=X>0?Math.round(W/X*100):0;return v?(0,l.jsx)("div",{className:"admin-container",children:(0,l.jsx)("div",{className:"glass-card",children:(0,l.jsx)("div",{className:"loading-spinner",children:"Loading admin dashboard..."})})}):(0,l.jsxs)("div",{className:"admin-container",children:[(0,l.jsxs)("div",{className:"glass-card admin-overview",children:[(0,l.jsx)("h2",{className:"section-title",children:"Dashboard Overview"}),(0,l.jsxs)("div",{className:"stats-grid-admin",children:[(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:G}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Total Projects"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:W}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Total Audience"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:O}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Total Web Visits"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:X}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]})]})]}),(0,l.jsxs)("div",{className:"glass-card admin-overview",children:[(0,l.jsx)("h2",{className:"section-title",children:"Success Manager Overview"}),(0,l.jsxs)("div",{className:"stats-grid-admin",children:[(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:H}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsx)("div",{className:"stat-value-admin",children:X}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Event Attendees"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsxs)("div",{className:"stat-value-admin",children:[J,"%"]}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Fan Engagement"})]}),(0,l.jsxs)("div",{className:"stat-card-admin",children:[(0,l.jsxs)("div",{className:"stat-value-admin",children:[Z,"%"]}),(0,l.jsx)("div",{className:"stat-label-admin",children:"Approved Images"})]})]})]}),(0,l.jsxs)("div",{className:"glass-card admin-overview",children:[(0,l.jsx)("h2",{className:"section-title",children:"\uD83C\uDFF7️ Hashtag Overview"}),h.length>0?(0,l.jsx)("div",{className:"hashtag-overview-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem",marginTop:"1rem"},children:h.map((e,s)=>(0,l.jsxs)("a",{href:"/hashtag/".concat(e.slug),className:"hashtag-overview-button",style:{display:"block",padding:"1.5rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",borderRadius:"12px",textDecoration:"none",textAlign:"center",transition:"all 0.2s ease",border:"none",cursor:"pointer",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 25px -5px rgba(0, 0, 0, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:[(0,l.jsx)("div",{style:{fontSize:"3rem",fontWeight:"bold",marginBottom:"0.5rem",color:"white"},children:e.count}),(0,l.jsxs)("div",{style:{fontSize:"1.125rem",fontWeight:"600",color:"white"},children:["#",e.hashtag]}),(0,l.jsxs)("div",{style:{fontSize:"0.875rem",opacity:.9,marginTop:"0.25rem",color:"white"},children:[e.count," project",1!==e.count?"s":""]})]},e.hashtag))}):(0,l.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,l.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:"\uD83C\uDFF7️"}),(0,l.jsx)("div",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem"},children:"No Hashtags Yet"}),(0,l.jsx)("div",{style:{fontSize:"0.875rem"},children:"Create projects with hashtags to see them here"})]})]}),(0,l.jsxs)("div",{className:"glass-card admin-projects",children:[(0,l.jsxs)("div",{className:"projects-header",children:[(0,l.jsx)("h2",{className:"section-title",children:"Project Management"}),(0,l.jsxs)("div",{className:"projects-header-buttons",children:[(0,l.jsx)("a",{href:"/admin/charts",className:"btn btn-info",title:"Manage chart algorithms and formulas",children:"\uD83D\uDCCA Chart Algorithm Manager"}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>N(!0),children:"➕ Add New Project"}),(0,l.jsxs)("button",{className:"btn btn-primary",onClick:()=>p(!g),children:[g?"Hide":"Show"," Project Details"]})]})]}),(0,l.jsx)("div",{className:"projects-table-container",children:(0,l.jsxs)("table",{className:"projects-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Event Name"}),(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Total Fans"}),(0,l.jsx)("th",{children:"Images"}),(0,l.jsx)("th",{children:"Merch"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:0===d.length?(0,l.jsx)("tr",{children:(0,l.jsxs)("td",{colSpan:6,className:"admin-empty-state",children:[(0,l.jsx)("div",{className:"admin-empty-icon",children:"\uD83D\uDCCA"}),(0,l.jsx)("div",{className:"admin-empty-title",children:"No Projects Found"}),(0,l.jsx)("div",{className:"admin-empty-subtitle",children:0===G?"No projects have been created yet. Create your first project to get started.":"Loading projects..."})]})}):d.map(e=>{let s=e.stats.indoor+e.stats.outdoor+e.stats.stadium,a=e.stats.remoteImages+e.stats.hostessImages+e.stats.selfies,t=e.stats.merched+e.stats.jersey+e.stats.scarf+e.stats.flags+e.stats.baseballCap+e.stats.other;return(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{className:"project-name",children:[e.viewSlug?(0,l.jsx)("a",{href:"/stats/".concat(e.viewSlug),className:"project-title-link",title:"View detailed statistics for ".concat(e.eventName),target:"_blank",rel:"noopener noreferrer",children:e.eventName}):(0,l.jsx)("span",{className:"project-name-text",children:e.eventName}),e.hashtags&&e.hashtags.length>0&&(0,l.jsx)("div",{className:"project-hashtags",style:{marginTop:"0.5rem"},children:e.hashtags.map((e,s)=>(0,l.jsxs)("span",{className:"hashtag hashtag-small",children:["#",e]},s))}),(0,l.jsx)("br",{}),e.editSlug?(0,l.jsx)("small",{children:(0,l.jsx)("a",{href:"/edit/".concat(e.editSlug),className:"project-edit-link",title:"Edit ".concat(e.eventName," statistics"),target:"_blank",rel:"noopener noreferrer",children:"\uD83D\uDCDD Edit Statistics"})}):(0,l.jsx)("small",{className:"no-edit-link",children:"Legacy Project - No Edit Link"})]}),(0,l.jsx)("td",{children:new Date(e.eventDate).toLocaleDateString()}),(0,l.jsx)("td",{className:"stat-number",children:s}),(0,l.jsx)("td",{className:"stat-number",children:a}),(0,l.jsx)("td",{className:"stat-number",children:t}),(0,l.jsxs)("td",{className:"actions-cell",children:[(0,l.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:()=>{I(e),T({eventName:e.eventName,eventDate:e.eventDate,hashtags:e.hashtags||[]}),C(!0)},title:"Edit project name and date",children:"✏️ Edit"}),(0,l.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>(e=>{let s=e.stats,a=new Blob([[["Event Name",e.eventName],["Event Date",e.eventDate],["Generated",new Date().toLocaleString()],[""],["Category","Metric","Count"],["Images","Remote Images",s.remoteImages],["Images","Hostess Images",s.hostessImages],["Images","Selfies",s.selfies],["Images","Approved Images",s.approvedImages||0],["Images","Rejected Images",s.rejectedImages||0],["Fans","Indoor",s.indoor],["Fans","Outdoor",s.outdoor],["Fans","Stadium",s.stadium],["Gender","Female",s.female],["Gender","Male",s.male],["Age","Gen Alpha",s.genAlpha],["Age","Gen Y+Z",s.genYZ],["Age","Gen X",s.genX],["Age","Boomer",s.boomer],["Merchandise","Merched",s.merched],["Merchandise","Jersey",s.jersey],["Merchandise","Scarf",s.scarf],["Merchandise","Flags",s.flags],["Merchandise","Baseball Cap",s.baseballCap],["Merchandise","Other",s.other],["Success Manager","Event Attendees",s.eventAttendees||0],["Success Manager","Ticket Purchases",s.eventTicketPurchases||0],["Success Manager","QR Code Visits",s.visitQrCode||0],["Success Manager","Short URL Visits",s.visitShortUrl||0],["Success Manager","Web Visits",s.visitWeb||0],["Success Manager","Facebook Visits",s.visitFacebook||0],["Success Manager","Instagram Visits",s.visitInstagram||0],["Success Manager","YouTube Visits",s.visitYoutube||0],["Success Manager","TikTok Visits",s.visitTiktok||0],["Success Manager","X Visits",s.visitX||0],["Success Manager","Trustpilot Visits",s.visitTrustpilot||0]].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");if(void 0!==t.download){let s=URL.createObjectURL(a);t.setAttribute("href",s),t.setAttribute("download","".concat(e.eventName.replace(/[^a-z0-9]/gi,"_"),"_admin_export.csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}})(e),children:"\uD83D\uDCC4 Export"}),(0,l.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>U(e._id),children:"\uD83D\uDDD1️ Delete"})]})]},e._id)})})]})})]}),g&&j&&(0,l.jsxs)("div",{className:"glass-card project-details",children:[(0,l.jsxs)("div",{className:"project-details-header",children:[(0,l.jsxs)("h2",{className:"section-title",children:[j.eventName," - Detailed Statistics"]}),(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>p(!1),children:"✕ Close"})]}),(0,l.jsxs)("div",{className:"project-stats-layout",children:[(0,l.jsxs)("div",{className:"stats-left-column",children:[(0,l.jsx)("h3",{className:"column-title",children:"Event Statistics"}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Images (",j.stats.remoteImages+j.stats.hostessImages+j.stats.selfies,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Remote Images"}),(0,l.jsx)("span",{children:j.stats.remoteImages})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Hostess Images"}),(0,l.jsx)("span",{children:j.stats.hostessImages})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Selfies"}),(0,l.jsx)("span",{children:j.stats.selfies})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Fans (",j.stats.indoor+j.stats.outdoor+j.stats.stadium,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Indoor"}),(0,l.jsx)("span",{children:j.stats.indoor})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Outdoor"}),(0,l.jsx)("span",{children:j.stats.outdoor})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Stadium"}),(0,l.jsx)("span",{children:j.stats.stadium})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Gender (",j.stats.female+j.stats.male,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Female"}),(0,l.jsx)("span",{children:j.stats.female})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Male"}),(0,l.jsx)("span",{children:j.stats.male})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Age (",j.stats.genAlpha+j.stats.genYZ+j.stats.genX+j.stats.boomer,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Gen Alpha"}),(0,l.jsx)("span",{children:j.stats.genAlpha})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Gen Y+Z"}),(0,l.jsx)("span",{children:j.stats.genYZ})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Gen X"}),(0,l.jsx)("span",{children:j.stats.genX})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Boomer"}),(0,l.jsx)("span",{children:j.stats.boomer})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsxs)("h4",{children:["Merchandise (",j.stats.merched+j.stats.jersey+j.stats.scarf+j.stats.flags+j.stats.baseballCap+j.stats.other,")"]}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Merched"}),(0,l.jsx)("span",{children:j.stats.merched})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Jersey"}),(0,l.jsx)("span",{children:j.stats.jersey})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Scarf"}),(0,l.jsx)("span",{children:j.stats.scarf})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Flags"}),(0,l.jsx)("span",{children:j.stats.flags})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Baseball Cap"}),(0,l.jsx)("span",{children:j.stats.baseballCap})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Other"}),(0,l.jsx)("span",{children:j.stats.other})]})]})]}),(0,l.jsxs)("div",{className:"stats-subsection",children:[(0,l.jsx)("h4",{children:"Success Manager Statistics"}),(0,l.jsxs)("div",{className:"stats-breakdown",children:[(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Approved Images"}),(0,l.jsx)("span",{children:j.stats.approvedImages||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Rejected Images"}),(0,l.jsx)("span",{children:j.stats.rejectedImages||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Event Attendees"}),(0,l.jsx)("span",{children:j.stats.eventAttendees||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Ticket Purchases"}),(0,l.jsx)("span",{children:j.stats.eventTicketPurchases||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"QR Code Visits"}),(0,l.jsx)("span",{children:j.stats.visitQrCode||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Short URL Visits"}),(0,l.jsx)("span",{children:j.stats.visitShortUrl||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Web Visits"}),(0,l.jsx)("span",{children:j.stats.visitWeb||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Facebook Visits"}),(0,l.jsx)("span",{children:j.stats.visitFacebook||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Instagram Visits"}),(0,l.jsx)("span",{children:j.stats.visitInstagram||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"YouTube Visits"}),(0,l.jsx)("span",{children:j.stats.visitYoutube||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"TikTok Visits"}),(0,l.jsx)("span",{children:j.stats.visitTiktok||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"X Visits"}),(0,l.jsx)("span",{children:j.stats.visitX||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Trustpilot Visits"}),(0,l.jsx)("span",{children:j.stats.visitTrustpilot||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Event Result Home"}),(0,l.jsx)("span",{children:j.stats.eventResultHome||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Event Result Visitor"}),(0,l.jsx)("span",{children:j.stats.eventResultVisitor||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Value Proposition Visited"}),(0,l.jsx)("span",{children:j.stats.eventValuePropositionVisited||0})]}),(0,l.jsxs)("div",{className:"stat-item",children:[(0,l.jsx)("span",{children:"Value Proposition Purchases"}),(0,l.jsx)("span",{children:j.stats.eventValuePropositionPurchases||0})]})]})]})]}),(0,l.jsxs)("div",{className:"charts-right-column",children:[(0,l.jsx)("h3",{className:"column-title",children:"Data Visualization"}),(0,l.jsxs)("div",{className:"charts-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem",marginBottom:"2rem"},children:[(0,l.jsxs)("div",{className:"chart-container",ref:F,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Merchandise"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>Y(F,"".concat((null==j?void 0:j.eventName)||"event","_merchandise")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!j)return null;let e=[{label:"Merched",value:j.stats.merched,color:"#4a90e2"},{label:"Jersey",value:j.stats.jersey,color:"#7b68ee"},{label:"Scarf",value:j.stats.scarf,color:"#ff6b9d"},{label:"Flags",value:j.stats.flags,color:"#ffa726"},{label:"Baseball Cap",value:j.stats.baseballCap,color:"#66bb6a"},{label:"Other",value:j.stats.other,color:"#ef5350"}],s=Math.max(...e.map(e=>e.value),1);return e.map((e,a)=>(0,l.jsxs)("div",{className:"horizontal-bar-item","data-testid":"merch-bar-".concat(a),children:[(0,l.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,l.jsx)("div",{className:"horizontal-bar-container",children:(0,l.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/s*100,"%"),backgroundColor:e.color},children:(0,l.jsx)("span",{className:"horizontal-bar-value",children:e.value})})})]},e.label))})()})]}),(0,l.jsxs)("div",{className:"chart-container",ref:M,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Engagement"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>Y(M,"".concat((null==j?void 0:j.eventName)||"event","_engagement")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!j)return null;let e=j.stats.indoor+j.stats.outdoor+j.stats.stadium,s=j.stats.eventAttendees||0,a=j.stats.remoteImages+j.stats.hostessImages+j.stats.selfies,t=(j.stats.visitFacebook||0)+(j.stats.visitInstagram||0)+(j.stats.visitYoutube||0)+(j.stats.visitTiktok||0)+(j.stats.visitX||0)+(j.stats.visitTrustpilot||0),i=(j.stats.eventValuePropositionVisited||0)+(j.stats.eventValuePropositionPurchases||0),n=s>0?e/s*100:0,r=a>0?(t+i)/a*100:0,c=[{label:"Fan Engagement (".concat(n.toFixed(1),"%)"),value:n,color:"#8b5cf6"},{label:"Fan Interaction (".concat(r.toFixed(1),"%)"),value:r,color:"#f59e0b"}];if(0===s&&0===a)return(0,l.jsx)("div",{className:"no-data-message",children:"No engagement data available"});let d=Math.max(...c.map(e=>e.value),100);return(0,l.jsx)("div",{className:"horizontal-bars-container",children:c.map((e,s)=>(0,l.jsxs)("div",{className:"horizontal-bar-item","data-testid":"engagement-bar-".concat(s),children:[(0,l.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,l.jsx)("div",{className:"horizontal-bar-container",children:(0,l.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/d*100,"%"),backgroundColor:e.color},children:(0,l.jsxs)("span",{className:"horizontal-bar-value",children:[e.value.toFixed(1),"%"]})})})]},e.label))})})()})]}),(0,l.jsxs)("div",{className:"chart-container",ref:z,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Value"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>Y(z,"".concat((null==j?void 0:j.eventName)||"event","_value")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:(()=>{if(!j)return null;let e=j.stats.remoteImages+j.stats.hostessImages+j.stats.selfies,s=j.stats.indoor+j.stats.outdoor+j.stats.stadium,a=j.stats.genAlpha+j.stats.genYZ,t=(j.stats.visitQrCode||0)+(j.stats.visitShortUrl||0)+(j.stats.visitWeb||0)+(j.stats.visitFacebook||0)+(j.stats.visitInstagram||0)+(j.stats.visitYoutube||0)+(j.stats.visitTiktok||0)+(j.stats.visitX||0)+(j.stats.visitTrustpilot||0),i=15*(j.stats.eventValuePropositionVisited||0),n=5*e,r=3*s,c=4*a,d=+t,o=[{label:"CPM",value:i,color:"#3b82f6"},{label:"eDM",value:n,color:"#10b981"},{label:"Ads",value:r,color:"#f59e0b"},{label:"U40 Eng.",value:c,color:"#8b5cf6"},{label:"Branding",value:d,color:"#ef4444"}],h=i+n+r+c+d;if(0===h)return(0,l.jsx)("div",{className:"no-data-message",children:"No value data available"});let m=Math.max(...o.map(e=>e.value),1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem",padding:"1rem",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%)",borderRadius:"12px",border:"1px solid rgba(59, 130, 246, 0.2)"},children:[(0,l.jsxs)("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.25rem"},children:["€",h.toLocaleString()]}),(0,l.jsx)("div",{style:{fontSize:"0.875rem",color:"#6b7280",fontWeight:"500"},children:"Advertisement Value"})]}),(0,l.jsx)("div",{className:"horizontal-bars-container",children:o.map((e,s)=>(0,l.jsxs)("div",{className:"horizontal-bar-item","data-testid":"value-bar-".concat(s),children:[(0,l.jsx)("div",{className:"horizontal-bar-label",children:e.label}),(0,l.jsx)("div",{className:"horizontal-bar-container",children:(0,l.jsx)("div",{className:"horizontal-bar-fill",style:{width:"".concat(e.value/m*100,"%"),backgroundColor:e.color},children:(0,l.jsxs)("span",{className:"horizontal-bar-value",children:["€",e.value.toLocaleString()]})})})]},e.label))})]})})()})]})]}),(0,l.jsx)("div",{className:"charts-row",style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},children:(0,l.jsxs)("div",{className:"chart-container",ref:_,children:[(0,l.jsxs)("div",{className:"chart-header",children:[(0,l.jsx)("h4",{className:"chart-title",children:"Visitor Sources"}),(0,l.jsx)("div",{className:"chart-export-buttons",children:(0,l.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>Y(_,"".concat((null==j?void 0:j.eventName)||"event","_visitor_sources")),title:"Download as PNG",children:"\uD83D\uDCE5 Download PNG"})})]}),(0,l.jsx)("div",{className:"pie-chart-container",children:(0,l.jsx)("div",{className:"pie-chart","data-testid":"visitor-sources-pie-chart",children:(()=>{if(!j)return null;let e=[{label:"QR Code",value:j.stats.visitQrCode||0,color:"#3b82f6"},{label:"Short URL",value:j.stats.visitShortUrl||0,color:"#10b981"},{label:"Web",value:j.stats.visitWeb||0,color:"#f59e0b"},{label:"Facebook",value:j.stats.visitFacebook||0,color:"#1877f2"},{label:"Instagram",value:j.stats.visitInstagram||0,color:"#e4405f"},{label:"YouTube",value:j.stats.visitYoutube||0,color:"#ff0000"},{label:"TikTok",value:j.stats.visitTiktok||0,color:"#000000"},{label:"X (Twitter)",value:j.stats.visitX||0,color:"#1da1f2"},{label:"Trustpilot",value:j.stats.visitTrustpilot||0,color:"#00b67a"}],s=e.reduce((e,s)=>e+s.value,0);if(0===s)return(0,l.jsx)("div",{className:"no-data-message",children:"No visitor data available"});let a=0,t=e.filter(e=>e.value>0).map((e,t)=>{let i=e.value/s*100,n=e.value/s*360,r=a,c=a+n;a+=n;let d=90+80*Math.cos((r-90)*Math.PI/180),o=90+80*Math.sin((r-90)*Math.PI/180),h=90+80*Math.cos((c-90)*Math.PI/180),m=90+80*Math.sin((c-90)*Math.PI/180),v=["M ".concat(90," ").concat(90),"L ".concat(d," ").concat(o),"A ".concat(80," ").concat(80," 0 ").concat(+(n>180)," 1 ").concat(h," ").concat(m),"Z"].join(" ");return(0,l.jsx)("g",{children:(0,l.jsx)("path",{d:v,fill:e.color,stroke:"white",strokeWidth:"2",children:(0,l.jsx)("title",{children:"".concat(e.label,": ").concat(e.value," (").concat(i.toFixed(1),"%)")})})},e.label)}),i=e.filter(e=>e.value>0).map((e,a)=>{let t=(e.value/s*100).toFixed(1);return(0,l.jsxs)("div",{className:"legend-item",children:[(0,l.jsx)("div",{className:"legend-color",style:{backgroundColor:e.color}}),(0,l.jsxs)("span",{children:[e.label,": ",e.value," (",t,"%)"]})]},e.label)});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"pie-chart-container",children:(0,l.jsxs)("svg",{width:"180",height:"180",className:"pie-chart",children:[t,(0,l.jsx)("circle",{cx:"90",cy:"90",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"2"}),(0,l.jsx)("text",{x:"90",y:"98",textAnchor:"middle",className:"chart-emoji",fontSize:"28",fill:"#1a202c",children:"\uD83C\uDF10"})]})}),(0,l.jsx)("div",{className:"chart-legend",children:i})]})})()})})]})})]})]})]}),b&&(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:(0,l.jsxs)("div",{className:"glass-card",style:{width:"100%",maxWidth:"500px",padding:"2rem"},children:[(0,l.jsxs)("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[(0,l.jsx)("h3",{className:"title",style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Create New Project"}),(0,l.jsx)("p",{className:"subtitle",style:{marginBottom:"0",fontSize:"1rem"},children:"Add a new event to track statistics"})]}),(0,l.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Event Name"}),(0,l.jsx)("input",{type:"text",className:"form-input",value:f.eventName,onChange:e=>y(s=>(0,i._)((0,t._)({},s),{eventName:e.target.value})),placeholder:"Enter event name",disabled:D,autoFocus:!0,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Event Date"}),(0,l.jsx)("input",{type:"date",className:"form-input",value:f.eventDate,onChange:e=>y(s=>(0,i._)((0,t._)({},s),{eventDate:e.target.value})),disabled:D,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Hashtags"}),(0,l.jsx)(r,{value:f.hashtags,onChange:e=>y(s=>(0,i._)((0,t._)({},s),{hashtags:e})),disabled:D,placeholder:"Add hashtags to categorize this project..."})]}),(0,l.jsx)("div",{style:{padding:"1rem",background:"rgba(102, 126, 234, 0.1)",borderRadius:"12px",border:"1px solid rgba(102, 126, 234, 0.2)",marginBottom:"0"},children:(0,l.jsx)("p",{style:{color:"#4a5568",fontSize:"0.9rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:"\uD83D\uDCDD All statistics will be initialized to 0. You can edit them after creation using the provided edit link."})})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>{N(!1),y({eventName:"",eventDate:"",hashtags:[]})},disabled:D,style:{flex:"1"},children:"Cancel"}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:L,disabled:D||!f.eventName.trim()||!f.eventDate,style:{flex:"1"},children:D?"Creating...":"Create Project"})]})]})}),w&&S&&(0,l.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem"},children:(0,l.jsxs)("div",{className:"glass-card",style:{width:"100%",maxWidth:"500px",padding:"2rem"},children:[(0,l.jsxs)("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[(0,l.jsx)("h3",{className:"title",style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"Edit Project"}),(0,l.jsx)("p",{className:"subtitle",style:{marginBottom:"0",fontSize:"1rem"},children:"Update project name and date"})]}),(0,l.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Event Name"}),(0,l.jsx)("input",{type:"text",className:"form-input",value:P.eventName,onChange:e=>T(s=>(0,i._)((0,t._)({},s),{eventName:e.target.value})),placeholder:"Enter event name",disabled:E,autoFocus:!0,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Event Date"}),(0,l.jsx)("input",{type:"date",className:"form-input",value:P.eventDate,onChange:e=>T(s=>(0,i._)((0,t._)({},s),{eventDate:e.target.value})),disabled:E,style:{color:"#1a202c",fontSize:"1rem"}})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Hashtags"}),(0,l.jsx)(r,{value:P.hashtags,onChange:e=>T(s=>(0,i._)((0,t._)({},s),{hashtags:e})),disabled:E,placeholder:"Add hashtags to categorize this project..."})]}),(0,l.jsx)("div",{style:{padding:"1rem",background:"rgba(251, 191, 36, 0.1)",borderRadius:"12px",border:"1px solid rgba(251, 191, 36, 0.2)",marginBottom:"0"},children:(0,l.jsx)("p",{style:{color:"#4a5568",fontSize:"0.9rem",margin:0,display:"flex",alignItems:"center",gap:"0.5rem"},children:"⚠️ Project name, date, and hashtags will be updated. All statistics will remain unchanged."})})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[(0,l.jsx)("button",{className:"btn btn-secondary",onClick:()=>{C(!1),I(null),T({eventName:"",eventDate:"",hashtags:[]})},disabled:E,style:{flex:"1"},children:"Cancel"}),(0,l.jsx)("button",{className:"btn btn-primary",onClick:B,disabled:E||!P.eventName.trim()||!P.eventDate,style:{flex:"1"},children:E?"Updating...":"Update Project"})]})]})})]})}},9430:()=>{}},e=>{e.O(0,[31,441,964,358],()=>e(e.s=2584)),_N_E=e.O()}]);